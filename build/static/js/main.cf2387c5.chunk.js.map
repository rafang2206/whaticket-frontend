{"version":3,"sources":["assets/sound.mp3","assets/wa-background.png","translate/languages/index.js","translate/languages/pt.js","translate/languages/en.js","translate/languages/es.js","translate/i18n.js","config.js","services/socket-io.js","errors/toastError.js","services/api.js","hooks/useWhatsApps/index.js","context/WhatsApp/WhatsAppsContext.js","hooks/useAuth.js/index.js","context/Auth/AuthContext.js","rules.js","components/Can/index.js","layout/MainListItems.js","components/ButtonWithSpinner/index.js","components/MarkdownWrapper/index.js","components/TicketListItem/index.js","hooks/useTickets/index.js","components/NotificationsPopOver/index.js","components/QueueSelect/index.js","components/UserModal/index.js","components/BackdropLoading/index.js","layout/index.js","pages/Dashboard/Title.js","pages/Dashboard/Chart.js","pages/Dashboard/index.js","components/ContactModal/index.js","components/NewTicketModal/index.js","components/TicketsListSkeleton/index.js","components/TicketsList/index.js","components/TabPanel/index.js","components/TicketsQueueSelect/index.js","components/TicketsManager/index.js","components/ContactDrawerSkeleton/index.js","components/ContactDrawer/index.js","components/MessageInput/RecordingTimer.js","context/ReplyingMessage/ReplyingMessageContext.js","components/MessageInput/index.js","hooks/useLocalStorage/index.js","components/TicketHeaderSkeleton/index.js","components/TicketHeader/index.js","components/TicketInfo/index.js","components/ConfirmationModal/index.js","hooks/useQueues/index.js","components/TransferTicketModal/index.js","components/TicketOptionsMenu/index.js","components/TicketActionButtons/index.js","components/VcardPreview/index.js","components/LocationPreview/index.js","components/ModalImageCors/index.js","components/MessageOptionsMenu/index.js","components/Audio/index.jsx","components/MessagesList/index.js","components/Ticket/index.js","pages/Tickets/index.js","pages/Signup/index.js","pages/Login/index.js","components/MainContainer/index.js","components/MainHeader/index.js","components/MainHeaderButtonsWrapper/index.js","components/Title/index.js","components/TableRowSkeleton/index.js","components/WhatsAppModal/index.js","components/QrcodeModal/index.js","pages/Connections/index.js","pages/Settings/index.js","pages/Users/index.js","pages/Contacts/index.js","components/QuickAnswersModal/index.js","pages/QuickAnswers/index.js","components/ColorPicker/index.js","components/QueueModal/index.js","pages/Queues/index.js","routes/Route.js","routes/index.js","App.js","index.js"],"names":["module","exports","messages","pt","translations","signup","title","toasts","success","fail","form","name","email","password","buttons","submit","login","register","auth","dashboard","charts","perDay","inAttendance","waiting","closed","connections","deleted","confirmationModal","deleteTitle","deleteMessage","disconnectTitle","disconnectMessage","add","disconnect","tryAgain","qrcode","newQr","connecting","toolTips","disconnected","content","connected","timeout","table","status","lastUpdate","default","actions","session","whatsappModal","edit","farewellMessage","okAdd","okEdit","cancel","qrCode","message","contacts","searchPlaceholder","importTitlte","importMessage","import","whatsapp","contactModal","mainInfo","extraInfo","number","extraName","extraValue","addExtraInfo","quickAnswersModal","shortcut","queueModal","color","greetingMessage","userModal","profile","chat","noTicketMessage","ticketsManager","newTicket","ticketsQueueSelect","placeholder","tickets","notification","tabs","open","search","showAll","transferTicketModal","fieldLabel","fieldQueueLabel","fieldConnectionLabel","fieldQueuePlaceholder","fieldConnectionPlaceholder","noOptions","ok","ticketsList","pendingHeader","assignedHeader","noTicketsTitle","noTicketsMessage","connectionTitle","accept","newTicketModal","mainDrawer","listItems","quickAnswers","queues","administration","users","settings","appBar","user","logout","notifications","noTickets","greeting","queueSelect","inputLabel","userCreation","options","enabled","disabled","messagesList","header","assignedTo","return","resolve","reopen","messagesInput","placeholderOpen","placeholderClosed","signMessage","contactDrawer","ticketOptionsMenu","delete","transfer","confirm","messageOptionsMenu","reply","backendErrors","ERR_NO_OTHER_WHATSAPP","ERR_NO_DEF_WAPP_FOUND","ERR_WAPP_NOT_INITIALIZED","ERR_WAPP_CHECK_CONTACT","ERR_WAPP_INVALID_CONTACT","ERR_WAPP_DOWNLOAD_MEDIA","ERR_INVALID_CREDENTIALS","ERR_SENDING_WAPP_MSG","ERR_DELETE_WAPP_MSG","ERR_OTHER_OPEN_TICKET","ERR_SESSION_EXPIRED","ERR_USER_CREATION_DISABLED","ERR_NO_PERMISSION","ERR_DUPLICATED_CONTACT","ERR_NO_SETTING_FOUND","ERR_NO_CONTACT_FOUND","ERR_NO_TICKET_FOUND","ERR_NO_USER_FOUND","ERR_NO_WAPP_FOUND","ERR_CREATING_MESSAGE","ERR_CREATING_TICKET","ERR_FETCH_WAPP_MSG","ERR_QUEUE_COLOR_ALREADY_EXISTS","ERR_WAPP_GREETING_REQUIRED","en","titleFrom","es","i18n","use","LanguageDetector","init","debug","defaultNS","fallbackLng","ns","resources","getConfig","defaultValue","undefined","window","ENV","process","getBackendUrl","connectToSocket","openSocket","toastError","err","errorMsg","response","data","error","exists","toast","t","toastId","api","axios","create","baseURL","withCredentials","i","reducer","state","action","type","whatsApps","payload","whatsApp","whatsAppIndex","findIndex","s","id","updatedAt","retries","whatsAppId","splice","useWhatsApps","useReducer","dispatch","useState","loading","setLoading","useEffect","get","fetchSession","socket","on","whatsappId","WhatsAppsContext","createContext","WhatsAppsProvider","children","Provider","value","useAuth","history","useHistory","isAuth","setIsAuth","setUser","interceptors","request","config","token","localStorage","getItem","headers","JSON","parse","Promise","reject","originalRequest","_retry","post","setItem","stringify","defaults","Authorization","removeItem","handleLogin","userData","push","handleLogout","AuthContext","AuthProvider","rules","static","admin","Can","role","perform","yes","no","permissions","staticPermissions","includes","dynamicPermissions","dynamic","permissionCondition","check","ListItemLink","props","icon","primary","to","className","renderLink","React","useMemo","forwardRef","itemProps","ref","ListItem","button","component","ListItemIcon","ListItemText","defaultProps","MainListItems","drawerClose","useContext","connectionWarning","setConnectionWarning","delayDebounceFn","setTimeout","length","filter","whats","clearTimeout","onClick","Badge","badgeContent","Divider","ListSubheader","inset","useStyles","makeStyles","theme","position","buttonProgress","green","top","left","marginTop","marginLeft","ButtonWithSpinner","rest","classes","Button","CircularProgress","size","elements","allowedElements","CustomLink","target","rel","MarkdownWrapper","boldRegex","tildaRegex","test","replace","markdownOptions","disableParsingRawHTML","forceInline","overrides","a","forEach","element","el","ticket","pendingTicket","cursor","noTicketsDiv","display","height","margin","flexDirection","alignItems","justifyContent","noTicketsText","textAlign","fontSize","lineHeight","fontWeight","contactNameWrapper","lastMessageTime","justifySelf","closedBadge","alignSelf","marginRight","contactLastMessage","paddingRight","newMessagesCount","badgeStyle","backgroundColor","acceptButton","ticketQueueColor","flex","width","userTag","right","bottom","background","border","padding","paddingLeft","borderRadius","TicketListItem","ticketId","useParams","isMounted","useRef","current","handleAcepptTicket","put","userId","Fragment","key","dense","e","selected","clsx","Tooltip","arrow","placement","queue","style","ListItemAvatar","Avatar","src","contact","profilePicUrl","disableTypography","Typography","noWrap","variant","lastMessage","isSameDay","parseISO","Date","format","secondary","unreadMessages","badge","useTickets","searchParam","pageNumber","date","queueIds","withUnreadMessages","hasMore","setHasMore","setTickets","count","setCount","fetchTickets","params","horasFecharAutomaticamente","Number","dataLimite","setHours","getHours","closeTicket","tabContainer","overflowY","maxHeight","scrollbarStyles","popoverPaper","maxWidth","spacing","breakpoints","down","noShadow","boxShadow","NotificationsPopOver","ticketIdUrl","location","pathname","split","ticketIdRef","anchorEl","isOpen","setIsOpen","setNotifications","setDesktopNotifications","useSound","alertSound","play","soundAlertRef","historyRef","Notification","requestPermission","console","log","emit","prevState","ticketIndex","notfiticationIndex","n","tag","String","close","read","document","visibilityState","isGroup","handleNotifications","body","renotify","onclick","preventDefault","focus","handleClickAway","NotificationTicket","IconButton","aria-label","Popover","disableScrollLock","anchorOrigin","vertical","horizontal","transformOrigin","paper","onClose","List","map","chips","flexWrap","chip","QueueSelect","selectedQueueIds","onChange","setQueues","FormControl","fullWidth","InputLabel","Select","multiple","labelWidth","MenuProps","getContentAnchorEl","renderValue","find","q","Chip","label","MenuItem","root","multFieldLine","btnWrapper","formControl","minWidth","UserSchema","Yup","shape","min","max","required","UserModal","initialState","loggedInUser","setSelectedQueueIds","showPassword","setShowPassword","setWhatsappId","userQueueIds","fetchUser","handleClose","handleSaveUser","values","Dialog","scroll","DialogTitle","initialValues","enableReinitialize","validationSchema","onSubmit","setSubmitting","touched","errors","isSubmitting","DialogContent","dividers","as","TextField","autoFocus","Boolean","helperText","InputProps","endAdornment","InputAdornment","VisibilityOff","Visibility","labelId","DialogActions","backdrop","zIndex","drawer","BackdropLoading","Backdrop","toolbar","toolbarIcon","minHeight","transition","transitions","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","menuButtonHidden","flexGrow","drawerPaper","whiteSpace","drawerPaperClose","overflowX","up","appBarSpacer","overflow","container","paddingTop","paddingBottom","LoggedInLayout","userModalOpen","setUserModalOpen","setAnchorEl","menuOpen","setMenuOpen","drawerOpen","setDrawerOpen","drawerVariant","setDrawerVariant","offsetWidth","handleCloseMenu","Drawer","AppBar","Toolbar","edge","aria-controls","aria-haspopup","event","currentTarget","Menu","Title","gutterBottom","Chart","useTheme","toISOString","time","amount","chartData","setChartData","aux","startOfHour","createdAt","ResponsiveContainer","BarChart","barSize","CartesianGrid","strokeDasharray","XAxis","dataKey","stroke","palette","text","YAxis","allowDecimals","Label","angle","textAnchor","fill","Bar","main","fixedHeightPaper","customFixedHeightPaper","customFixedHeightPaperLg","Dashboard","GetTickets","Container","Grid","item","xs","Paper","paragraph","textField","extraAttr","ContactSchema","ContactModal","contactId","onSave","setContact","fetchContact","handleSaveContact","marginBottom","remove","info","index","createFilterOptions","trim","NewTicketModal","modalOpen","setOptions","setSearchParam","selectedContact","setSelectedContact","newContact","setNewContact","contactModalOpen","setContactModalOpen","fetchContacts","handleSaveTicket","Autocomplete","clearOnBlur","autoHighlight","freeSolo","clearOnEscape","getOptionLabel","option","renderOption","filterOptions","filtered","inputValue","newValue","handleSelectOption","renderInput","onKeyPress","TicketsSkeleton","Skeleton","animation","ticketsListWrapper","borderTopRightRadius","borderBottomRightRadius","borderTop","ticketsListHeader","borderBottom","ticketsCount","unshift","TicketsList","updateCount","setPageNumber","shouldUpdateTicket","queueId","indexOf","square","elevation","onScroll","scrollTop","scrollHeight","clientHeight","TicketsListSkeleton","TabPanel","aria-labelledby","TicketsQueueSelect","userQueues","displayEmpty","Checkbox","checked","ticketsWrapper","tabsHeader","settingsIcon","tab","ticketOptionsBox","serachInputWrapper","searchIcon","searchInput","show","hide","TicketsManager","searchTimeout","setTab","tabOpen","setTabOpen","newTicketModalOpen","setNewTicketModalOpen","showAllTickets","setShowAllTickets","searchInputRef","openCount","setOpenCount","pendingCount","setPendingCount","toUpperCase","applyPanelStyle","Tabs","indicatorColor","textColor","Tab","InputBase","inputRef","searchedTerm","toLowerCase","FormControlLabel","labelPlacement","control","Switch","val","ContactDrawerSkeleton","contactHeader","contactAvatar","contactDetails","contactExtraInfo","flexShrink","borderRight","ContactDrawer","handleDrawerClose","setModalOpen","anchor","PaperProps","BackdropProps","ModalProps","getElementById","alt","Link","href","timerBox","RecordingTimer","minutes","seconds","timer","setTimer","interval","setInterval","clearInterval","addZero","ReplyMessageContext","ReplyMessageProvider","replyingMessage","setReplyingMessage","Mp3Recorder","MicRecorder","bitRate","mainWrapper","newMessageBox","messageInputWrapper","messageInput","sendMessageIcons","uploadInput","viewMediaInputWrapper","emojiBox","circleLoading","opacity","audioLoading","recorderWrapper","alignContent","cancelAudioIcon","sendAudioIcon","replyginMsgWrapper","replyginMsgContainer","replyginMsgBody","replyginContactMsgSideColor","replyginSelfMsgSideColor","messageContactName","messageQuickAnswersWrapper","listStyle","textOverflow","MessageInput","ticketStatus","medias","setMedias","inputMessage","setInputMessage","showEmoji","setShowEmoji","recording","setRecording","setQuickAnswer","typeBar","setTypeBar","initialValue","storedValue","setStoredValue","valueToStore","Function","useLocalStorage","setSignMessage","handleChangeMedias","files","selectedMedias","Array","from","handleUploadMedia","formData","FormData","append","media","handleSendMessage","fromMe","mediaUrl","quotedMsg","handleStartRecording","navigator","mediaDevices","getUserMedia","audio","start","handleLoadQuickAnswer","substring","handleUploadAudio","stop","getMp3","blob","filename","getTime","handleCancelAudio","handleMenuItemClick","renderReplyingMessage","Hidden","only","ClickAwayListener","onClickAway","perLine","showPreview","showSkinTones","onSelect","emoji","native","htmlFor","keepMounted","input","multiline","maxRows","onPaste","clipboardData","handleInputPaste","shiftKey","messageQuickAnswersWrapperItem","handleQuickAnswersClick","ticketHeader","TicketHeaderSkeleton","Card","CardHeader","titleTypographyProps","subheaderTypographyProps","avatar","subheader","TicketHeader","TicketInfo","ConfirmationModal","onConfirm","useQueues","findAll","TransferTicketModal","ticketid","ticketWhatsappId","allQueues","setAllQueues","selectedUser","setSelectedUser","selectedQueue","setSelectedQueue","selectedWhatsapp","setSelectedWhatsapp","findAllQueues","loadingWhatsapps","list","loadQueues","fetchUsers","isArray","noOptionsText","whasapp","TicketOptionsMenu","confirmationOpen","setConfirmationOpen","transferTicketModalOpen","setTransferTicketModalOpen","handleDeleteTicket","handleOpenConfirmationModal","actionButtons","TicketActionButtons","ticketOptionsMenuOpen","handleUpdateTicketStatus","startIcon","Replay","VcardPreview","numbers","contactObj","handleNewChat","LocationPreview","image","link","description","handleLocation","float","dangerouslySetInnerHTML","__html","clear","messageMedia","objectFit","borderTopLeftRadius","borderBottomLeftRadius","ModalImageCors","imageUrl","fetching","setFetching","blobUrl","setBlobUrl","responseType","url","URL","createObjectURL","Blob","fetchImage","smallSrcSet","medium","large","MessageOptionsMenu","handleDeleteMessage","audioRef","parseFloat","audioRate","setAudioRate","showButtonRate","setShowButtonRate","playbackRate","onplaying","onpause","onended","controls","newRate","messagesListWrapper","backgroundImage","whatsBackground","messageLeft","quotedContainerLeft","quotedSideColorLeft","messageRight","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","textContentItem","overflowWrap","textContentItemDeleted","fontStyle","timestamp","dailyTimestamp","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","newMessages","messageIndex","m","newMessage","messageToUpdate","MessagesList","lastMessageRef","selectedMessage","setSelectedMessage","messageOptionsMenuOpen","currentTicketId","scrollToBottom","fetchMessages","scrollIntoView","handleOpenMessageOptionsMenu","checkMessageMedia","mediaType","locationParts","imageLocation","linkLocation","descriptionLocation","array","obj","ind","Audio","GetApp","renderDailyTimestamps","messageDay","previousMessageDay","renderMessageDivider","renderQuotedMessage","prevPageNumber","isDeleted","ExpandMore","Block","ack","AccessTime","Done","DoneAll","renderMessageAck","ticketInfo","flexBasis","ticketActionButtons","borderLeft","mainWrapperShift","easeOut","Ticket","setTicket","fetchTicket","chatContainer","chatPapper","contactsWrapper","contactsWrapperSmall","messagessWrapper","welcomeMsg","ticketsManagerClosed","Chat","md","SignUp","handleSignUp","CssBaseline","LockOutlined","autoComplete","RouterLink","Box","mt","Login","handleChangeInput","noValidate","mainContainer","contentWrapper","MainContainer","contactsHeader","MainHeader","MainHeaderButtonsWrapper","customTableCell","TableRowSkeleton","columns","TableRow","TableCell","_","align","SessionSchema","memo","isDefault","setWhatsApp","whatsQueueIds","handleSaveWhatsApp","whatsappData","rows","selectedIds","setQrCode","mainPaper","tooltip","typography","pxToRem","tooltipPopper","CustomToolTip","popper","Connections","whatsAppModalOpen","setWhatsAppModalOpen","qrModalOpen","setQrModalOpen","selectedWhatsApp","setSelectedWhatsApp","confirmModalOpen","setConfirmModalOpen","confirmationModalInitialState","confirmModalInfo","setConfirmModalInfo","handleStartWhatsAppSession","handleRequestNewQrCode","handleCloseWhatsAppModal","useCallback","handleCloseQrModal","handleSubmitConfirmationModal","renderActionButtons","handleOpenQrModal","Table","TableHead","TableBody","SignalCellularConnectedNoInternet0Bar","CropFree","SignalCellular4Bar","SignalCellularConnectedNoInternet2Bar","renderStatusToolTips","CheckCircle","handleEditWhatsApp","Edit","settingOption","Settings","setSettings","settingIndex","setting","handleChangeSetting","selectedValue","settingKey","getSettingValue","readonly","newUsers","userIndex","u","Users","deletingUser","setDeletingUser","handleDeleteUser","startAdornment","handleEditUser","newContacts","contactIndex","c","Contacts","selectedContactId","setSelectedContactId","deletingContact","setDeletingContact","confirmOpen","setConfirmOpen","handleDeleteContact","handleimportContact","go","textQuickAnswerContainer","QuickAnswerSchema","QuickAnswersModal","quickAnswerId","quickAnswer","fetchQuickAnswer","handleSaveQuickAnswer","newQuickAnswers","quickAnswerIndex","QuickAnswers","selectedQuickAnswers","setSelectedQuickAnswers","quickAnswersModalOpen","setQuickAnswersModalOpen","deletingQuickAnswers","setDeletingQuickAnswers","fetchQuickAnswers","handleDeleteQuickAnswers","handleEditQuickAnswers","ColorPicker","currentColor","selectedColor","setSelectedColor","paperFullWidth","triangle","colors","hex","onChangeComplete","colorAdorment","QueueSchema","QueueModal","colorPickerModalOpen","setColorPickerModalOpen","setQueue","greetingRef","handleSaveQueue","onFocus","Colorize","newQueues","queueIndex","Queues","queueModalOpen","setQueueModalOpen","handleDeleteQueue","handleEditQueue","Route","Component","isPrivate","Routes","exact","path","Signup","Tickets","autoClose","App","locale","setLocale","createTheme","i18nlocale","ptBR","ThemeProvider","ReactDOM","render"],"mappings":"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KACA,QACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,OACA,MACA,OACA,UACA,OACA,WACA,OACA,QACA,MACA,WACA,SACA,KACA,WACA,SACA,SACA,IACA,QACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,MAGA,SACA,WACA,OACA,UACA,gBACA,IACA,QACA,OACA,iBACA,SACA,OACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,MACA,OACA,SAGKC,GAAkB,CAAC,IAAK,IAAK,SAAU,KAAM,IAAK,OAAQ,OAE1DC,GAAa,SAAH,OAAMtG,EAAQ,EAARA,SAAakD,EAAK,0BACvC,uCAAOA,EAAK,CAAEqD,OAAO,SAASC,IAAI,wBAChCxG,IA6CYyG,GAzCS,SAAH,GAAsB,IAAhBzG,EAAQ,EAARA,SACpB0G,EAAY,aACZC,EAAa,WAEhB3G,GAAYA,EAAS4C,SAAS,iBAEhC5C,EAAW,MAETA,GAAYA,EAAS4C,SAAS,iBAChC5C,EAAW,MAERA,GAAY0G,EAAUE,KAAK5G,KAC9BA,EAAWA,EAAS6G,QAAQH,EAAW,WAEpC1G,GAAY2G,EAAWC,KAAK5G,KAC/BA,EAAWA,EAAS6G,QAAQF,EAAY,WAGzC,IAAM3N,EAAUwK,IAAMC,SAAQ,WAC7B,IAAMqD,EAAkB,CACvBC,uBAAuB,EACvBC,aAAa,EACbC,UAAW,CACVC,EAAG,CAAEnD,UAAWuC,MAUlB,OANAF,GAASe,SAAQ,SAAAC,GACXf,GAAgBzD,SAASwE,KAC7BN,EAAgBG,UAAUG,GAAW,SAAAC,GAAE,OAAIA,EAAGrH,UAAY,UAIrD8G,IACL,IAEH,OAAK9G,EAEE,kBAAC,KAAQ,CAAChH,QAASA,GAAUgH,GAF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","file":"static/js/main.cf2387c5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sound.9fd5812c.mp3\";","module.exports = __webpack_public_path__ + \"static/media/wa-background.adbccee0.png\";","import { messages as portugueseMessages } from \"./pt\";\r\nimport { messages as englishMessages } from \"./en\";\r\nimport { messages as spanishMessages } from \"./es\";\r\n\r\nconst messages = {\r\n\t...portugueseMessages,\r\n\t...englishMessages,\r\n\t...spanishMessages,\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n  pt: {\r\n    translations: {\r\n      signup: {\r\n        title: \"Cadastre-se\",\r\n        toasts: {\r\n          success: \"Usuário criado com sucesso! Faça seu login!!!.\",\r\n          fail: \"Erro ao criar usuário. Verifique os dados informados.\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n        },\r\n        buttons: {\r\n          submit: \"Cadastrar\",\r\n          login: \"Já tem uma conta? Entre!\",\r\n        },\r\n      },\r\n      login: {\r\n        title: \"Login\",\r\n        form: {\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n        },\r\n        buttons: {\r\n          submit: \"Entrar\",\r\n          register: \"Não tem um conta? Cadastre-se!\",\r\n        },\r\n      },\r\n      auth: {\r\n        toasts: {\r\n          success: \"Login efetuado com sucesso!\",\r\n        },\r\n      },\r\n      dashboard: {\r\n        charts: {\r\n          perDay: {\r\n            title: \"Tickets hoje: \",\r\n          },\r\n        },\r\n        messages: {\r\n          inAttendance: {\r\n            title: \"Em Atendimento\"\r\n          },\r\n          waiting: {\r\n            title: \"Aguardando\"\r\n          },\r\n          closed: {\r\n            title: \"Finalizado\"\r\n          }\r\n        }\r\n      },\r\n      connections: {\r\n        title: \"Conexões\",\r\n        toasts: {\r\n          deleted: \"Conexão com o WhatsApp excluída com sucesso!\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar\",\r\n          deleteMessage: \"Você tem certeza? Essa ação não pode ser revertida.\",\r\n          disconnectTitle: \"Desconectar\",\r\n          disconnectMessage:\r\n            \"Tem certeza? Você precisará ler o QR Code novamente.\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar WhatsApp\",\r\n          disconnect: \"desconectar\",\r\n          tryAgain: \"Tentar novamente\",\r\n          qrcode: \"QR CODE\",\r\n          newQr: \"Novo QR CODE\",\r\n          connecting: \"Conectando\",\r\n        },\r\n        toolTips: {\r\n          disconnected: {\r\n            title: \"Falha ao iniciar sessão do WhatsApp\",\r\n            content:\r\n              \"Certifique-se de que seu celular esteja conectado à internet e tente novamente, ou solicite um novo QR Code\",\r\n          },\r\n          qrcode: {\r\n            title: \"Esperando leitura do QR Code\",\r\n            content:\r\n              \"Clique no botão 'QR CODE' e leia o QR Code com o seu celular para iniciar a sessão\",\r\n          },\r\n          connected: {\r\n            title: \"Conexão estabelecida!\",\r\n          },\r\n          timeout: {\r\n            title: \"A conexão com o celular foi perdida\",\r\n            content:\r\n              \"Certifique-se de que seu celular esteja conectado à internet e o WhatsApp esteja aberto, ou clique no botão 'Desconectar' para obter um novo QR Code\",\r\n          },\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          status: \"Status\",\r\n          lastUpdate: \"Última atualização\",\r\n          default: \"Padrão\",\r\n          actions: \"Ações\",\r\n          session: \"Sessão\",\r\n        },\r\n      },\r\n      whatsappModal: {\r\n        title: {\r\n          add: \"Adicionar WhatsApp\",\r\n          edit: \"Editar WhatsApp\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          default: \"Padrão\",\r\n          farewellMessage: \"Mensagem de despedida\"\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"WhatsApp salvo com sucesso.\",\r\n      },\r\n      qrCode: {\r\n        message: \"Leia o QrCode para iniciar a sessão\",\r\n      },\r\n      contacts: {\r\n        title: \"Contatos\",\r\n        toasts: {\r\n          deleted: \"Contato excluído com sucesso!\",\r\n        },\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar \",\r\n          importTitlte: \"Importar contatos\",\r\n          deleteMessage:\r\n            \"Tem certeza que deseja deletar este contato? Todos os tickets relacionados serão perdidos.\",\r\n          importMessage: \"Deseja importas todos os contatos do telefone?\",\r\n        },\r\n        buttons: {\r\n          import: \"Importar Contatos\",\r\n          add: \"Adicionar Contato\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          whatsapp: \"WhatsApp\",\r\n          email: \"Email\",\r\n          actions: \"Ações\",\r\n        },\r\n      },\r\n      contactModal: {\r\n        title: {\r\n          add: \"Adicionar contato\",\r\n          edit: \"Editar contato\",\r\n        },\r\n        form: {\r\n          mainInfo: \"Dados do contato\",\r\n          extraInfo: \"Informações adicionais\",\r\n          name: \"Nome\",\r\n          number: \"Número do Whatsapp\",\r\n          email: \"Email\",\r\n          extraName: \"Nome do campo\",\r\n          extraValue: \"Valor\",\r\n        },\r\n        buttons: {\r\n          addExtraInfo: \"Adicionar informação\",\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Contato salvo com sucesso.\",\r\n      },\r\n      quickAnswersModal: {\r\n        title: {\r\n          add: \"Adicionar Resposta Rápida\",\r\n          edit: \"Editar Resposta Rápida\",\r\n        },\r\n        form: {\r\n          shortcut: \"Atalho\",\r\n          message: \"Resposta Rápida\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Resposta Rápida salva com sucesso.\",\r\n      },\r\n      queueModal: {\r\n        title: {\r\n          add: \"Adicionar fila\",\r\n          edit: \"Editar fila\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          greetingMessage: \"Mensagem de saudação\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      userModal: {\r\n        title: {\r\n          add: \"Adicionar usuário\",\r\n          edit: \"Editar usuário\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n          profile: \"Perfil\",\r\n          whatsapp: \"Conexão Padrão\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Usuário salvo com sucesso.\",\r\n      },\r\n      chat: {\r\n        noTicketMessage: \"Selecione um ticket para começar a conversar.\",\r\n      },\r\n      ticketsManager: {\r\n        buttons: {\r\n          newTicket: \"Novo\",\r\n        },\r\n      },\r\n      ticketsQueueSelect: {\r\n        placeholder: \"Filas\",\r\n      },\r\n      tickets: {\r\n        toasts: {\r\n          deleted: \"O ticket que você estava foi deletado.\",\r\n        },\r\n        notification: {\r\n          message: \"Mensagem de\",\r\n        },\r\n        tabs: {\r\n          open: { title: \"Inbox\" },\r\n          closed: { title: \"Resolvidos\" },\r\n          search: { title: \"Busca\" },\r\n        },\r\n        search: {\r\n          placeholder: \"Buscar tickets e mensagens\",\r\n        },\r\n        buttons: {\r\n          showAll: \"Todos\",\r\n        },\r\n      },\r\n      transferTicketModal: {\r\n        title: \"Transferir Ticket\",\r\n        fieldLabel: \"Digite para buscar usuários\",\r\n        fieldQueueLabel: \"Transferir para fila\",\r\n        fieldConnectionLabel: \"Transferir para conexão\",\r\n        fieldQueuePlaceholder: \"Selecione uma fila\",\r\n        fieldConnectionPlaceholder: \"Selecione uma conexão\",\r\n        noOptions: \"Nenhum usuário encontrado com esse nome\",\r\n        buttons: {\r\n          ok: \"Transferir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      ticketsList: {\r\n        pendingHeader: \"Aguardando\",\r\n        assignedHeader: \"Atendendo\",\r\n        noTicketsTitle: \"Nada aqui!\",\r\n        noTicketsMessage:\r\n          \"Nenhum ticket encontrado com esse status ou termo pesquisado\",\r\n        connectionTitle: \"Conexão que está sendo utilizada atualmente.\",\r\n        buttons: {\r\n          accept: \"Aceitar\",\r\n        },\r\n      },\r\n      newTicketModal: {\r\n        title: \"Criar Ticket\",\r\n        fieldLabel: \"Digite para pesquisar o contato\",\r\n        add: \"Adicionar\",\r\n        buttons: {\r\n          ok: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      mainDrawer: {\r\n        listItems: {\r\n          dashboard: \"Dashboard\",\r\n          connections: \"Conexões\",\r\n          tickets: \"Tickets\",\r\n          contacts: \"Contatos\",\r\n          quickAnswers: \"Respostas Rápidas\",\r\n          queues: \"Filas\",\r\n          administration: \"Administração\",\r\n          users: \"Usuários\",\r\n          settings: \"Configurações\",\r\n        },\r\n        appBar: {\r\n          user: {\r\n            profile: \"Perfil\",\r\n            logout: \"Sair\",\r\n          },\r\n        },\r\n      },\r\n      notifications: {\r\n        noTickets: \"Nenhuma notificação.\",\r\n      },\r\n      queues: {\r\n        title: \"Filas\",\r\n        table: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          greeting: \"Mensagem de saudação\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar fila\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Você tem certeza? Essa ação não pode ser revertida! Os tickets dessa fila continuarão existindo, mas não terão mais nenhuma fila atribuída.\",\r\n        },\r\n      },\r\n      queueSelect: {\r\n        inputLabel: \"Filas\",\r\n      },\r\n      quickAnswers: {\r\n        title: \"Respostas Rápidas\",\r\n        table: {\r\n          shortcut: \"Atalho\",\r\n          message: \"Resposta Rápida\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar Resposta Rápida\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Resposta Rápida excluída com sucesso.\",\r\n        },\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        confirmationModal: {\r\n          deleteTitle:\r\n            \"Você tem certeza que quer excluir esta Resposta Rápida: \",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n      },\r\n      users: {\r\n        title: \"Usuários\",\r\n        table: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          profile: \"Perfil\",\r\n          whatsapp: \"Conexão Padrão\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar usuário\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Usuário excluído com sucesso.\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Todos os dados do usuário serão perdidos. Os tickets abertos deste usuário serão movidos para a fila.\",\r\n        },\r\n      },\r\n      settings: {\r\n        success: \"Configurações salvas com sucesso.\",\r\n        title: \"Configurações\",\r\n        settings: {\r\n          userCreation: {\r\n            name: \"Criação de usuário\",\r\n            options: {\r\n              enabled: \"Ativado\",\r\n              disabled: \"Desativado\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n      messagesList: {\r\n        header: {\r\n          assignedTo: \"Atribuído à:\",\r\n          buttons: {\r\n            return: \"Retornar\",\r\n            resolve: \"Resolver\",\r\n            reopen: \"Reabrir\",\r\n            accept: \"Aceitar\",\r\n          },\r\n        },\r\n      },\r\n      messagesInput: {\r\n        placeholderOpen: \"Digite uma mensagem ou tecle ''/'' para utilizar as respostas rápidas cadastrada\",\r\n        placeholderClosed:\r\n          \"Reabra ou aceite esse ticket para enviar uma mensagem.\",\r\n        signMessage: \"Assinar\",\r\n      },\r\n      contactDrawer: {\r\n        header: \"Dados do contato\",\r\n        buttons: {\r\n          edit: \"Editar contato\",\r\n        },\r\n        extraInfo: \"Outras informações\",\r\n      },\r\n      ticketOptionsMenu: {\r\n        delete: \"Deletar\",\r\n        transfer: \"Transferir\",\r\n        confirmationModal: {\r\n          title: \"Deletar o ticket do contato\",\r\n          message:\r\n            \"Atenção! Todas as mensagens relacionadas ao ticket serão perdidas.\",\r\n        },\r\n        buttons: {\r\n          delete: \"Excluir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      confirmationModal: {\r\n        buttons: {\r\n          confirm: \"Ok\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      messageOptionsMenu: {\r\n        delete: \"Deletar\",\r\n        reply: \"Responder\",\r\n        confirmationModal: {\r\n          title: \"Apagar mensagem?\",\r\n          message: \"Esta ação não pode ser revertida.\",\r\n        },\r\n      },\r\n      backendErrors: {\r\n        ERR_NO_OTHER_WHATSAPP: \"Deve haver pelo menos um WhatsApp padrão.\",\r\n        ERR_NO_DEF_WAPP_FOUND:\r\n          \"Nenhum WhatsApp padrão encontrado. Verifique a página de conexões.\",\r\n        ERR_WAPP_NOT_INITIALIZED:\r\n          \"Esta sessão do WhatsApp não foi inicializada. Verifique a página de conexões.\",\r\n        ERR_WAPP_CHECK_CONTACT:\r\n          \"Não foi possível verificar o contato do WhatsApp. Verifique a página de conexões\",\r\n        ERR_WAPP_INVALID_CONTACT: \"Este não é um número de Whatsapp válido.\",\r\n        ERR_WAPP_DOWNLOAD_MEDIA:\r\n          \"Não foi possível baixar mídia do WhatsApp. Verifique a página de conexões.\",\r\n        ERR_INVALID_CREDENTIALS:\r\n          \"Erro de autenticação. Por favor, tente novamente.\",\r\n        ERR_SENDING_WAPP_MSG:\r\n          \"Erro ao enviar mensagem do WhatsApp. Verifique a página de conexões.\",\r\n        ERR_DELETE_WAPP_MSG: \"Não foi possível excluir a mensagem do WhatsApp.\",\r\n        ERR_OTHER_OPEN_TICKET: \"Já existe um tíquete aberto para este contato.\",\r\n        ERR_SESSION_EXPIRED: \"Sessão expirada. Por favor entre.\",\r\n        ERR_USER_CREATION_DISABLED:\r\n          \"A criação do usuário foi desabilitada pelo administrador.\",\r\n        ERR_NO_PERMISSION: \"Você não tem permissão para acessar este recurso.\",\r\n        ERR_DUPLICATED_CONTACT: \"Já existe um contato com este número.\",\r\n        ERR_NO_SETTING_FOUND: \"Nenhuma configuração encontrada com este ID.\",\r\n        ERR_NO_CONTACT_FOUND: \"Nenhum contato encontrado com este ID.\",\r\n        ERR_NO_TICKET_FOUND: \"Nenhum tíquete encontrado com este ID.\",\r\n        ERR_NO_USER_FOUND: \"Nenhum usuário encontrado com este ID.\",\r\n        ERR_NO_WAPP_FOUND: \"Nenhum WhatsApp encontrado com este ID.\",\r\n        ERR_CREATING_MESSAGE: \"Erro ao criar mensagem no banco de dados.\",\r\n        ERR_CREATING_TICKET: \"Erro ao criar tíquete no banco de dados.\",\r\n        ERR_FETCH_WAPP_MSG:\r\n          \"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.\",\r\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n          \"Esta cor já está em uso, escolha outra.\",\r\n        ERR_WAPP_GREETING_REQUIRED:\r\n          \"A mensagem de saudação é obrigatório quando há mais de uma fila.\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n  en: {\r\n    translations: {\r\n      signup: {\r\n        title: \"Sign up\",\r\n        toasts: {\r\n          success: \"User created successfully! Please login!\",\r\n          fail: \"Error creating user. Check the reported data.\",\r\n        },\r\n        form: {\r\n          name: \"Name\",\r\n          email: \"Email\",\r\n          password: \"Password\",\r\n        },\r\n        buttons: {\r\n          submit: \"Register\",\r\n          login: \"Already have an account? Log in!\",\r\n        },\r\n      },\r\n      login: {\r\n        title: \"Login\",\r\n        form: {\r\n          email: \"Email\",\r\n          password: \"Password\",\r\n        },\r\n        buttons: {\r\n          submit: \"Enter\",\r\n          register: \"Don't have an account? Register!\",\r\n        },\r\n      },\r\n      auth: {\r\n        toasts: {\r\n          success: \"Login successfully!\",\r\n        },\r\n      },\r\n      dashboard: {\r\n        charts: {\r\n          perDay: {\r\n            title: \"Tickets today: \",\r\n          },\r\n        },\r\n        messages: {\r\n          inAttendance: {\r\n            title: \"In Service\"\r\n          },\r\n          waiting: {\r\n            title: \"Waiting\"\r\n          },\r\n          closed: {\r\n            title: \"Closed\"\r\n          }\r\n        }\r\n      },\r\n      connections: {\r\n        title: \"Connections\",\r\n        toasts: {\r\n          deleted: \"WhatsApp connection deleted sucessfully!\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Delete\",\r\n          deleteMessage: \"Are you sure? It cannot be reverted.\",\r\n          disconnectTitle: \"Disconnect\",\r\n          disconnectMessage: \"Are you sure? You'll need to read QR Code again.\",\r\n        },\r\n        buttons: {\r\n          add: \"Add WhatsApp\",\r\n          disconnect: \"Disconnect\",\r\n          tryAgain: \"Try Again\",\r\n          qrcode: \"QR CODE\",\r\n          newQr: \"New QR CODE\",\r\n          connecting: \"Connectiing\",\r\n        },\r\n        toolTips: {\r\n          disconnected: {\r\n            title: \"Failed to start WhatsApp session\",\r\n            content:\r\n              \"Make sure your cell phone is connected to the internet and try again, or request a new QR Code\",\r\n          },\r\n          qrcode: {\r\n            title: \"Waiting for QR Code read\",\r\n            content:\r\n              \"Click on 'QR CODE' button and read the QR Code with your cell phone to start session\",\r\n          },\r\n          connected: {\r\n            title: \"Connection established\",\r\n          },\r\n          timeout: {\r\n            title: \"Connection with cell phone has been lost\",\r\n            content:\r\n              \"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode\",\r\n          },\r\n        },\r\n        table: {\r\n          name: \"Name\",\r\n          status: \"Status\",\r\n          lastUpdate: \"Last Update\",\r\n          default: \"Default\",\r\n          actions: \"Actions\",\r\n          session: \"Session\",\r\n        },\r\n      },\r\n      whatsappModal: {\r\n        title: {\r\n          add: \"Add WhatsApp\",\r\n          edit: \"Edit WhatsApp\",\r\n        },\r\n        form: {\r\n          name: \"Name\",\r\n          default: \"Default\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Add\",\r\n          okEdit: \"Save\",\r\n          cancel: \"Cancel\",\r\n        },\r\n        success: \"WhatsApp saved successfully.\",\r\n      },\r\n      qrCode: {\r\n        message: \"Read QrCode to start the session\",\r\n      },\r\n      contacts: {\r\n        title: \"Contacts\",\r\n        toasts: {\r\n          deleted: \"Contact deleted sucessfully!\",\r\n        },\r\n        searchPlaceholder: \"Search ...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Delete\",\r\n          importTitlte: \"Import contacts\",\r\n          deleteMessage:\r\n            \"Are you sure you want to delete this contact? All related tickets will be lost.\",\r\n          importMessage: \"Do you want to import all contacts from the phone?\",\r\n        },\r\n        buttons: {\r\n          import: \"Import Contacts\",\r\n          add: \"Add Contact\",\r\n        },\r\n        table: {\r\n          name: \"Name\",\r\n          whatsapp: \"WhatsApp\",\r\n          email: \"Email\",\r\n          actions: \"Actions\",\r\n        },\r\n      },\r\n      contactModal: {\r\n        title: {\r\n          add: \"Add contact\",\r\n          edit: \"Edit contact\",\r\n        },\r\n        form: {\r\n          mainInfo: \"Contact details\",\r\n          extraInfo: \"Additional information\",\r\n          name: \"Name\",\r\n          number: \"Whatsapp number\",\r\n          email: \"Email\",\r\n          extraName: \"Field name\",\r\n          extraValue: \"Value\",\r\n        },\r\n        buttons: {\r\n          addExtraInfo: \"Add information\",\r\n          okAdd: \"Add\",\r\n          okEdit: \"Save\",\r\n          cancel: \"Cancel\",\r\n        },\r\n        success: \"Contact saved successfully.\",\r\n      },\r\n      quickAnswersModal: {\r\n        title: {\r\n          add: \"Add Quick Reply\",\r\n          edit: \"Edit Quick Answer\",\r\n        },\r\n        form: {\r\n          shortcut: \"Shortcut\",\r\n          message: \"Quick Reply\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Add\",\r\n          okEdit: \"Save\",\r\n          cancel: \"Cancel\",\r\n        },\r\n        success: \"Quick Reply saved successfully.\",\r\n      },\r\n      queueModal: {\r\n        title: {\r\n          add: \"Add queue\",\r\n          edit: \"Edit queue\",\r\n        },\r\n        form: {\r\n          name: \"Name\",\r\n          color: \"Color\",\r\n          greetingMessage: \"Greeting Message\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Add\",\r\n          okEdit: \"Save\",\r\n          cancel: \"Cancel\",\r\n        },\r\n      },\r\n      userModal: {\r\n        title: {\r\n          add: \"Add user\",\r\n          edit: \"Edit user\",\r\n        },\r\n        form: {\r\n          name: \"Name\",\r\n          email: \"Email\",\r\n          password: \"Password\",\r\n          profile: \"Profile\",\r\n          whatsapp: \"Default Connection\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Add\",\r\n          okEdit: \"Save\",\r\n          cancel: \"Cancel\",\r\n        },\r\n        success: \"User saved successfully.\",\r\n      },\r\n      chat: {\r\n        noTicketMessage: \"Select a ticket to start chatting.\",\r\n      },\r\n      ticketsManager: {\r\n        buttons: {\r\n          newTicket: \"New\",\r\n        },\r\n      },\r\n      ticketsQueueSelect: {\r\n        placeholder: \"Queues\",\r\n      },\r\n      tickets: {\r\n        toasts: {\r\n          deleted: \"The ticket you were on has been deleted.\",\r\n        },\r\n        notification: {\r\n          message: \"Message from\",\r\n        },\r\n        tabs: {\r\n          open: { title: \"Inbox\" },\r\n          closed: { title: \"Resolved\" },\r\n          search: { title: \"Search\" },\r\n        },\r\n        search: {\r\n          placeholder: \"Search tickets and messages.\",\r\n        },\r\n        buttons: {\r\n          showAll: \"All\",\r\n        },\r\n      },\r\n      transferTicketModal: {\r\n        title: \"Transfer Ticket\",\r\n        fieldLabel: \"Type to search for users\",\r\n        fieldQueueLabel: \"Transfer to queue\",\r\n        fieldConnectionLabel: \"Transfer to connection\",\r\n        fieldQueuePlaceholder: \"Please select a queue\",\r\n        fieldConnectionPlaceholder: \"Please select a connection\",\r\n        noOptions: \"No user found with this name\",\r\n        buttons: {\r\n          ok: \"Transfer\",\r\n          cancel: \"Cancel\",\r\n        },\r\n      },\r\n      ticketsList: {\r\n        pendingHeader: \"Queue\",\r\n        assignedHeader: \"Working on\",\r\n        noTicketsTitle: \"Nothing here!\",\r\n        noTicketsMessage: \"No tickets found with this status or search term.\",\r\n        connectionTitle: \"Connection that is currently being used.\",\r\n        buttons: {\r\n          accept: \"Accept\",\r\n        },\r\n      },\r\n      newTicketModal: {\r\n        title: \"Create Ticket\",\r\n        fieldLabel: \"Type to search for a contact\",\r\n        add: \"Add\",\r\n        buttons: {\r\n          ok: \"Save\",\r\n          cancel: \"Cancel\",\r\n        },\r\n      },\r\n      mainDrawer: {\r\n        listItems: {\r\n          dashboard: \"Dashboard\",\r\n          connections: \"Connections\",\r\n          tickets: \"Tickets\",\r\n          contacts: \"Contacts\",\r\n          quickAnswers: \"Quick Answers\",\r\n          queues: \"Queues\",\r\n          administration: \"Administration\",\r\n          users: \"Users\",\r\n          settings: \"Settings\",\r\n        },\r\n        appBar: {\r\n          user: {\r\n            profile: \"Profile\",\r\n            logout: \"Logout\",\r\n          },\r\n        },\r\n      },\r\n      notifications: {\r\n        noTickets: \"No notifications.\",\r\n      },\r\n      queues: {\r\n        title: \"Queues\",\r\n        table: {\r\n          name: \"Name\",\r\n          color: \"Color\",\r\n          greeting: \"Greeting message\",\r\n          actions: \"Actions\",\r\n        },\r\n        buttons: {\r\n          add: \"Add queue\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Delete\",\r\n          deleteMessage:\r\n            \"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned.\",\r\n        },\r\n      },\r\n      queueSelect: {\r\n        inputLabel: \"Queues\",\r\n      },\r\n      quickAnswers: {\r\n        title: \"Quick Answers\",\r\n        table: {\r\n          shortcut: \"Shortcut\",\r\n          message: \"Quick Reply\",\r\n          actions: \"Actions\",\r\n        },\r\n        buttons: {\r\n          add: \"Add Quick Reply\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Quick Reply deleted successfully.\",\r\n        },\r\n        searchPlaceholder: \"Search...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Are you sure you want to delete this Quick Reply: \",\r\n          deleteMessage: \"This action cannot be undone.\",\r\n        },\r\n      },\r\n      users: {\r\n        title: \"Users\",\r\n        table: {\r\n          name: \"Name\",\r\n          email: \"Email\",\r\n          profile: \"Profile\",\r\n          whatsapp: \"Default Connection\",\r\n          actions: \"Actions\",\r\n        },\r\n        buttons: {\r\n          add: \"Add user\",\r\n        },\r\n        toasts: {\r\n          deleted: \"User deleted sucessfully.\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Delete\",\r\n          deleteMessage:\r\n            \"All user data will be lost. Users' open tickets will be moved to queue.\",\r\n        },\r\n      },\r\n      settings: {\r\n        success: \"Settings saved successfully.\",\r\n        title: \"Settings\",\r\n        settings: {\r\n          userCreation: {\r\n            name: \"User creation\",\r\n            options: {\r\n              enabled: \"Enabled\",\r\n              disabled: \"Disabled\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n      messagesList: {\r\n        header: {\r\n          assignedTo: \"Assigned to:\",\r\n          buttons: {\r\n            return: \"Return\",\r\n            resolve: \"Resolve\",\r\n            reopen: \"Reopen\",\r\n            accept: \"Accept\",\r\n          },\r\n        },\r\n      },\r\n      messagesInput: {\r\n        placeholderOpen: \"Type a message or press ''/'' to use the registered quick responses\",\r\n        placeholderClosed: \"Reopen or accept this ticket to send a message.\",\r\n        signMessage: \"Sign\",\r\n      },\r\n      contactDrawer: {\r\n        header: \"Contact details\",\r\n        buttons: {\r\n          edit: \"Edit contact\",\r\n        },\r\n        extraInfo: \"Other information\",\r\n      },\r\n      ticketOptionsMenu: {\r\n        delete: \"Delete\",\r\n        transfer: \"Transfer\",\r\n        confirmationModal: {\r\n          title: \"Delete ticket #\",\r\n          titleFrom: \"from contact \",\r\n          message: \"Attention! All ticket's related messages will be lost.\",\r\n        },\r\n        buttons: {\r\n          delete: \"Delete\",\r\n          cancel: \"Cancel\",\r\n        },\r\n      },\r\n      confirmationModal: {\r\n        buttons: {\r\n          confirm: \"Ok\",\r\n          cancel: \"Cancel\",\r\n        },\r\n      },\r\n      messageOptionsMenu: {\r\n        delete: \"Delete\",\r\n        reply: \"Reply\",\r\n        confirmationModal: {\r\n          title: \"Delete message?\",\r\n          message: \"This action cannot be reverted.\",\r\n        },\r\n      },\r\n      backendErrors: {\r\n        ERR_NO_OTHER_WHATSAPP:\r\n          \"There must be at lest one default WhatsApp connection.\",\r\n        ERR_NO_DEF_WAPP_FOUND:\r\n          \"No default WhatsApp found. Check connections page.\",\r\n        ERR_WAPP_NOT_INITIALIZED:\r\n          \"This WhatsApp session is not initialized. Check connections page.\",\r\n        ERR_WAPP_CHECK_CONTACT:\r\n          \"Could not check WhatsApp contact. Check connections page.\",\r\n        ERR_WAPP_INVALID_CONTACT: \"This is not a valid whatsapp number.\",\r\n        ERR_WAPP_DOWNLOAD_MEDIA:\r\n          \"Could not download media from WhatsApp. Check connections page.\",\r\n        ERR_INVALID_CREDENTIALS: \"Authentication error. Please try again.\",\r\n        ERR_SENDING_WAPP_MSG:\r\n          \"Error sending WhatsApp message. Check connections page.\",\r\n        ERR_DELETE_WAPP_MSG: \"Couldn't delete message from WhatsApp.\",\r\n        ERR_OTHER_OPEN_TICKET:\r\n          \"There's already an open ticket for this contact.\",\r\n        ERR_SESSION_EXPIRED: \"Session expired. Please login.\",\r\n        ERR_USER_CREATION_DISABLED:\r\n          \"User creation was disabled by administrator.\",\r\n        ERR_NO_PERMISSION: \"You don't have permission to access this resource.\",\r\n        ERR_DUPLICATED_CONTACT: \"A contact with this number already exists.\",\r\n        ERR_NO_SETTING_FOUND: \"No setting found with this ID.\",\r\n        ERR_NO_CONTACT_FOUND: \"No contact found with this ID.\",\r\n        ERR_NO_TICKET_FOUND: \"No ticket found with this ID.\",\r\n        ERR_NO_USER_FOUND: \"No user found with this ID.\",\r\n        ERR_NO_WAPP_FOUND: \"No WhatsApp found with this ID.\",\r\n        ERR_CREATING_MESSAGE: \"Error while creating message on database.\",\r\n        ERR_CREATING_TICKET: \"Error while creating ticket on database.\",\r\n        ERR_FETCH_WAPP_MSG:\r\n          \"Error fetching the message in WhtasApp, maybe it is too old.\",\r\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n          \"This color is already in use, pick another one.\",\r\n        ERR_WAPP_GREETING_REQUIRED:\r\n          \"Greeting message is required if there is more than one queue.\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n  es: {\r\n    translations: {\r\n      signup: {\r\n        title: \"Registro\",\r\n        toasts: {\r\n          success:\r\n            \"¡El usuario ha sido creado satisfactoriamente! ¡Ahora inicia sesión!\",\r\n          fail: \"Error creando el usuario. Verifica la data reportada.\",\r\n        },\r\n        form: {\r\n          name: \"Nombre\",\r\n          email: \"Correo Electrónico\",\r\n          password: \"Contraseña\",\r\n        },\r\n        buttons: {\r\n          submit: \"Regístrate\",\r\n          login: \"¿Ya tienes una cuenta? ¡Inicia sesión!\",\r\n        },\r\n      },\r\n      login: {\r\n        title: \"Inicio de Sesión\",\r\n        form: {\r\n          email: \"Correo Electrónico\",\r\n          password: \"Contraseña\",\r\n        },\r\n        buttons: {\r\n          submit: \"Ingresa\",\r\n          register: \"¿No tienes cuenta? ¡Regístrate!\",\r\n        },\r\n      },\r\n      auth: {\r\n        toasts: {\r\n          success: \"¡Inicio de sesión exitoso!\",\r\n        },\r\n      },\r\n      dashboard: {\r\n        charts: {\r\n          perDay: {\r\n            title: \"Tickets hoy: \",\r\n          },\r\n        },\r\n        messages: {\r\n          inAttendance: {\r\n            title: \"En servicio\"\r\n          },\r\n          waiting: {\r\n            title: \"Esperando\"\r\n          },\r\n          closed: {\r\n            title: \"Finalizado\"\r\n          }\r\n        }\r\n      },\r\n      connections: {\r\n        title: \"Conexiones\",\r\n        toasts: {\r\n          deleted:\r\n            \"¡La conexión de WhatsApp ha sido borrada satisfactoriamente!\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Borrar\",\r\n          deleteMessage: \"¿Estás seguro? Este proceso no puede ser revertido.\",\r\n          disconnectTitle: \"Desconectar\",\r\n          disconnectMessage: \"Estás seguro? Deberá volver a leer el código QR\",\r\n        },\r\n        buttons: {\r\n          add: \"Agrega WhatsApp\",\r\n          disconnect: \"Desconectar\",\r\n          tryAgain: \"Inténtalo de nuevo\",\r\n          qrcode: \"QR CODE\",\r\n          newQr: \"Nuevo QR CODE\",\r\n          connecting: \"Conectando\",\r\n        },\r\n        toolTips: {\r\n          disconnected: {\r\n            title: \"No se pudo iniciar la sesión de WhatsApp\",\r\n            content:\r\n              \"Asegúrese de que su teléfono celular esté conectado a Internet y vuelva a intentarlo o solicite un nuevo código QR\",\r\n          },\r\n          qrcode: {\r\n            title: \"Esperando la lectura del código QR\",\r\n            content:\r\n              \"Haga clic en el botón 'CÓDIGO QR' y lea el Código QR con su teléfono celular para iniciar la sesión\",\r\n          },\r\n          connected: {\r\n            title: \"Conexión establecida\",\r\n          },\r\n          timeout: {\r\n            title: \"Se perdió la conexión con el teléfono celular\",\r\n            content:\r\n              \"Asegúrese de que su teléfono celular esté conectado a Internet y que WhatsApp esté abierto, o haga clic en el botón 'Desconectar' para obtener un nuevo código QR\",\r\n          },\r\n        },\r\n        table: {\r\n          name: \"Nombre\",\r\n          status: \"Estado\",\r\n          lastUpdate: \"Última Actualización\",\r\n          default: \"Por Defecto\",\r\n          actions: \"Acciones\",\r\n          session: \"Sesión\",\r\n        },\r\n      },\r\n      whatsappModal: {\r\n        title: {\r\n          add: \"Agrega WhatsApp\",\r\n          edit: \"Edita WhatsApp\",\r\n        },\r\n        form: {\r\n          name: \"Nombre\",\r\n          default: \"Por Defecto\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Agregar\",\r\n          okEdit: \"Guardar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"WhatsApp guardado satisfactoriamente.\",\r\n      },\r\n      qrCode: {\r\n        message: \"Lée el código QR para empezar la sesión.\",\r\n      },\r\n      contacts: {\r\n        title: \"Contactos\",\r\n        toasts: {\r\n          deleted: \"¡Contacto borrado satisfactoriamente!\",\r\n        },\r\n        searchPlaceholder: \"Buscar...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Borrar\",\r\n          importTitlte: \"Importar contactos\",\r\n          deleteMessage:\r\n            \"¿Estás seguro que deseas borrar este contacto? Todos los tickets relacionados se perderán.\",\r\n          importMessage:\r\n            \"¿Quieres importar todos los contactos desde tu teléfono?\",\r\n        },\r\n        buttons: {\r\n          import: \"Importar Contactos\",\r\n          add: \"Agregar Contacto\",\r\n        },\r\n        table: {\r\n          name: \"Nombre\",\r\n          whatsapp: \"WhatsApp\",\r\n          email: \"Correo Electrónico\",\r\n          actions: \"Acciones\",\r\n        },\r\n      },\r\n      contactModal: {\r\n        title: {\r\n          add: \"Agregar contacto\",\r\n          edit: \"Editar contacto\",\r\n        },\r\n        form: {\r\n          mainInfo: \"Detalles del contacto\",\r\n          extraInfo: \"Información adicional\",\r\n          name: \"Nombre\",\r\n          number: \"Número de Whatsapp\",\r\n          email: \"Correo Electrónico\",\r\n          extraName: \"Nombre del Campo\",\r\n          extraValue: \"Valor\",\r\n        },\r\n        buttons: {\r\n          addExtraInfo: \"Agregar información\",\r\n          okAdd: \"Agregar\",\r\n          okEdit: \"Guardar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Contacto guardado satisfactoriamente.\",\r\n      },\r\n      quickAnswersModal: {\r\n        title: {\r\n          add: \"Agregar respuesta rápida\",\r\n          edit: \"Editar respuesta rápida\",\r\n        },\r\n        form: {\r\n          shortcut: \"Atajo\",\r\n          message: \"Respuesta rápida\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Agregar\",\r\n          okEdit: \"Guardar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Respuesta rápida guardada correctamente.\",\r\n      },\r\n      queueModal: {\r\n        title: {\r\n          add: \"Agregar cola\",\r\n          edit: \"Editar cola\",\r\n        },\r\n        form: {\r\n          name: \"Nombre\",\r\n          color: \"Color\",\r\n          greetingMessage: \"Mensaje de saludo\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Añadir\",\r\n          okEdit: \"Ahorrar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      userModal: {\r\n        title: {\r\n          add: \"Agregar usuario\",\r\n          edit: \"Editar usuario\",\r\n        },\r\n        form: {\r\n          name: \"Nombre\",\r\n          email: \"Correo Electrónico\",\r\n          password: \"Contraseña\",\r\n          profile: \"Perfil\",\r\n          whatsapp: \"Conexión estándar\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Agregar\",\r\n          okEdit: \"Guardar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Usuario guardado satisfactoriamente.\",\r\n      },\r\n      chat: {\r\n        noTicketMessage: \"Selecciona un ticket para empezar a chatear.\",\r\n      },\r\n      ticketsManager: {\r\n        buttons: {\r\n          newTicket: \"Nuevo\",\r\n        },\r\n      },\r\n      ticketsQueueSelect: {\r\n        placeholder: \"Linhas\",\r\n      },\r\n      tickets: {\r\n        toasts: {\r\n          deleted: \"El ticket en el que estabas ha sido borrado.\",\r\n        },\r\n        notification: {\r\n          message: \"Mensaje de\",\r\n        },\r\n        tabs: {\r\n          open: { title: \"Bandeja\" },\r\n          closed: { title: \"Resueltos\" },\r\n          search: { title: \"Buscar\" },\r\n        },\r\n        search: {\r\n          placeholder: \"Buscar tickets y mensajes.\",\r\n        },\r\n        buttons: {\r\n          showAll: \"Todos\",\r\n        },\r\n      },\r\n      transferTicketModal: {\r\n        title: \"Transferir Ticket\",\r\n        fieldLabel: \"Escriba para buscar usuarios\",\r\n        fieldQueueLabel: \"Transferir a la cola\",\r\n        fieldConnectionLabel: \"Transferir to conexión\",\r\n        fieldQueuePlaceholder: \"Seleccione una cola\",\r\n        fieldConnectionPlaceholder: \"Seleccione una conexión\",\r\n        noOptions: \"No se encontraron usuarios con ese nombre\",\r\n        buttons: {\r\n          ok: \"Transferir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      ticketsList: {\r\n        pendingHeader: \"Cola\",\r\n        assignedHeader: \"Trabajando en\",\r\n        noTicketsTitle: \"¡Nada acá!\",\r\n        connectionTitle: \"Conexión que se está utilizando actualmente.\",\r\n        noTicketsMessage:\r\n          \"No se encontraron tickets con este estado o término de búsqueda\",\r\n        buttons: {\r\n          accept: \"Acceptar\",\r\n        },\r\n      },\r\n      newTicketModal: {\r\n        title: \"Crear Ticket\",\r\n        fieldLabel: \"Escribe para buscar un contacto\",\r\n        add: \"Añadir\",\r\n        buttons: {\r\n          ok: \"Guardar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      mainDrawer: {\r\n        listItems: {\r\n          dashboard: \"Dashboard\",\r\n          connections: \"Conexiones\",\r\n          tickets: \"Tickets\",\r\n          contacts: \"Contactos\",\r\n          quickAnswers: \"Respuestas rápidas\",\r\n          queues: \"Linhas\",\r\n          administration: \"Administración\",\r\n          users: \"Usuarios\",\r\n          settings: \"Configuración\",\r\n        },\r\n        appBar: {\r\n          user: {\r\n            profile: \"Perfil\",\r\n            logout: \"Cerrar Sesión\",\r\n          },\r\n        },\r\n      },\r\n      notifications: {\r\n        noTickets: \"Sin notificaciones.\",\r\n      },\r\n      queues: {\r\n        title: \"Linhas\",\r\n        table: {\r\n          name: \"Nombre\",\r\n          color: \"Color\",\r\n          greeting: \"Mensaje de saludo\",\r\n          actions: \"Comportamiento\",\r\n        },\r\n        buttons: {\r\n          add: \"Agregar cola\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Eliminar\",\r\n          deleteMessage:\r\n            \"¿Estás seguro? ¡Esta acción no se puede revertir! Los tickets en esa cola seguirán existiendo, pero ya no tendrán ninguna cola asignada.\",\r\n        },\r\n      },\r\n      queueSelect: {\r\n        inputLabel: \"Linhas\",\r\n      },\r\n      quickAnswers: {\r\n        title: \"Respuestas rápidas\",\r\n        table: {\r\n          shortcut: \"Atajo\",\r\n          message: \"Respuesta rápida\",\r\n          actions: \"Acciones\",\r\n        },\r\n        buttons: {\r\n          add: \"Agregar respuesta rápida\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Respuesta rápida eliminada correctamente\",\r\n        },\r\n        searchPlaceholder: \"Buscar ...\",\r\n        confirmationModal: {\r\n          deleteTitle:\r\n            \"¿Está seguro de que desea eliminar esta respuesta rápida?\",\r\n          deleteMessage: \"Esta acción no se puede deshacer.\",\r\n        },\r\n      },\r\n      users: {\r\n        title: \"Usuarios\",\r\n        table: {\r\n          name: \"Nombre\",\r\n          email: \"Correo Electrónico\",\r\n          profile: \"Perfil\",\r\n          whatsapp: \"Conexión estándar\",\r\n          actions: \"Acciones\",\r\n        },\r\n        buttons: {\r\n          add: \"Agregar usuario\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Usuario borrado satisfactoriamente.\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Borrar\",\r\n          deleteMessage:\r\n            \"Toda la información del usuario se perderá. Los tickets abiertos de los usuarios se moverán a la cola.\",\r\n        },\r\n      },\r\n      settings: {\r\n        success: \"Configuración guardada satisfactoriamente.\",\r\n        title: \"Configuración\",\r\n        settings: {\r\n          userCreation: {\r\n            name: \"Creación de usuarios\",\r\n            options: {\r\n              enabled: \"Habilitado\",\r\n              disabled: \"Deshabilitado\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n      messagesList: {\r\n        header: {\r\n          assignedTo: \"Asignado a:\",\r\n          buttons: {\r\n            return: \"Devolver\",\r\n            resolve: \"Resolver\",\r\n            reopen: \"Reabrir\",\r\n            accept: \"Aceptar\",\r\n          },\r\n        },\r\n      },\r\n      messagesInput: {\r\n        placeholderOpen: \"Escriba un mensaje o presione '' / '' para usar las respuestas rápidas registradas\",\r\n        placeholderClosed:\r\n          \"Vuelva a abrir o acepte este ticket para enviar un mensaje.\",\r\n        signMessage: \"Firmar\",\r\n      },\r\n      contactDrawer: {\r\n        header: \"Detalles del contacto\",\r\n        buttons: {\r\n          edit: \"Editar contacto\",\r\n        },\r\n        extraInfo: \"Otra información\",\r\n      },\r\n      ticketOptionsMenu: {\r\n        delete: \"Borrar\",\r\n        transfer: \"Transferir\",\r\n        confirmationModal: {\r\n          title: \"¿Borrar ticket #\",\r\n          titleFrom: \"del contacto \",\r\n          message:\r\n            \"¡Atención! Todos los mensajes Todos los mensajes relacionados con el ticket se perderán.\",\r\n        },\r\n        buttons: {\r\n          delete: \"Borrar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      confirmationModal: {\r\n        buttons: {\r\n          confirm: \"Ok\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      messageOptionsMenu: {\r\n        delete: \"Borrar\",\r\n        reply: \"Responder\",\r\n        confirmationModal: {\r\n          title: \"¿Borrar mensaje?\",\r\n          message: \"Esta acción no puede ser revertida.\",\r\n        },\r\n      },\r\n      backendErrors: {\r\n        ERR_NO_OTHER_WHATSAPP:\r\n          \"Debe haber al menos una conexión de WhatsApp predeterminada.\",\r\n        ERR_NO_DEF_WAPP_FOUND:\r\n          \"No se encontró WhatsApp predeterminado. Verifique la página de conexiones.\",\r\n        ERR_WAPP_NOT_INITIALIZED:\r\n          \"Esta sesión de WhatsApp no ​​está inicializada. Verifique la página de conexiones.\",\r\n        ERR_WAPP_CHECK_CONTACT:\r\n          \"No se pudo verificar el contacto de WhatsApp. Verifique la página de conexiones.\",\r\n        ERR_WAPP_INVALID_CONTACT: \"Este no es un número de whatsapp válido.\",\r\n        ERR_WAPP_DOWNLOAD_MEDIA:\r\n          \"No se pudieron descargar los medios de WhatsApp. Verifique la página de conexiones.\",\r\n        ERR_INVALID_CREDENTIALS: \"Error de autenticación. Vuelva a intentarlo.\",\r\n        ERR_SENDING_WAPP_MSG:\r\n          \"Error al enviar el mensaje de WhatsApp. Verifique la página de conexiones.\",\r\n        ERR_DELETE_WAPP_MSG: \"No se pudo borrar el mensaje de WhatsApp.\",\r\n        ERR_OTHER_OPEN_TICKET: \"Ya hay un ticket abierto para este contacto.\",\r\n        ERR_SESSION_EXPIRED: \"Sesión caducada. Inicie sesión.\",\r\n        ERR_USER_CREATION_DISABLED:\r\n          \"La creación de usuarios fue deshabilitada por el administrador.\",\r\n        ERR_NO_PERMISSION: \"No tienes permiso para acceder a este recurso.\",\r\n        ERR_DUPLICATED_CONTACT: \"Ya existe un contacto con este número.\",\r\n        ERR_NO_SETTING_FOUND:\r\n          \"No se encontró ninguna configuración con este ID.\",\r\n        ERR_NO_CONTACT_FOUND: \"No se encontró ningún contacto con este ID.\",\r\n        ERR_NO_TICKET_FOUND: \"No se encontró ningún ticket con este ID.\",\r\n        ERR_NO_USER_FOUND: \"No se encontró ningún usuario con este ID.\",\r\n        ERR_NO_WAPP_FOUND: \"No se encontró WhatsApp con este ID.\",\r\n        ERR_CREATING_MESSAGE: \"Error al crear el mensaje en la base de datos.\",\r\n        ERR_CREATING_TICKET: \"Error al crear el ticket en la base de datos.\",\r\n        ERR_FETCH_WAPP_MSG:\r\n          \"Error al obtener el mensaje en WhtasApp, tal vez sea demasiado antiguo.\",\r\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n          \"Este color ya está en uso, elija otro.\",\r\n        ERR_WAPP_GREETING_REQUIRED:\r\n          \"El mensaje de saludo es obligatorio cuando hay más de una cola.\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { messages };\r\n","import i18n from \"i18next\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\n\r\nimport { messages } from \"./languages\";\r\n\r\ni18n.use(LanguageDetector).init({\r\n\tdebug: false,\r\n\tdefaultNS: [\"translations\"],\r\n\tfallbackLng: \"en\",\r\n\tns: [\"translations\"],\r\n\tresources: messages,\r\n});\r\n\r\nexport { i18n };\r\n","function getConfig(name, defaultValue=null) {\r\n    // If inside a docker container, use window.ENV\r\n    if( window.ENV !== undefined ) {\r\n        return window.ENV[name] || defaultValue;\r\n    }\r\n\r\n    return process.env[name] || defaultValue;\r\n}\r\n\r\nexport function getBackendUrl() {\r\n    return getConfig('REACT_APP_BACKEND_URL');\r\n}\r\n\r\nexport function getHoursCloseTicketsAuto() {\r\n    return getConfig('REACT_APP_HOURS_CLOSE_TICKETS_AUTO');\r\n}","import openSocket from \"socket.io-client\";\r\nimport { getBackendUrl } from \"../config\";\r\n\r\nfunction connectToSocket() {\r\n    return openSocket(getBackendUrl());\r\n}\r\n\r\nexport default connectToSocket;","import { toast } from \"react-toastify\";\r\nimport { i18n } from \"../translate/i18n\";\r\n\r\nconst toastError = err => {\r\n\tconst errorMsg = err.response?.data?.message || err.response.data.error;\r\n\tif (errorMsg) {\r\n\t\tif (i18n.exists(`backendErrors.${errorMsg}`)) {\r\n\t\t\ttoast.error(i18n.t(`backendErrors.${errorMsg}`), {\r\n\t\t\t\ttoastId: errorMsg,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\ttoast.error(errorMsg, {\r\n\t\t\t\ttoastId: errorMsg,\r\n\t\t\t});\r\n\t\t}\r\n\t} else {\r\n\t\ttoast.error(\"An error occurred!\");\r\n\t}\r\n};\r\n\r\nexport default toastError;\r\n","import axios from \"axios\";\r\nimport { getBackendUrl } from \"../config\";\r\n\r\nconst api = axios.create({\r\n\tbaseURL: getBackendUrl(),\r\n\twithCredentials: true,\r\n});\r\n\r\nexport default api;\r\n","import { useState, useEffect, useReducer } from \"react\";\r\nimport openSocket from \"../../services/socket-io\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nconst reducer = (state, action) => {\r\n\tif (action.type === \"LOAD_WHATSAPPS\") {\r\n\t\tconst whatsApps = action.payload;\r\n\r\n\t\treturn [...whatsApps];\r\n\t}\r\n\r\n\tif (action.type === \"UPDATE_WHATSAPPS\") {\r\n\t\tconst whatsApp = action.payload;\r\n\t\tconst whatsAppIndex = state.findIndex(s => s.id === whatsApp.id);\r\n\r\n\t\tif (whatsAppIndex !== -1) {\r\n\t\t\tstate[whatsAppIndex] = whatsApp;\r\n\t\t\treturn [...state];\r\n\t\t} else {\r\n\t\t\treturn [whatsApp, ...state];\r\n\t\t}\r\n\t}\r\n\r\n\tif (action.type === \"UPDATE_SESSION\") {\r\n\t\tconst whatsApp = action.payload;\r\n\t\tconst whatsAppIndex = state.findIndex(s => s.id === whatsApp.id);\r\n\r\n\t\tif (whatsAppIndex !== -1) {\r\n\t\t\tstate[whatsAppIndex].status = whatsApp.status;\r\n\t\t\tstate[whatsAppIndex].updatedAt = whatsApp.updatedAt;\r\n\t\t\tstate[whatsAppIndex].qrcode = whatsApp.qrcode;\r\n\t\t\tstate[whatsAppIndex].retries = whatsApp.retries;\r\n\t\t\treturn [...state];\r\n\t\t} else {\r\n\t\t\treturn [...state];\r\n\t\t}\r\n\t}\r\n\r\n\tif (action.type === \"DELETE_WHATSAPPS\") {\r\n\t\tconst whatsAppId = action.payload;\r\n\r\n\t\tconst whatsAppIndex = state.findIndex(s => s.id === whatsAppId);\r\n\t\tif (whatsAppIndex !== -1) {\r\n\t\t\tstate.splice(whatsAppIndex, 1);\r\n\t\t}\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"RESET\") {\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\nconst useWhatsApps = () => {\r\n\tconst [whatsApps, dispatch] = useReducer(reducer, []);\r\n\tconst [loading, setLoading] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetLoading(true);\r\n\t\tconst fetchSession = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(\"/whatsapp/\");\r\n\t\t\t\tdispatch({ type: \"LOAD_WHATSAPPS\", payload: data });\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchSession();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = openSocket();\r\n\r\n\t\tsocket.on(\"whatsapp\", data => {\r\n\t\t\tif (data.action === \"update\") {\r\n\t\t\t\tdispatch({ type: \"UPDATE_WHATSAPPS\", payload: data.whatsapp });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(\"whatsapp\", data => {\r\n\t\t\tif (data.action === \"delete\") {\r\n\t\t\t\tdispatch({ type: \"DELETE_WHATSAPPS\", payload: data.whatsappId });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(\"whatsappSession\", data => {\r\n\t\t\tif (data.action === \"update\") {\r\n\t\t\t\tdispatch({ type: \"UPDATE_SESSION\", payload: data.session });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn { whatsApps, loading };\r\n};\r\n\r\nexport default useWhatsApps;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\n\r\nconst WhatsAppsContext = createContext();\r\n\r\nconst WhatsAppsProvider = ({ children }) => {\r\n\tconst { loading, whatsApps } = useWhatsApps();\r\n\r\n\treturn (\r\n\t\t<WhatsAppsContext.Provider value={{ whatsApps, loading }}>\r\n\t\t\t{children}\r\n\t\t</WhatsAppsContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { WhatsAppsContext, WhatsAppsProvider };\r\n","import { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport openSocket from \"../../services/socket-io\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useAuth = () => {\r\n\tconst history = useHistory();\r\n\tconst [isAuth, setIsAuth] = useState(false);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [user, setUser] = useState({});\r\n\r\n\tapi.interceptors.request.use(\r\n\t\tconfig => {\r\n\t\t\tconst token = localStorage.getItem(\"token\");\r\n\t\t\tif (token) {\r\n\t\t\t\tconfig.headers[\"Authorization\"] = `Bearer ${JSON.parse(token)}`;\r\n\t\t\t\tsetIsAuth(true);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\terror => {\r\n\t\t\tPromise.reject(error);\r\n\t\t}\r\n\t);\r\n\r\n\tapi.interceptors.response.use(\r\n\t\tresponse => {\r\n\t\t\treturn response;\r\n\t\t},\r\n\t\tasync error => {\r\n\t\t\tconst originalRequest = error.config;\r\n\t\t\tif (error?.response?.status === 403 && !originalRequest._retry) {\r\n\t\t\t\toriginalRequest._retry = true;\r\n\r\n\t\t\t\tconst { data } = await api.post(\"/auth/refresh_token\");\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tlocalStorage.setItem(\"token\", JSON.stringify(data.token));\r\n\t\t\t\t\tapi.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn api(originalRequest);\r\n\t\t\t}\r\n\t\t\tif (error?.response?.status === 401) {\r\n\t\t\t\tlocalStorage.removeItem(\"token\");\r\n\t\t\t\tapi.defaults.headers.Authorization = undefined;\r\n\t\t\t\tsetIsAuth(false);\r\n\t\t\t}\r\n\t\t\treturn Promise.reject(error);\r\n\t\t}\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst token = localStorage.getItem(\"token\");\r\n\t\t(async () => {\r\n\t\t\tif (token) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { data } = await api.post(\"/auth/refresh_token\");\r\n\t\t\t\t\tapi.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n\t\t\t\t\tsetIsAuth(true);\r\n\t\t\t\t\tsetUser(data.user);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\ttoastError(err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetLoading(false);\r\n\t\t})();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = openSocket();\r\n\r\n\t\tsocket.on(\"user\", data => {\r\n\t\t\tif (data.action === \"update\" && data.user.id === user.id) {\r\n\t\t\t\tsetUser(data.user);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [user]);\r\n\r\n\tconst handleLogin = async userData => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tconst { data } = await api.post(\"/auth/login\", userData);\r\n\t\t\tlocalStorage.setItem(\"token\", JSON.stringify(data.token));\r\n\t\t\tapi.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n\t\t\tsetUser(data.user);\r\n\t\t\tsetIsAuth(true);\r\n\t\t\ttoast.success(i18n.t(\"auth.toasts.success\"));\r\n\t\t\thistory.push(\"/tickets\");\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLogout = async () => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tawait api.delete(\"/auth/logout\");\r\n\t\t\tsetIsAuth(false);\r\n\t\t\tsetUser({});\r\n\t\t\tlocalStorage.removeItem(\"token\");\r\n\t\t\tapi.defaults.headers.Authorization = undefined;\r\n\t\t\tsetLoading(false);\r\n\t\t\thistory.push(\"/login\");\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn { isAuth, user, loading, handleLogin, handleLogout };\r\n};\r\n\r\nexport default useAuth;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n\tconst { loading, user, isAuth, handleLogin, handleLogout } = useAuth();\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider\r\n\t\t\tvalue={{ loading, user, isAuth, handleLogin, handleLogout }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n","const rules = {\r\n\tuser: {\r\n\t\tstatic: [],\r\n\t},\r\n\r\n\tadmin: {\r\n\t\tstatic: [\r\n\t\t\t\"drawer-admin-items:view\",\r\n\t\t\t\"tickets-manager:showall\",\r\n\t\t\t\"user-modal:editProfile\",\r\n\t\t\t\"user-modal:editQueues\",\r\n\t\t\t\"ticket-options:deleteTicket\",\r\n\t\t\t\"ticket-options:transferWhatsapp\",\r\n\t\t\t\"contacts-page:deleteContact\",\r\n\t\t],\r\n\t},\r\n};\r\n\r\nexport default rules;\r\n","import rules from \"../../rules\";\r\n\r\nconst check = (role, action, data) => {\r\n\tconst permissions = rules[role];\r\n\tif (!permissions) {\r\n\t\t// role is not present in the rules\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst staticPermissions = permissions.static;\r\n\r\n\tif (staticPermissions && staticPermissions.includes(action)) {\r\n\t\t// static rule not provided for action\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst dynamicPermissions = permissions.dynamic;\r\n\r\n\tif (dynamicPermissions) {\r\n\t\tconst permissionCondition = dynamicPermissions[action];\r\n\t\tif (!permissionCondition) {\r\n\t\t\t// dynamic rule not provided for action\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn permissionCondition(data);\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nconst Can = ({ role, perform, data, yes, no }) =>\r\n\tcheck(role, perform, data) ? yes() : no();\r\n\r\nCan.defaultProps = {\r\n\tyes: () => null,\r\n\tno: () => null,\r\n};\r\n\r\nexport { Can };\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { Badge } from \"@material-ui/core\";\r\nimport DashboardOutlinedIcon from \"@material-ui/icons/DashboardOutlined\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SyncAltIcon from \"@material-ui/icons/SyncAlt\";\r\nimport SettingsOutlinedIcon from \"@material-ui/icons/SettingsOutlined\";\r\nimport PeopleAltOutlinedIcon from \"@material-ui/icons/PeopleAltOutlined\";\r\nimport ContactPhoneOutlinedIcon from \"@material-ui/icons/ContactPhoneOutlined\";\r\nimport AccountTreeOutlinedIcon from \"@material-ui/icons/AccountTreeOutlined\";\r\nimport QuestionAnswerOutlinedIcon from \"@material-ui/icons/QuestionAnswerOutlined\";\r\n\r\nimport { i18n } from \"../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport { Can } from \"../components/Can\";\r\n\r\nfunction ListItemLink(props) {\r\n  const { icon, primary, to, className } = props;\r\n\r\n  const renderLink = React.useMemo(\r\n    () =>\r\n      React.forwardRef((itemProps, ref) => (\r\n        <RouterLink to={to} ref={ref} {...itemProps} />\r\n      )),\r\n    [to]\r\n  );\r\n\r\n  return (\r\n    <li>\r\n      <ListItem button component={renderLink} className={className}>\r\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\r\n        <ListItemText primary={primary} />\r\n      </ListItem>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst MainListItems = (props) => {\r\n  const { drawerClose } = props;\r\n  const { whatsApps } = useContext(WhatsAppsContext);\r\n  const { user } = useContext(AuthContext);\r\n  const [connectionWarning, setConnectionWarning] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      if (whatsApps.length > 0) {\r\n        const offlineWhats = whatsApps.filter((whats) => {\r\n          return (\r\n            whats.status === \"qrcode\" ||\r\n            whats.status === \"PAIRING\" ||\r\n            whats.status === \"DISCONNECTED\" ||\r\n            whats.status === \"TIMEOUT\" ||\r\n            whats.status === \"OPENING\"\r\n          );\r\n        });\r\n        if (offlineWhats.length > 0) {\r\n          setConnectionWarning(true);\r\n        } else {\r\n          setConnectionWarning(false);\r\n        }\r\n      }\r\n    }, 2000);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [whatsApps]);\r\n\r\n  return (\r\n    <div onClick={drawerClose}>\r\n      <ListItemLink\r\n        to=\"/\"\r\n        primary=\"Dashboard\"\r\n        icon={<DashboardOutlinedIcon />}\r\n      />\r\n      <ListItemLink\r\n        to=\"/connections\"\r\n        primary={i18n.t(\"mainDrawer.listItems.connections\")}\r\n        icon={\r\n          <Badge badgeContent={connectionWarning ? \"!\" : 0} color=\"error\">\r\n            <SyncAltIcon />\r\n          </Badge>\r\n        }\r\n      />\r\n      <ListItemLink\r\n        to=\"/tickets\"\r\n        primary={i18n.t(\"mainDrawer.listItems.tickets\")}\r\n        icon={<WhatsAppIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/contacts\"\r\n        primary={i18n.t(\"mainDrawer.listItems.contacts\")}\r\n        icon={<ContactPhoneOutlinedIcon />}\r\n      />\r\n      <ListItemLink\r\n        to=\"/quickAnswers\"\r\n        primary={i18n.t(\"mainDrawer.listItems.quickAnswers\")}\r\n        icon={<QuestionAnswerOutlinedIcon />}\r\n      />\r\n      <Can\r\n        role={user.profile}\r\n        perform=\"drawer-admin-items:view\"\r\n        yes={() => (\r\n          <>\r\n            <Divider />\r\n            <ListSubheader inset>\r\n              {i18n.t(\"mainDrawer.listItems.administration\")}\r\n            </ListSubheader>\r\n            <ListItemLink\r\n              to=\"/users\"\r\n              primary={i18n.t(\"mainDrawer.listItems.users\")}\r\n              icon={<PeopleAltOutlinedIcon />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/queues\"\r\n              primary={i18n.t(\"mainDrawer.listItems.queues\")}\r\n              icon={<AccountTreeOutlinedIcon />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/settings\"\r\n              primary={i18n.t(\"mainDrawer.listItems.settings\")}\r\n              icon={<SettingsOutlinedIcon />}\r\n            />\r\n          </>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainListItems;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport { CircularProgress, Button } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbutton: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ButtonWithSpinner = ({ loading, children, ...rest }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Button className={classes.button} disabled={loading} {...rest}>\r\n\t\t\t{children}\r\n\t\t\t{loading && (\r\n\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t)}\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ButtonWithSpinner;\r\n","import React from \"react\";\r\nimport Markdown from \"markdown-to-jsx\";\r\n\r\nconst elements = [\r\n\t\"a\",\r\n\t\"abbr\",\r\n\t\"address\",\r\n\t\"area\",\r\n\t\"article\",\r\n\t\"aside\",\r\n\t\"audio\",\r\n\t\"b\",\r\n\t\"base\",\r\n\t\"bdi\",\r\n\t\"bdo\",\r\n\t\"big\",\r\n\t\"blockquote\",\r\n\t\"body\",\r\n\t\"br\",\r\n\t\"button\",\r\n\t\"canvas\",\r\n\t\"caption\",\r\n\t\"cite\",\r\n\t\"code\",\r\n\t\"col\",\r\n\t\"colgroup\",\r\n\t\"data\",\r\n\t\"datalist\",\r\n\t\"dd\",\r\n\t\"del\",\r\n\t\"details\",\r\n\t\"dfn\",\r\n\t\"dialog\",\r\n\t\"div\",\r\n\t\"dl\",\r\n\t\"dt\",\r\n\t\"em\",\r\n\t\"embed\",\r\n\t\"fieldset\",\r\n\t\"figcaption\",\r\n\t\"figure\",\r\n\t\"footer\",\r\n\t\"form\",\r\n\t\"h1\",\r\n\t\"h2\",\r\n\t\"h3\",\r\n\t\"h4\",\r\n\t\"h5\",\r\n\t\"h6\",\r\n\t\"head\",\r\n\t\"header\",\r\n\t\"hgroup\",\r\n\t\"hr\",\r\n\t\"html\",\r\n\t\"i\",\r\n\t\"iframe\",\r\n\t\"img\",\r\n\t\"input\",\r\n\t\"ins\",\r\n\t\"kbd\",\r\n\t\"keygen\",\r\n\t\"label\",\r\n\t\"legend\",\r\n\t\"li\",\r\n\t\"link\",\r\n\t\"main\",\r\n\t\"map\",\r\n\t\"mark\",\r\n\t\"marquee\",\r\n\t\"menu\",\r\n\t\"menuitem\",\r\n\t\"meta\",\r\n\t\"meter\",\r\n\t\"nav\",\r\n\t\"noscript\",\r\n\t\"object\",\r\n\t\"ol\",\r\n\t\"optgroup\",\r\n\t\"option\",\r\n\t\"output\",\r\n\t\"p\",\r\n\t\"param\",\r\n\t\"picture\",\r\n\t\"pre\",\r\n\t\"progress\",\r\n\t\"q\",\r\n\t\"rp\",\r\n\t\"rt\",\r\n\t\"ruby\",\r\n\t\"s\",\r\n\t\"samp\",\r\n\t\"script\",\r\n\t\"section\",\r\n\t\"select\",\r\n\t\"small\",\r\n\t\"source\",\r\n\t\"span\",\r\n\t\"strong\",\r\n\t\"style\",\r\n\t\"sub\",\r\n\t\"summary\",\r\n\t\"sup\",\r\n\t\"table\",\r\n\t\"tbody\",\r\n\t\"td\",\r\n\t\"textarea\",\r\n\t\"tfoot\",\r\n\t\"th\",\r\n\t\"thead\",\r\n\t\"time\",\r\n\t\"title\",\r\n\t\"tr\",\r\n\t\"track\",\r\n\t\"u\",\r\n\t\"ul\",\r\n\t\"var\",\r\n\t\"video\",\r\n\t\"wbr\",\r\n\r\n\t// SVG\r\n\t\"circle\",\r\n\t\"clipPath\",\r\n\t\"defs\",\r\n\t\"ellipse\",\r\n\t\"foreignObject\",\r\n\t\"g\",\r\n\t\"image\",\r\n\t\"line\",\r\n\t\"linearGradient\",\r\n\t\"marker\",\r\n\t\"mask\",\r\n\t\"path\",\r\n\t\"pattern\",\r\n\t\"polygon\",\r\n\t\"polyline\",\r\n\t\"radialGradient\",\r\n\t\"rect\",\r\n\t\"stop\",\r\n\t\"svg\",\r\n\t\"text\",\r\n\t\"tspan\",\r\n];\r\n\r\nconst allowedElements = [\"a\", \"b\", \"strong\", \"em\", \"u\", \"code\", \"del\"];\r\n\r\nconst CustomLink = ({ children, ...props }) => (\r\n\t<a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t{children}\r\n\t</a>\r\n);\r\n\r\nconst MarkdownWrapper = ({ children }) => {\r\n\tconst boldRegex = /\\*(.*?)\\*/g;\r\n\tconst tildaRegex = /~(.*?)~/g;\r\n\t\r\n\tif(children && children.includes('BEGIN:VCARD'))\r\n\t\t//children = \"Diga olá ao seu novo contato clicando em *conversar*!\";\r\n\t\tchildren = null;\r\n\t\r\n\tif(children && children.includes('data:image/'))\r\n\t\tchildren = null;\r\n\t\r\n\tif (children && boldRegex.test(children)) {\r\n\t\tchildren = children.replace(boldRegex, \"**$1**\");\r\n\t}\r\n\tif (children && tildaRegex.test(children)) {\r\n\t\tchildren = children.replace(tildaRegex, \"~~$1~~\");\r\n\t}\r\n\r\n\tconst options = React.useMemo(() => {\r\n\t\tconst markdownOptions = {\r\n\t\t\tdisableParsingRawHTML: true,\r\n\t\t\tforceInline: true,\r\n\t\t\toverrides: {\r\n\t\t\t\ta: { component: CustomLink },\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\telements.forEach(element => {\r\n\t\t\tif (!allowedElements.includes(element)) {\r\n\t\t\t\tmarkdownOptions.overrides[element] = el => el.children || null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn markdownOptions;\r\n\t}, []);\r\n\r\n\tif (!children) return null;\r\n\t\r\n\treturn <Markdown options={options}>{children}</Markdown>;\r\n};\r\n\r\nexport default MarkdownWrapper;","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { parseISO, format, isSameDay } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticket: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tpendingTicket: {\r\n\t\tcursor: \"unset\",\r\n\t},\r\n\r\n\tnoTicketsDiv: {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100px\",\r\n\t\tmargin: 40,\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\r\n\tnoTicketsText: {\r\n\t\ttextAlign: \"center\",\r\n\t\tcolor: \"rgb(104, 121, 146)\",\r\n\t\tfontSize: \"14px\",\r\n\t\tlineHeight: \"1.4\",\r\n\t},\r\n\r\n\tnoTicketsTitle: {\r\n\t\ttextAlign: \"center\",\r\n\t\tfontSize: \"16px\",\r\n\t\tfontWeight: \"600\",\r\n\t\tmargin: \"0px\",\r\n\t},\r\n\r\n\tcontactNameWrapper: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t},\r\n\r\n\tlastMessageTime: {\r\n\t\tjustifySelf: \"flex-end\",\r\n\t},\r\n\r\n\tclosedBadge: {\r\n\t\talignSelf: \"center\",\r\n\t\tjustifySelf: \"flex-end\",\r\n\t\tmarginRight: 32,\r\n\t\tmarginLeft: \"auto\",\r\n\t},\r\n\r\n\tcontactLastMessage: {\r\n\t\tpaddingRight: 20,\r\n\t},\r\n\r\n\tnewMessagesCount: {\r\n\t\talignSelf: \"center\",\r\n\t\tmarginRight: 8,\r\n\t\tmarginLeft: \"auto\",\r\n\t},\r\n\r\n\tbadgeStyle: {\r\n\t\tcolor: \"white\",\r\n\t\tbackgroundColor: green[500],\r\n\t},\r\n\r\n\tacceptButton: {\r\n\t\tposition: \"absolute\",\r\n\t\tleft: \"50%\",\r\n\t},\r\n\r\n\tticketQueueColor: {\r\n\t\tflex: \"none\",\r\n\t\twidth: \"8px\",\r\n\t\theight: \"100%\",\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"0%\",\r\n\t\tleft: \"0%\",\r\n\t},\r\n\r\n\tuserTag: {\r\n\t\tposition: \"absolute\",\r\n\t\tmarginRight: 5,\r\n\t\tright: 5,\r\n\t\tbottom: 5,\r\n\t\tbackground: \"#2576D2\",\r\n\t\tcolor: \"#ffffff\",\r\n\t\tborder: \"1px solid #CCC\",\r\n\t\tpadding: 1,\r\n\t\tpaddingLeft: 5,\r\n\t\tpaddingRight: 5,\r\n\t\tborderRadius: 10,\r\n\t\tfontSize: \"0.9em\"\r\n\t},\r\n}));\r\n\r\nconst TicketListItem = ({ ticket }) => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst { ticketId } = useParams();\r\n\tconst isMounted = useRef(true);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst handleAcepptTicket = async id => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait api.put(`/tickets/${id}`, {\r\n\t\t\t\tstatus: \"open\",\r\n\t\t\t\tuserId: user?.id,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tsetLoading(false);\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\tif (isMounted.current) {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t\thistory.push(`/tickets/${id}`);\r\n\t};\r\n\r\n\tconst handleSelectTicket = id => {\r\n\t\thistory.push(`/tickets/${id}`);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment key={ticket.id}>\r\n\t\t\t<ListItem\r\n\t\t\t\tdense\r\n\t\t\t\tbutton\r\n\t\t\t\tonClick={e => {\r\n\t\t\t\t\tif (ticket.status === \"pending\") return;\r\n\t\t\t\t\thandleSelectTicket(ticket.id);\r\n\t\t\t\t}}\r\n\t\t\t\tselected={ticketId && +ticketId === ticket.id}\r\n\t\t\t\tclassName={clsx(classes.ticket, {\r\n\t\t\t\t\t[classes.pendingTicket]: ticket.status === \"pending\",\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<Tooltip\r\n\t\t\t\t\tarrow\r\n\t\t\t\t\tplacement=\"right\"\r\n\t\t\t\t\ttitle={ticket.queue?.name || \"Sem fila\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ backgroundColor: ticket.queue?.color || \"#7C7C7C\" }}\r\n\t\t\t\t\t\tclassName={classes.ticketQueueColor}\r\n\t\t\t\t\t></span>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Avatar src={ticket?.contact?.profilePicUrl} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tdisableTypography\r\n\t\t\t\t\tprimary={\r\n\t\t\t\t\t\t<span className={classes.contactNameWrapper}>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tnoWrap\r\n\t\t\t\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ticket.contact.name}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t{ticket.status === \"closed\" && (\r\n\t\t\t\t\t\t\t\t<Badge\r\n\t\t\t\t\t\t\t\t\tclassName={classes.closedBadge}\r\n\t\t\t\t\t\t\t\t\tbadgeContent={\"closed\"}\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{ticket.lastMessage && (\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tclassName={classes.lastMessageTime}\r\n\t\t\t\t\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"textSecondary\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{isSameDay(parseISO(ticket.updatedAt), new Date()) ? (\r\n\t\t\t\t\t\t\t\t\t\t<>{format(parseISO(ticket.updatedAt), \"HH:mm\")}</>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<>{format(parseISO(ticket.updatedAt), \"dd/MM/yyyy\")}</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{ticket.whatsappId && (\r\n\t\t\t\t\t\t\t\t<div className={classes.userTag} title={i18n.t(\"ticketsList.connectionTitle\")}>{ticket.whatsapp?.name}</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t<span className={classes.contactNameWrapper}>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tclassName={classes.contactLastMessage}\r\n\t\t\t\t\t\t\t\tnoWrap\r\n\t\t\t\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\tcolor=\"textSecondary\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ticket.lastMessage ? (\r\n\t\t\t\t\t\t\t\t\t<MarkdownWrapper>{ticket.lastMessage}</MarkdownWrapper>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t<Badge\r\n\t\t\t\t\t\t\t\tclassName={classes.newMessagesCount}\r\n\t\t\t\t\t\t\t\tbadgeContent={ticket.unreadMessages}\r\n\t\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\t\tbadge: classes.badgeStyle,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{ticket.status === \"pending\" && (\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tclassName={classes.acceptButton}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tonClick={e => handleAcepptTicket(ticket.id)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"ticketsList.buttons.accept\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t)}\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" component=\"li\" />\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default TicketListItem;\r\n","import { useState, useEffect } from \"react\";\r\nimport { getHoursCloseTicketsAuto } from \"../../config\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nconst useTickets = ({\r\n    searchParam,\r\n    pageNumber,\r\n    status,\r\n    date,\r\n    showAll,\r\n    queueIds,\r\n    withUnreadMessages,\r\n}) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [hasMore, setHasMore] = useState(false);\r\n    const [tickets, setTickets] = useState([]);\r\n    const [count, setCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            const fetchTickets = async() => {\r\n                try {\r\n                    const { data } = await api.get(\"/tickets\", {\r\n                        params: {\r\n                            searchParam,\r\n                            pageNumber,\r\n                            status,\r\n                            date,\r\n                            showAll,\r\n                            queueIds,\r\n                            withUnreadMessages,\r\n                        },\r\n                    })\r\n                    setTickets(data.tickets)\r\n\r\n                    let horasFecharAutomaticamente = getHoursCloseTicketsAuto(); \r\n\r\n                    if (status === \"open\" && horasFecharAutomaticamente && horasFecharAutomaticamente !== \"\" &&\r\n                        horasFecharAutomaticamente !== \"0\" && Number(horasFecharAutomaticamente) > 0) {\r\n\r\n                        let dataLimite = new Date()\r\n                        dataLimite.setHours(dataLimite.getHours() - Number(horasFecharAutomaticamente))\r\n\r\n                        data.tickets.forEach(ticket => {\r\n                            if (ticket.status !== \"closed\") {\r\n                                let dataUltimaInteracaoChamado = new Date(ticket.updatedAt)\r\n                                if (dataUltimaInteracaoChamado < dataLimite)\r\n                                    closeTicket(ticket)\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                    setHasMore(data.hasMore)\r\n                    setCount(data.count)\r\n                    setLoading(false)\r\n                } catch (err) {\r\n                    setLoading(false)\r\n                    toastError(err)\r\n                }\r\n            }\r\n\r\n            const closeTicket = async(ticket) => {\r\n                await api.put(`/tickets/${ticket.id}`, {\r\n                    status: \"closed\",\r\n                    userId: ticket.userId || null,\r\n                })\r\n            }\r\n\r\n            fetchTickets()\r\n        }, 500)\r\n        return () => clearTimeout(delayDebounceFn)\r\n    }, [\r\n        searchParam,\r\n        pageNumber,\r\n        status,\r\n        date,\r\n        showAll,\r\n        queueIds,\r\n        withUnreadMessages,\r\n    ])\r\n\r\n    return { tickets, loading, hasMore, count };\r\n};\r\n\r\nexport default useTickets;","import React, { useState, useRef, useEffect, useContext } from \"react\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { format } from \"date-fns\";\r\nimport openSocket from \"../../services/socket-io\";\r\nimport useSound from \"use-sound\";\r\n\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\n\r\nimport TicketListItem from \"../TicketListItem\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport alertSound from \"../../assets/sound.mp3\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabContainer: {\r\n\t\toverflowY: \"auto\",\r\n\t\tmaxHeight: 350,\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tpopoverPaper: {\r\n\t\twidth: \"100%\",\r\n\t\tmaxWidth: 350,\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tmaxWidth: 270,\r\n\t\t},\r\n\t},\r\n\tnoShadow: {\r\n\t\tboxShadow: \"none !important\",\r\n\t},\r\n}));\r\n\r\nconst NotificationsPopOver = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst history = useHistory();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst ticketIdUrl = +history.location.pathname.split(\"/\")[2];\r\n\tconst ticketIdRef = useRef(ticketIdUrl);\r\n\tconst anchorEl = useRef();\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst [notifications, setNotifications] = useState([]);\r\n\r\n\tconst [, setDesktopNotifications] = useState([]);\r\n\r\n\tconst { tickets } = useTickets({ withUnreadMessages: \"true\" });\r\n\tconst [play] = useSound(alertSound);\r\n\tconst soundAlertRef = useRef();\r\n\r\n\tconst historyRef = useRef(history);\r\n\r\n\tuseEffect(() => {\r\n\t\tsoundAlertRef.current = play;\r\n\r\n\t\tif (!(\"Notification\" in window)) {\r\n\t\t\tconsole.log(\"This browser doesn't support notifications\");\r\n\t\t} else {\r\n\t\t\tNotification.requestPermission();\r\n\t\t}\r\n\t}, [play]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetNotifications(tickets);\r\n\t}, [tickets]);\r\n\r\n\tuseEffect(() => {\r\n\t\tticketIdRef.current = ticketIdUrl;\r\n\t}, [ticketIdUrl]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = openSocket();\r\n\r\n\t\tsocket.on(\"connect\", () => socket.emit(\"joinNotification\"));\r\n\r\n\t\tsocket.on(\"ticket\", data => {\r\n\t\t\tif (data.action === \"updateUnread\" || data.action === \"delete\") {\r\n\t\t\t\tsetNotifications(prevState => {\r\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticketId);\r\n\t\t\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\t\t\tprevState.splice(ticketIndex, 1);\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn prevState;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetDesktopNotifications(prevState => {\r\n\t\t\t\t\tconst notfiticationIndex = prevState.findIndex(\r\n\t\t\t\t\t\tn => n.tag === String(data.ticketId)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (notfiticationIndex !== -1) {\r\n\t\t\t\t\t\tprevState[notfiticationIndex].close();\r\n\t\t\t\t\t\tprevState.splice(notfiticationIndex, 1);\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn prevState;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(\"appMessage\", data => {\r\n\t\t\tif (\r\n\t\t\t\tdata.action === \"create\" &&\r\n\t\t\t\t!data.message.read &&\r\n\t\t\t\t(data.ticket.userId === user?.id || !data.ticket.userId)\r\n\t\t\t) {\r\n\t\t\t\tsetNotifications(prevState => {\r\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticket.id);\r\n\t\t\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\t\t\tprevState[ticketIndex] = data.ticket;\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [data.ticket, ...prevState];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst shouldNotNotificate =\r\n\t\t\t\t\t(data.message.ticketId === ticketIdRef.current &&\r\n\t\t\t\t\t\tdocument.visibilityState === \"visible\") ||\r\n\t\t\t\t\t(data.ticket.userId && data.ticket.userId !== user?.id) ||\r\n\t\t\t\t\tdata.ticket.isGroup;\r\n\r\n\t\t\t\tif (shouldNotNotificate) return;\r\n\r\n\t\t\t\thandleNotifications(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [user]);\r\n\r\n\tconst handleNotifications = data => {\r\n\t\tconst { message, contact, ticket } = data;\r\n\r\n\t\tconst options = {\r\n\t\t\tbody: `${message.body} - ${format(new Date(), \"HH:mm\")}`,\r\n\t\t\ticon: contact.profilePicUrl,\r\n\t\t\ttag: ticket.id,\r\n\t\t\trenotify: true,\r\n\t\t};\r\n\r\n\t\tconst notification = new Notification(\r\n\t\t\t`${i18n.t(\"tickets.notification.message\")} ${contact.name}`,\r\n\t\t\toptions\r\n\t\t);\r\n\r\n\t\tnotification.onclick = e => {\r\n\t\t\te.preventDefault();\r\n\t\t\twindow.focus();\r\n\t\t\thistoryRef.current.push(`/tickets/${ticket.id}`);\r\n\t\t};\r\n\r\n\t\tsetDesktopNotifications(prevState => {\r\n\t\t\tconst notfiticationIndex = prevState.findIndex(\r\n\t\t\t\tn => n.tag === notification.tag\r\n\t\t\t);\r\n\t\t\tif (notfiticationIndex !== -1) {\r\n\t\t\t\tprevState[notfiticationIndex] = notification;\r\n\t\t\t\treturn [...prevState];\r\n\t\t\t}\r\n\t\t\treturn [notification, ...prevState];\r\n\t\t});\r\n\r\n\t\tsoundAlertRef.current();\r\n\t};\r\n\r\n\tconst handleClick = () => {\r\n\t\tsetIsOpen(prevState => !prevState);\r\n\t};\r\n\r\n\tconst handleClickAway = () => {\r\n\t\tsetIsOpen(false);\r\n\t};\r\n\r\n\tconst NotificationTicket = ({ children }) => {\r\n\t\treturn <div onClick={handleClickAway}>{children}</div>;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<IconButton\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t\tref={anchorEl}\r\n\t\t\t\taria-label=\"Open Notifications\"\r\n\t\t\t\tcolor=\"inherit\"\r\n\t\t\t>\r\n\t\t\t\t<Badge badgeContent={notifications.length} color=\"secondary\">\r\n\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t</Badge>\r\n\t\t\t</IconButton>\r\n\t\t\t<Popover\r\n\t\t\t\tdisableScrollLock\r\n\t\t\t\topen={isOpen}\r\n\t\t\t\tanchorEl={anchorEl.current}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\tclasses={{ paper: classes.popoverPaper }}\r\n\t\t\t\tonClose={handleClickAway}\r\n\t\t\t>\r\n\t\t\t\t<List dense className={classes.tabContainer}>\r\n\t\t\t\t\t{notifications.length === 0 ? (\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<ListItemText>{i18n.t(\"notifications.noTickets\")}</ListItemText>\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tnotifications.map(ticket => (\r\n\t\t\t\t\t\t\t<NotificationTicket key={ticket.id}>\r\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} />\r\n\t\t\t\t\t\t\t</NotificationTicket>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)}\r\n\t\t\t\t</List>\r\n\t\t\t</Popover>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default NotificationsPopOver;","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchips: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tchip: {\r\n\t\tmargin: 2,\r\n\t},\r\n}));\r\n\r\nconst QueueSelect = ({ selectedQueueIds, onChange }) => {\r\n\tconst classes = useStyles();\r\n\tconst [queues, setQueues] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(\"/queue\");\r\n\t\t\t\tsetQueues(data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t})();\r\n\t}, []);\r\n\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ marginTop: 6 }}>\r\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n\t\t\t\t<InputLabel>{i18n.t(\"queueSelect.inputLabel\")}</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tlabelWidth={60}\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenderValue={selected => (\r\n\t\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t\t{selected?.length > 0 &&\r\n\t\t\t\t\t\t\t\tselected.map(id => {\r\n\t\t\t\t\t\t\t\t\tconst queue = queues.find(q => q.id === id);\r\n\t\t\t\t\t\t\t\t\treturn queue ? (\r\n\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queue.color }}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={queue.name}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : null;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{queues.map(queue => (\r\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t{queue.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default QueueSelect;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n\tButton,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tCircularProgress,\r\n\tSelect,\r\n\tInputLabel,\r\n\tMenuItem,\r\n\tFormControl,\r\n\tTextField,\r\n\tInputAdornment,\r\n\tIconButton\r\n  } from '@material-ui/core';\r\n\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst UserModal = ({ open, onClose, userId }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\tprofile: \"user\"\r\n\t};\r\n\r\n\tconst { user: loggedInUser } = useContext(AuthContext);\r\n\r\n\tconst [user, setUser] = useState(initialState);\r\n\tconst [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\tconst [whatsappId, setWhatsappId] = useState(false);\r\n\tconst {loading, whatsApps} = useWhatsApps();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\tif (!userId) return;\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/users/${userId}`);\r\n\t\t\t\tsetUser(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...data };\r\n\t\t\t\t});\r\n\t\t\t\tconst userQueueIds = data.queues?.map(queue => queue.id);\r\n\t\t\t\tsetSelectedQueueIds(userQueueIds);\r\n\t\t\t\tsetWhatsappId(data.whatsappId ? data.whatsappId : '');\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchUser();\r\n\t}, [userId, open]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetUser(initialState);\r\n\t};\r\n\r\n\tconst handleSaveUser = async values => {\r\n\t\tconst userData = { ...values, whatsappId, queueIds: selectedQueueIds };\r\n\t\ttry {\r\n\t\t\tif (userId) {\r\n\t\t\t\tawait api.put(`/users/${userId}`, userData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/users\", userData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"userModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{userId\r\n\t\t\t\t\t\t? `${i18n.t(\"userModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"userModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={user}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={UserSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveUser(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.password\")}\r\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\r\n\t\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword((e) => !e)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <VisibilityOff /> : <Visibility />}\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.formControl}\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\r\n\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel id=\"profile-selection-input-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.profile\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.profile\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"profile\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelId=\"profile-selection-label\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"profile-selection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"admin\">Admin</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"user\">User</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editQueues\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t<QueueSelect\r\n\t\t\t\t\t\t\t\t\t\t\tselectedQueueIds={selectedQueueIds}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={values => setSelectedQueueIds(values)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editQueues\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (!loading &&\r\n\t\t\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" margin=\"dense\" className={classes.maxWidth} fullWidth>\r\n\t\t\t\t\t\t\t\t\t\t\t<InputLabel>{i18n.t(\"userModal.form.whatsapp\")}</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={whatsappId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWhatsappId(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.whatsapp\")}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value={''}>&nbsp;</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApps.map((whatsapp) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={whatsapp.id} value={whatsapp.id}>{whatsapp.name}</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{userId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"userModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"userModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UserModal;\r\n","import React from \"react\";\r\n\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbackdrop: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tcolor: \"#fff\",\r\n\t},\r\n}));\r\n\r\nconst BackdropLoading = () => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<Backdrop className={classes.backdrop} open={true}>\r\n\t\t\t<CircularProgress color=\"inherit\" />\r\n\t\t</Backdrop>\r\n\t);\r\n};\r\n\r\nexport default BackdropLoading;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\nimport {\r\n  makeStyles,\r\n  Drawer,\r\n  AppBar,\r\n  Toolbar,\r\n  List,\r\n  Typography,\r\n  Divider,\r\n  MenuItem,\r\n  IconButton,\r\n  Menu,\r\n} from \"@material-ui/core\";\r\n\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\n\r\nimport MainListItems from \"./MainListItems\";\r\nimport NotificationsPopOver from \"../components/NotificationsPopOver\";\r\nimport UserModal from \"../components/UserModal\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\nimport { i18n } from \"../translate/i18n\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100vh\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      height: \"calc(100vh - 56px)\",\r\n    },\r\n  },\r\n\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: \"0 8px\",\r\n    minHeight: \"48px\",\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  appBarSpacer: {\r\n    minHeight: \"48px\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: \"auto\",\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n}));\r\n\r\nconst LoggedInLayout = ({ children }) => {\r\n  const classes = useStyles();\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const { handleLogout, loading } = useContext(AuthContext);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [drawerVariant, setDrawerVariant] = useState(\"permanent\");\r\n  const { user } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth > 600) {\r\n      setDrawerOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerVariant(\"temporary\");\r\n    } else {\r\n      setDrawerVariant(\"permanent\");\r\n    }\r\n  }, [drawerOpen]);\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setMenuOpen(true);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const handleOpenUserModal = () => {\r\n    setUserModalOpen(true);\r\n    handleCloseMenu();\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    handleCloseMenu();\r\n    handleLogout();\r\n  };\r\n\r\n  const drawerClose = () => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <BackdropLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Drawer\r\n        variant={drawerVariant}\r\n        className={drawerOpen ? classes.drawerPaper : classes.drawerPaperClose}\r\n        classes={{\r\n          paper: clsx(\r\n            classes.drawerPaper,\r\n            !drawerOpen && classes.drawerPaperClose\r\n          ),\r\n        }}\r\n        open={drawerOpen}\r\n      >\r\n        <div className={classes.toolbarIcon}>\r\n          <IconButton onClick={() => setDrawerOpen(!drawerOpen)}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n          <MainListItems drawerClose={drawerClose} />\r\n        </List>\r\n        <Divider />\r\n      </Drawer>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={() => setUserModalOpen(false)}\r\n        userId={user?.id}\r\n      />\r\n      <AppBar\r\n        position=\"absolute\"\r\n        className={clsx(classes.appBar, drawerOpen && classes.appBarShift)}\r\n        color={process.env.NODE_ENV === \"development\" ? \"inherit\" : \"primary\"}\r\n      >\r\n        <Toolbar variant=\"dense\" className={classes.toolbar}>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={() => setDrawerOpen(!drawerOpen)}\r\n            className={clsx(\r\n              classes.menuButton,\r\n              drawerOpen && classes.menuButtonHidden\r\n            )}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography\r\n            component=\"h1\"\r\n            variant=\"h6\"\r\n            color=\"inherit\"\r\n            noWrap\r\n            className={classes.title}\r\n          >\r\n            WhaTicket\r\n          </Typography>\r\n          {user.id && <NotificationsPopOver />}\r\n\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMenu}\r\n              color=\"inherit\"\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              getContentAnchorEl={null}\r\n              anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"right\",\r\n              }}\r\n              transformOrigin={{\r\n                vertical: \"top\",\r\n                horizontal: \"right\",\r\n              }}\r\n              open={menuOpen}\r\n              onClose={handleCloseMenu}\r\n            >\r\n              <MenuItem onClick={handleOpenUserModal}>\r\n                {i18n.t(\"mainDrawer.appBar.user.profile\")}\r\n              </MenuItem>\r\n              <MenuItem onClick={handleClickLogout}>\r\n                {i18n.t(\"mainDrawer.appBar.user.logout\")}\r\n              </MenuItem>\r\n            </Menu>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <main className={classes.content}>\r\n        <div className={classes.appBarSpacer} />\r\n\r\n        {children ? children : null}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedInLayout;\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst Title = props => {\r\n\treturn (\r\n\t\t<Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n\t\t\t{props.children}\r\n\t\t</Typography>\r\n\t);\r\n};\r\n\r\nexport default Title;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport {\r\n\tBarChart,\r\n\tCartesianGrid,\r\n\tBar,\r\n\tXAxis,\r\n\tYAxis,\r\n\tLabel,\r\n\tResponsiveContainer,\r\n} from \"recharts\";\r\nimport { startOfHour, parseISO, format } from \"date-fns\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport Title from \"./Title\";\r\nimport useTickets from \"../../hooks/useTickets\";\r\n\r\nconst Chart = () => {\r\n\tconst theme = useTheme();\r\n\r\n\tconst date = useRef(new Date().toISOString());\r\n\tconst { tickets } = useTickets({ date: date.current });\r\n\r\n\tconst [chartData, setChartData] = useState([\r\n\t\t{ time: \"08:00\", amount: 0 },\r\n\t\t{ time: \"09:00\", amount: 0 },\r\n\t\t{ time: \"10:00\", amount: 0 },\r\n\t\t{ time: \"11:00\", amount: 0 },\r\n\t\t{ time: \"12:00\", amount: 0 },\r\n\t\t{ time: \"13:00\", amount: 0 },\r\n\t\t{ time: \"14:00\", amount: 0 },\r\n\t\t{ time: \"15:00\", amount: 0 },\r\n\t\t{ time: \"16:00\", amount: 0 },\r\n\t\t{ time: \"17:00\", amount: 0 },\r\n\t\t{ time: \"18:00\", amount: 0 },\r\n\t\t{ time: \"19:00\", amount: 0 },\r\n\t]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetChartData(prevState => {\r\n\t\t\tlet aux = [...prevState];\r\n\r\n\t\t\taux.forEach(a => {\r\n\t\t\t\ttickets.forEach(ticket => {\r\n\t\t\t\t\tformat(startOfHour(parseISO(ticket.createdAt)), \"HH:mm\") === a.time &&\r\n\t\t\t\t\t\ta.amount++;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn aux;\r\n\t\t});\r\n\t}, [tickets]);\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Title>{`${i18n.t(\"dashboard.charts.perDay.title\")}${\r\n\t\t\t\ttickets.length\r\n\t\t\t}`}</Title>\r\n\t\t\t<ResponsiveContainer>\r\n\t\t\t\t<BarChart\r\n\t\t\t\t\tdata={chartData}\r\n\t\t\t\t\tbarSize={40}\r\n\t\t\t\t\twidth={730}\r\n\t\t\t\t\theight={250}\r\n\t\t\t\t\tmargin={{\r\n\t\t\t\t\t\ttop: 16,\r\n\t\t\t\t\t\tright: 16,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tleft: 24,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\r\n\t\t\t\t\t<XAxis dataKey=\"time\" stroke={theme.palette.text.secondary} />\r\n\t\t\t\t\t<YAxis\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tallowDecimals={false}\r\n\t\t\t\t\t\tstroke={theme.palette.text.secondary}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Label\r\n\t\t\t\t\t\t\tangle={270}\r\n\t\t\t\t\t\t\tposition=\"left\"\r\n\t\t\t\t\t\t\tstyle={{ textAnchor: \"middle\", fill: theme.palette.text.primary }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tTickets\r\n\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t</YAxis>\r\n\t\t\t\t\t<Bar dataKey=\"amount\" fill={theme.palette.primary.main} />\r\n\t\t\t\t</BarChart>\r\n\t\t\t</ResponsiveContainer>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default Chart;\r\n","import React, { useContext } from \"react\"\r\n\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport Container from \"@material-ui/core/Container\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport useTickets from \"../../hooks/useTickets\"\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport Chart from \"./Chart\"\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tpaddingTop: theme.spacing(4),\r\n\t\tpaddingBottom: theme.spacing(4),\r\n\t},\r\n\tfixedHeightPaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\toverflow: \"auto\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: 240,\r\n\t},\r\n\tcustomFixedHeightPaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\toverflow: \"auto\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: 120,\r\n\t},\r\n\tcustomFixedHeightPaperLg: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\toverflow: \"auto\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: \"100%\",\r\n\t},\r\n}))\r\n\r\nconst Dashboard = () => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst { user } = useContext(AuthContext);\r\n\tvar userQueueIds = [];\r\n\r\n\tif (user.queues && user.queues.length > 0) {\r\n\t\tuserQueueIds = user.queues.map(q => q.id);\r\n\t}\r\n\r\n\tconst GetTickets = (status, showAll, withUnreadMessages) => {\r\n\r\n\t\tconst { count } = useTickets({\r\n\t\t\tstatus: status,\r\n\t\t\tshowAll: showAll,\r\n\t\t\twithUnreadMessages: withUnreadMessages,\r\n\t\t\tqueueIds: JSON.stringify(userQueueIds)\r\n\t\t});\r\n\t\treturn count;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Container maxWidth=\"lg\" className={classes.container}>\r\n\t\t\t\t<Grid container spacing={3}>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<Paper className={classes.customFixedHeightPaper} style={{ overflow: \"hidden\" }}>\r\n\t\t\t\t\t\t\t<Typography component=\"h3\" variant=\"h6\" color=\"primary\" paragraph>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"dashboard.messages.inAttendance.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h4\">\r\n\t\t\t\t\t\t\t\t\t{GetTickets(\"open\", \"true\", \"false\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<Paper className={classes.customFixedHeightPaper} style={{ overflow: \"hidden\" }}>\r\n\t\t\t\t\t\t\t<Typography component=\"h3\" variant=\"h6\" color=\"primary\" paragraph>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"dashboard.messages.waiting.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h4\">\r\n\t\t\t\t\t\t\t\t\t{GetTickets(\"pending\", \"true\", \"false\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<Paper className={classes.customFixedHeightPaper} style={{ overflow: \"hidden\" }}>\r\n\t\t\t\t\t\t\t<Typography component=\"h3\" variant=\"h6\" color=\"primary\" paragraph>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"dashboard.messages.closed.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h4\">\r\n\t\t\t\t\t\t\t\t\t{GetTickets(\"closed\", \"true\", \"false\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Paper className={classes.fixedHeightPaper}>\r\n\t\t\t\t\t\t\t<Chart />\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Container>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Dashboard","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, FieldArray, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\textraAttr: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst ContactModal = ({ open, onClose, contactId, initialValues, onSave }) => {\r\n\tconst classes = useStyles();\r\n\tconst isMounted = useRef(true);\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tnumber: \"\",\r\n\t\temail: \"\",\r\n\t};\r\n\r\n\tconst [contact, setContact] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchContact = async () => {\r\n\t\t\tif (initialValues) {\r\n\t\t\t\tsetContact(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...initialValues };\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!contactId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/contacts/${contactId}`);\r\n\t\t\t\tif (isMounted.current) {\r\n\t\t\t\t\tsetContact(data);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchContact();\r\n\t}, [contactId, open, initialValues]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetContact(initialState);\r\n\t};\r\n\r\n\tconst handleSaveContact = async values => {\r\n\t\ttry {\r\n\t\t\tif (contactId) {\r\n\t\t\t\tawait api.put(`/contacts/${contactId}`, values);\r\n\t\t\t\thandleClose();\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\r\n\t\t\t\tif (onSave) {\r\n\t\t\t\t\tonSave(data);\r\n\t\t\t\t}\r\n\t\t\t\thandleClose();\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog open={open} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t? `${i18n.t(\"contactModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"contactModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={contact}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={ContactSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveContact(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ values, errors, touched, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.mainInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.number\")}\r\n\t\t\t\t\t\t\t\t\tname=\"number\"\r\n\t\t\t\t\t\t\t\t\terror={touched.number && Boolean(errors.number)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.number && errors.number}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"5513912344321\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email address\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 8, marginTop: 12 }}\r\n\t\t\t\t\t\t\t\t\tvariant=\"subtitle1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.extraInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t<FieldArray name=\"extraInfo\">\r\n\t\t\t\t\t\t\t\t\t{({ push, remove }) => (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{values.extraInfo &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.map((info, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.extraAttr}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${index}-info`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraName\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].name`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraValue\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].value`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => remove(index)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutlineIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.extraAttr}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 1, marginTop: 8 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => push({ name: \"\", value: \"\" })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{`+ ${i18n.t(\"contactModal.buttons.addExtraInfo\")}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</FieldArray>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactModal;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Autocomplete, {\r\n\tcreateFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ContactModal from \"../ContactModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst filter = createFilterOptions({\r\n\ttrim: true,\r\n});\r\n\r\nconst NewTicketModal = ({ modalOpen, onClose }) => {\r\n\tconst history = useHistory();\r\n\r\n\tconst [options, setOptions] = useState([]);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [searchParam, setSearchParam] = useState(\"\");\r\n\tconst [selectedContact, setSelectedContact] = useState(null);\r\n\tconst [newContact, setNewContact] = useState({});\r\n\tconst [contactModalOpen, setContactModalOpen] = useState(false);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!modalOpen || searchParam.length < 3) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\t\tconst delayDebounceFn = setTimeout(() => {\r\n\t\t\tconst fetchContacts = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { data } = await api.get(\"contacts\", {\r\n\t\t\t\t\t\tparams: { searchParam },\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetOptions(data.contacts);\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\ttoastError(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfetchContacts();\r\n\t\t}, 500);\r\n\t\treturn () => clearTimeout(delayDebounceFn);\r\n\t}, [searchParam, modalOpen]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetSearchParam(\"\");\r\n\t\tsetSelectedContact(null);\r\n\t};\r\n\r\n\tconst handleSaveTicket = async contactId => {\r\n\t\tif (!contactId) return;\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst { data: ticket } = await api.post(\"/tickets\", {\r\n\t\t\t\tcontactId: contactId,\r\n\t\t\t\tuserId: user.id,\r\n\t\t\t\tstatus: \"open\",\r\n\t\t\t});\r\n\t\t\thistory.push(`/tickets/${ticket.id}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleSelectOption = (e, newValue) => {\r\n\t\tif (newValue?.number) {\r\n\t\t\tsetSelectedContact(newValue);\r\n\t\t} else if (newValue?.name) {\r\n\t\t\tsetNewContact({ name: newValue.name });\r\n\t\t\tsetContactModalOpen(true);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleCloseContactModal = () => {\r\n\t\tsetContactModalOpen(false);\r\n\t};\r\n\r\n\tconst handleAddNewContactTicket = contact => {\r\n\t\thandleSaveTicket(contact.id);\r\n\t};\r\n\r\n\tconst createAddContactOption = (filterOptions, params) => {\r\n\t\tconst filtered = filter(filterOptions, params);\r\n\r\n\t\tif (params.inputValue !== \"\" && !loading && searchParam.length >= 3) {\r\n\t\t\tfiltered.push({\r\n\t\t\t\tname: `${params.inputValue}`,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn filtered;\r\n\t};\r\n\r\n\tconst renderOption = option => {\r\n\t\tif (option.number) {\r\n\t\t\treturn `${option.name} - ${option.number}`;\r\n\t\t} else {\r\n\t\t\treturn `${i18n.t(\"newTicketModal.add\")} ${option.name}`;\r\n\t\t}\r\n\t};\r\n\r\n\tconst renderOptionLabel = option => {\r\n\t\tif (option.number) {\r\n\t\t\treturn `${option.name} - ${option.number}`;\r\n\t\t} else {\r\n\t\t\treturn `${option.name}`;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ContactModal\r\n\t\t\t\topen={contactModalOpen}\r\n\t\t\t\tinitialValues={newContact}\r\n\t\t\t\tonClose={handleCloseContactModal}\r\n\t\t\t\tonSave={handleAddNewContactTicket}\r\n\t\t\t></ContactModal>\r\n\t\t\t<Dialog open={modalOpen} onClose={handleClose}>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{i18n.t(\"newTicketModal.title\")}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tstyle={{ width: 300 }}\r\n\t\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\tfreeSolo\r\n\t\t\t\t\t\tclearOnEscape\r\n\t\t\t\t\t\tgetOptionLabel={renderOptionLabel}\r\n\t\t\t\t\t\trenderOption={renderOption}\r\n\t\t\t\t\t\tfilterOptions={createAddContactOption}\r\n\t\t\t\t\t\tonChange={(e, newValue) => handleSelectOption(e, newValue)}\r\n\t\t\t\t\t\trenderInput={params => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t{...params}\r\n\t\t\t\t\t\t\t\tlabel={i18n.t(\"newTicketModal.fieldLabel\")}\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\tonChange={e => setSearchParam(e.target.value)}\r\n\t\t\t\t\t\t\t\tonKeyPress={e => {\r\n\t\t\t\t\t\t\t\t\tif (loading || !selectedContact) return;\r\n\t\t\t\t\t\t\t\t\telse if (e.key === \"Enter\") {\r\n\t\t\t\t\t\t\t\t\t\thandleSaveTicket(selectedContact.id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t...params.InputProps,\r\n\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CircularProgress color=\"inherit\" size={20} />\r\n\t\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t\t\t{params.InputProps.endAdornment}\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"newTicketModal.buttons.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tdisabled={!selectedContact}\r\n\t\t\t\t\t\tonClick={() => handleSaveTicket(selectedContact.id)}\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"newTicketModal.buttons.ok\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default NewTicketModal;\r\n","import React from \"react\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nconst TicketsSkeleton = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={70} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={120} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketsSkeleton;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport openSocket from \"../../services/socket-io\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport TicketListItem from \"../TicketListItem\";\r\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\r\n\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketsListWrapper: {\r\n\t\tposition: \"relative\",\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t\toverflow: \"hidden\",\r\n\t\tborderTopRightRadius: 0,\r\n\t\tborderBottomRightRadius: 0,\r\n\t},\r\n\r\n\tticketsList: {\r\n\t\tflex: 1,\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t\tborderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\r\n\t},\r\n\r\n\tticketsListHeader: {\r\n\t\tcolor: \"rgb(67, 83, 105)\",\r\n\t\tzIndex: 2,\r\n\t\tbackgroundColor: \"white\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t},\r\n\r\n\tticketsCount: {\r\n\t\tfontWeight: \"normal\",\r\n\t\tcolor: \"rgb(104, 121, 146)\",\r\n\t\tmarginLeft: \"8px\",\r\n\t\tfontSize: \"14px\",\r\n\t},\r\n\r\n\tnoTicketsText: {\r\n\t\ttextAlign: \"center\",\r\n\t\tcolor: \"rgb(104, 121, 146)\",\r\n\t\tfontSize: \"14px\",\r\n\t\tlineHeight: \"1.4\",\r\n\t},\r\n\r\n\tnoTicketsTitle: {\r\n\t\ttextAlign: \"center\",\r\n\t\tfontSize: \"16px\",\r\n\t\tfontWeight: \"600\",\r\n\t\tmargin: \"0px\",\r\n\t},\r\n\r\n\tnoTicketsDiv: {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100px\",\r\n\t\tmargin: 40,\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n\tif (action.type === \"LOAD_TICKETS\") {\r\n\t\tconst newTickets = action.payload;\r\n\r\n\t\tnewTickets.forEach(ticket => {\r\n\t\t\tconst ticketIndex = state.findIndex(t => t.id === ticket.id);\r\n\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\tstate[ticketIndex] = ticket;\r\n\t\t\t\tif (ticket.unreadMessages > 0) {\r\n\t\t\t\t\tstate.unshift(state.splice(ticketIndex, 1)[0]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstate.push(ticket);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"RESET_UNREAD\") {\r\n\t\tconst ticketId = action.payload;\r\n\r\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticketId);\r\n\t\tif (ticketIndex !== -1) {\r\n\t\t\tstate[ticketIndex].unreadMessages = 0;\r\n\t\t}\r\n\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"UPDATE_TICKET\") {\r\n\t\tconst ticket = action.payload;\r\n\r\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticket.id);\r\n\t\tif (ticketIndex !== -1) {\r\n\t\t\tstate[ticketIndex] = ticket;\r\n\t\t} else {\r\n\t\t\tstate.unshift(ticket);\r\n\t\t}\r\n\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\r\n\t\tconst ticket = action.payload;\r\n\r\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticket.id);\r\n\t\tif (ticketIndex !== -1) {\r\n\t\t\tstate[ticketIndex] = ticket;\r\n\t\t\tstate.unshift(state.splice(ticketIndex, 1)[0]);\r\n\t\t} else {\r\n\t\t\tstate.unshift(ticket);\r\n\t\t}\r\n\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"UPDATE_TICKET_CONTACT\") {\r\n\t\tconst contact = action.payload;\r\n\t\tconst ticketIndex = state.findIndex(t => t.contactId === contact.id);\r\n\t\tif (ticketIndex !== -1) {\r\n\t\t\tstate[ticketIndex].contact = contact;\r\n\t\t}\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"DELETE_TICKET\") {\r\n\t\tconst ticketId = action.payload;\r\n\t\tconst ticketIndex = state.findIndex(t => t.id === ticketId);\r\n\t\tif (ticketIndex !== -1) {\r\n\t\t\tstate.splice(ticketIndex, 1);\r\n\t\t}\r\n\r\n\t\treturn [...state];\r\n\t}\r\n\r\n\tif (action.type === \"RESET\") {\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\n\tconst TicketsList = (props) => {\r\n\t\tconst { status, searchParam, showAll, selectedQueueIds, updateCount, style } =\r\n\t\t\tprops;\r\n\tconst classes = useStyles();\r\n\tconst [pageNumber, setPageNumber] = useState(1);\r\n\tconst [ticketsList, dispatch] = useReducer(reducer, []);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch({ type: \"RESET\" });\r\n\t\tsetPageNumber(1);\r\n\t}, [status, searchParam, dispatch, showAll, selectedQueueIds]);\r\n\r\n\tconst { tickets, hasMore, loading } = useTickets({\r\n\t\tpageNumber,\r\n\t\tsearchParam,\r\n\t\tstatus,\r\n\t\tshowAll,\r\n\t\tqueueIds: JSON.stringify(selectedQueueIds),\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!status && !searchParam) return;\r\n\t\tdispatch({\r\n\t\t\ttype: \"LOAD_TICKETS\",\r\n\t\t\tpayload: tickets,\r\n\t\t});\r\n\t}, [tickets]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = openSocket();\r\n\r\n\t\tconst shouldUpdateTicket = ticket => !searchParam &&\r\n\t\t\t(!ticket.userId || ticket.userId === user?.id || showAll) &&\r\n\t\t\t(!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\r\n\r\n\t\tconst notBelongsToUserQueues = ticket =>\r\n\t\t\tticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\r\n\r\n\t\tsocket.on(\"connect\", () => {\r\n\t\t\tif (status) {\r\n\t\t\t\tsocket.emit(\"joinTickets\", status);\r\n\t\t\t} else {\r\n\t\t\t\tsocket.emit(\"joinNotification\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(\"ticket\", data => {\r\n\t\t\tif (data.action === \"updateUnread\") {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"RESET_UNREAD\",\r\n\t\t\t\t\tpayload: data.ticketId,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (data.action === \"update\" && shouldUpdateTicket(data.ticket)) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_TICKET\",\r\n\t\t\t\t\tpayload: data.ticket,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\r\n\t\t\t\tdispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\r\n\t\t\t}\r\n\r\n\t\t\tif (data.action === \"delete\") {\r\n\t\t\t\tdispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(\"appMessage\", data => {\r\n\t\t\tif (data.action === \"create\" && shouldUpdateTicket(data.ticket)) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_TICKET_UNREAD_MESSAGES\",\r\n\t\t\t\t\tpayload: data.ticket,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(\"contact\", data => {\r\n\t\t\tif (data.action === \"update\") {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: \"UPDATE_TICKET_CONTACT\",\r\n\t\t\t\t\tpayload: data.contact,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [status, searchParam, showAll, user, selectedQueueIds]);\r\n\r\n\tuseEffect(() => {\r\n    if (typeof updateCount === \"function\") {\r\n      updateCount(ticketsList.length);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ticketsList]);\r\n\r\n\tconst loadMore = () => {\r\n\t\tsetPageNumber(prevState => prevState + 1);\r\n\t};\r\n\r\n\tconst handleScroll = e => {\r\n\t\tif (!hasMore || loading) return;\r\n\r\n\t\tconst { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n\r\n\t\tif (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n\t\t\te.currentTarget.scrollTop = scrollTop - 100;\r\n\t\t\tloadMore();\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n    <Paper className={classes.ticketsListWrapper} style={style}>\r\n\t\t\t<Paper\r\n\t\t\t\tsquare\r\n\t\t\t\tname=\"closed\"\r\n\t\t\t\televation={0}\r\n\t\t\t\tclassName={classes.ticketsList}\r\n\t\t\t\tonScroll={handleScroll}\r\n\t\t\t>\r\n\t\t\t\t<List style={{ paddingTop: 0 }}>\r\n\t\t\t\t\t{ticketsList.length === 0 && !loading ? (\r\n\t\t\t\t\t\t<div className={classes.noTicketsDiv}>\r\n\t\t\t\t\t\t\t<span className={classes.noTicketsTitle}>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"ticketsList.noTicketsTitle\")}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<p className={classes.noTicketsText}>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"ticketsList.noTicketsMessage\")}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{ticketsList.map(ticket => (\r\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} key={ticket.id} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{loading && <TicketsListSkeleton />}\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n    </Paper>\r\n\t);\r\n};\r\n\r\nexport default TicketsList;\r\n","import React from \"react\";\r\n\r\nconst TabPanel = ({ children, value, name, ...rest }) => {\r\n\tif (value === name) {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\trole=\"tabpanel\"\r\n\t\t\t\tid={`simple-tabpanel-${name}`}\r\n\t\t\t\taria-labelledby={`simple-tab-${name}`}\r\n\t\t\t\t{...rest}\r\n\t\t\t>\r\n\t\t\t\t<>{children}</>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else return null;\r\n};\r\n\r\nexport default TabPanel;\r\n","import React from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { Checkbox, ListItemText } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst TicketsQueueSelect = ({\r\n\tuserQueues,\r\n\tselectedQueueIds = [],\r\n\tonChange,\r\n}) => {\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ width: 120, marginTop: -4 }}>\r\n\t\t\t<FormControl fullWidth margin=\"dense\">\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenderValue={() => i18n.t(\"ticketsQueueSelect.placeholder\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{userQueues?.length > 0 &&\r\n\t\t\t\t\t\tuserQueues.map(queue => (\r\n\t\t\t\t\t\t\t<MenuItem dense key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: queue.color,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tchecked={selectedQueueIds.indexOf(queue.id) > -1}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={queue.name} />\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketsQueueSelect;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport MoveToInboxIcon from \"@material-ui/icons/MoveToInbox\";\r\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\r\n\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nimport NewTicketModal from \"../NewTicketModal\";\r\nimport TicketsList from \"../TicketsList\";\r\nimport TabPanel from \"../TabPanel\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport TicketsQueueSelect from \"../TicketsQueueSelect\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticketsWrapper: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n  },\r\n\r\n  tabsHeader: {\r\n    flex: \"none\",\r\n    backgroundColor: \"#eee\",\r\n  },\r\n\r\n  settingsIcon: {\r\n    alignSelf: \"center\",\r\n    marginLeft: \"auto\",\r\n    padding: 8,\r\n  },\r\n\r\n  tab: {\r\n    minWidth: 120,\r\n    width: 120,\r\n  },\r\n\r\n  ticketOptionsBox: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    background: \"#fafafa\",\r\n    padding: theme.spacing(1),\r\n  },\r\n\r\n  serachInputWrapper: {\r\n    flex: 1,\r\n    background: \"#fff\",\r\n    display: \"flex\",\r\n    borderRadius: 40,\r\n    padding: 4,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n\r\n  searchIcon: {\r\n    color: \"grey\",\r\n    marginLeft: 6,\r\n    marginRight: 6,\r\n    alignSelf: \"center\",\r\n  },\r\n\r\n  searchInput: {\r\n    flex: 1,\r\n    border: \"none\",\r\n    borderRadius: 30,\r\n  },\r\n\r\n  badge: {\r\n    right: \"-10px\",\r\n  },\r\n  show: {\r\n    display: \"block\",\r\n  },\r\n  hide: {\r\n    display: \"none !important\",\r\n  },\r\n}));\r\n\r\nconst TicketsManager = () => {\r\n  const classes = useStyles();\r\n\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [tab, setTab] = useState(\"open\");\r\n  const [tabOpen, setTabOpen] = useState(\"open\");\r\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\r\n  const [showAllTickets, setShowAllTickets] = useState(false);\r\n  const searchInputRef = useRef();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [openCount, setOpenCount] = useState(0);\r\n  const [pendingCount, setPendingCount] = useState(0);\r\n\r\n  const userQueueIds = user.queues.map((q) => q.id);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState(userQueueIds || []);\r\n\r\n  useEffect(() => {\r\n    if (user.profile.toUpperCase() === \"ADMIN\") {\r\n      setShowAllTickets(true);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (tab === \"search\") {\r\n      searchInputRef.current.focus();\r\n      setSearchParam(\"\");\r\n    }\r\n  }, [tab]);\r\n\r\n  let searchTimeout;\r\n\r\n  const handleSearch = (e) => {\r\n    const searchedTerm = e.target.value.toLowerCase();\r\n\r\n    clearTimeout(searchTimeout);\r\n\r\n    if (searchedTerm === \"\") {\r\n      setSearchParam(searchedTerm);\r\n      setTab(\"open\");\r\n      return;\r\n    }\r\n\r\n    searchTimeout = setTimeout(() => {\r\n      setSearchParam(searchedTerm);\r\n    }, 500);\r\n  };\r\n\r\n  const handleChangeTab = (e, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleChangeTabOpen = (e, newValue) => {\r\n    setTabOpen(newValue);\r\n  };\r\n\r\n  const applyPanelStyle = (status) => {\r\n    if (tabOpen !== status) {\r\n      return { width: 0, height: 0 };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={0} variant=\"outlined\" className={classes.ticketsWrapper}>\r\n      <NewTicketModal\r\n        modalOpen={newTicketModalOpen}\r\n        onClose={(e) => setNewTicketModalOpen(false)}\r\n      />\r\n      <Paper elevation={0} square className={classes.tabsHeader}>\r\n        <Tabs\r\n          value={tab}\r\n          onChange={handleChangeTab}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"icon label tabs example\"\r\n        >\r\n          <Tab\r\n            value={\"open\"}\r\n            icon={<MoveToInboxIcon />}\r\n            label={i18n.t(\"tickets.tabs.open.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"closed\"}\r\n            icon={<CheckBoxIcon />}\r\n            label={i18n.t(\"tickets.tabs.closed.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"search\"}\r\n            icon={<SearchIcon />}\r\n            label={i18n.t(\"tickets.tabs.search.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n        </Tabs>\r\n      </Paper>\r\n      <Paper square elevation={0} className={classes.ticketOptionsBox}>\r\n        {tab === \"search\" ? (\r\n          <div className={classes.serachInputWrapper}>\r\n            <SearchIcon className={classes.searchIcon} />\r\n            <InputBase\r\n              className={classes.searchInput}\r\n              inputRef={searchInputRef}\r\n              placeholder={i18n.t(\"tickets.search.placeholder\")}\r\n              type=\"search\"\r\n              onChange={handleSearch}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setNewTicketModalOpen(true)}\r\n            >\r\n              {i18n.t(\"ticketsManager.buttons.newTicket\")}\r\n            </Button>\r\n            <Can\r\n              role={user.profile}\r\n              perform=\"tickets-manager:showall\"\r\n              yes={() => (\r\n                <FormControlLabel\r\n                  label={i18n.t(\"tickets.buttons.showAll\")}\r\n                  labelPlacement=\"start\"\r\n                  control={\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={showAllTickets}\r\n                      onChange={() =>\r\n                        setShowAllTickets((prevState) => !prevState)\r\n                      }\r\n                      name=\"showAllTickets\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                />\r\n              )}\r\n            />\r\n          </>\r\n        )}\r\n        <TicketsQueueSelect\r\n          style={{ marginLeft: 6 }}\r\n          selectedQueueIds={selectedQueueIds}\r\n          userQueues={user?.queues}\r\n          onChange={(values) => setSelectedQueueIds(values)}\r\n        />\r\n      </Paper>\r\n      <TabPanel value={tab} name=\"open\" className={classes.ticketsWrapper}>\r\n        <Tabs\r\n          value={tabOpen}\r\n          onChange={handleChangeTabOpen}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n        >\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={openCount}\r\n                color=\"primary\"\r\n              >\r\n                {i18n.t(\"ticketsList.assignedHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"open\"}\r\n          />\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={pendingCount}\r\n                color=\"secondary\"\r\n              >\r\n                {i18n.t(\"ticketsList.pendingHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"pending\"}\r\n          />\r\n        </Tabs>\r\n        <Paper className={classes.ticketsWrapper}>\r\n          <TicketsList\r\n            status=\"open\"\r\n            showAll={showAllTickets}\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setOpenCount(val)}\r\n            style={applyPanelStyle(\"open\")}\r\n          />\r\n          <TicketsList\r\n            status=\"pending\"\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setPendingCount(val)}\r\n            style={applyPanelStyle(\"pending\")}\r\n          />\r\n        </Paper>\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"closed\" className={classes.ticketsWrapper}>\r\n        <TicketsList\r\n          status=\"closed\"\r\n          showAll={true}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"search\" className={classes.ticketsWrapper}>\r\n        <TicketsList\r\n          searchParam={searchParam}\r\n          showAll={true}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TicketsManager;\r\n","import React from \"react\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst ContactDrawerSkeleton = ({ classes }) => {\r\n\treturn (\r\n\t\t<div className={classes.content}>\r\n\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\r\n\t\t\t\t<Skeleton\r\n\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\tvariant=\"circle\"\r\n\t\t\t\t\twidth={160}\r\n\t\t\t\t\theight={160}\r\n\t\t\t\t\tclassName={classes.contactAvatar}\r\n\t\t\t\t/>\r\n\t\t\t\t<Skeleton animation=\"wave\" height={25} width={90} />\r\n\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\r\n\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\r\n\t\t\t</Paper>\r\n\t\t\t<Paper square className={classes.contactDetails}>\r\n\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactDrawerSkeleton;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport ContactModal from \"../ContactModal\";\r\nimport ContactDrawerSkeleton from \"../ContactDrawerSkeleton\";\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tdisplay: \"flex\",\r\n\t\tborderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderRight: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderTopRightRadius: 4,\r\n\t\tborderBottomRightRadius: 4,\r\n\t},\r\n\theader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tbackgroundColor: \"#eee\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: theme.spacing(0, 1),\r\n\t\tminHeight: \"73px\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t},\r\n\tcontent: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: \"#eee\",\r\n\t\tflexDirection: \"column\",\r\n\t\tpadding: \"8px 0px 8px 8px\",\r\n\t\theight: \"100%\",\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\r\n\tcontactAvatar: {\r\n\t\tmargin: 15,\r\n\t\twidth: 160,\r\n\t\theight: 160,\r\n\t},\r\n\r\n\tcontactHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tpadding: 8,\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: 4,\r\n\t\t},\r\n\t},\r\n\r\n\tcontactDetails: {\r\n\t\tmarginTop: 8,\r\n\t\tpadding: 8,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n\tcontactExtraInfo: {\r\n\t\tmarginTop: 4,\r\n\t\tpadding: 6,\r\n\t},\r\n}));\r\n\r\nconst ContactDrawer = ({ open, handleDrawerClose, contact, loading }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [modalOpen, setModalOpen] = useState(false);\r\n\r\n\treturn (\r\n\t\t<Drawer\r\n\t\t\tclassName={classes.drawer}\r\n\t\t\tvariant=\"persistent\"\r\n\t\t\tanchor=\"right\"\r\n\t\t\topen={open}\r\n\t\t\tPaperProps={{ style: { position: \"absolute\" } }}\r\n\t\t\tBackdropProps={{ style: { position: \"absolute\" } }}\r\n\t\t\tModalProps={{\r\n\t\t\t\tcontainer: document.getElementById(\"drawer-container\"),\r\n\t\t\t\tstyle: { position: \"absolute\" },\r\n\t\t\t}}\r\n\t\t\tclasses={{\r\n\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div className={classes.header}>\r\n\t\t\t\t<IconButton onClick={handleDrawerClose}>\r\n\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<Typography style={{ justifySelf: \"center\" }}>\r\n\t\t\t\t\t{i18n.t(\"contactDrawer.header\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<ContactDrawerSkeleton classes={classes} />\r\n\t\t\t) : (\r\n\t\t\t\t<div className={classes.content}>\r\n\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\talt={contact.name}\r\n\t\t\t\t\t\t\tsrc={contact.profilePicUrl}\r\n\t\t\t\t\t\t\tclassName={classes.contactAvatar}\r\n\t\t\t\t\t\t></Avatar>\r\n\r\n\t\t\t\t\t\t<Typography>{contact.name}</Typography>\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t<Link href={`tel:${contact.number}`}>{contact.number}</Link>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => setModalOpen(true)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.buttons.edit\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactDetails}>\r\n\t\t\t\t\t\t<ContactModal\r\n\t\t\t\t\t\t\topen={modalOpen}\r\n\t\t\t\t\t\t\tonClose={() => setModalOpen(false)}\r\n\t\t\t\t\t\t\tcontactId={contact.id}\r\n\t\t\t\t\t\t></ContactModal>\r\n\t\t\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t{contact?.extraInfo?.map(info => (\r\n\t\t\t\t\t\t\t<Paper\r\n\t\t\t\t\t\t\t\tkey={info.id}\r\n\t\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tclassName={classes.contactExtraInfo}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<InputLabel>{info.name}</InputLabel>\r\n\t\t\t\t\t\t\t\t<Typography component=\"div\" noWrap style={{ paddingTop: 2 }}>\r\n\t\t\t\t\t\t\t\t\t<MarkdownWrapper>{info.value}</MarkdownWrapper>\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Paper>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Drawer>\r\n\t);\r\n};\r\n\r\nexport default ContactDrawer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttimerBox: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmarginLeft: 10,\r\n\t\tmarginRight: 10,\r\n\t\talignItems: \"center\",\r\n\t},\r\n}));\r\n\r\nconst RecordingTimer = () => {\r\n\tconst classes = useStyles();\r\n\tconst initialState = {\r\n\t\tminutes: 0,\r\n\t\tseconds: 0,\r\n\t};\r\n\tconst [timer, setTimer] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(\r\n\t\t\t() =>\r\n\t\t\t\tsetTimer(prevState => {\r\n\t\t\t\t\tif (prevState.seconds === 59) {\r\n\t\t\t\t\t\treturn { ...prevState, minutes: prevState.minutes + 1, seconds: 0 };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn { ...prevState, seconds: prevState.seconds + 1 };\r\n\t\t\t\t}),\r\n\t\t\t1000\r\n\t\t);\r\n\t\treturn () => {\r\n\t\t\tclearInterval(interval);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst addZero = n => {\r\n\t\treturn n < 10 ? \"0\" + n : n;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.timerBox}>\r\n\t\t\t<span>{`${addZero(timer.minutes)}:${addZero(timer.seconds)}`}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RecordingTimer;\r\n","import React, { useState, createContext } from \"react\";\r\n\r\nconst ReplyMessageContext = createContext();\r\n\r\nconst ReplyMessageProvider = ({ children }) => {\r\n\tconst [replyingMessage, setReplyingMessage] = useState(null);\r\n\r\n\treturn (\r\n\t\t<ReplyMessageContext.Provider\r\n\t\t\tvalue={{ replyingMessage, setReplyingMessage }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ReplyMessageContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { ReplyMessageContext, ReplyMessageProvider };\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport MicRecorder from \"mic-recorder-to-mp3\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MoreVert from \"@material-ui/icons/MoreVert\";\r\nimport MoodIcon from \"@material-ui/icons/Mood\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport {\r\n  FormControlLabel,\r\n  Hidden,\r\n  Menu,\r\n  MenuItem,\r\n  Switch,\r\n} from \"@material-ui/core\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport RecordingTimer from \"./RecordingTimer\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    background: \"#eee\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      position: \"fixed\",\r\n      bottom: 0,\r\n      width: \"100%\",\r\n    },\r\n  },\r\n\r\n  newMessageBox: {\r\n    background: \"#eee\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    padding: \"7px\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  messageInputWrapper: {\r\n    padding: 6,\r\n    marginRight: 7,\r\n    background: \"#fff\",\r\n    display: \"flex\",\r\n    borderRadius: 20,\r\n    flex: 1,\r\n    position: \"relative\",\r\n  },\r\n\r\n  messageInput: {\r\n    paddingLeft: 10,\r\n    flex: 1,\r\n    border: \"none\",\r\n  },\r\n\r\n  sendMessageIcons: {\r\n    color: \"grey\",\r\n  },\r\n\r\n  uploadInput: {\r\n    display: \"none\",\r\n  },\r\n\r\n  viewMediaInputWrapper: {\r\n    display: \"flex\",\r\n    padding: \"10px 13px\",\r\n    position: \"relative\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#eee\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  emojiBox: {\r\n    position: \"absolute\",\r\n    bottom: 63,\r\n    width: 40,\r\n    borderTop: \"1px solid #e8e8e8\",\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n    position: \"absolute\",\r\n    top: \"20%\",\r\n    left: \"50%\",\r\n    marginLeft: -12,\r\n  },\r\n\r\n  audioLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n  },\r\n\r\n  recorderWrapper: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    alignContent: \"middle\",\r\n  },\r\n\r\n  cancelAudioIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  sendAudioIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  replyginMsgWrapper: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingTop: 8,\r\n    paddingLeft: 73,\r\n    paddingRight: 7,\r\n  },\r\n\r\n  replyginMsgContainer: {\r\n    flex: 1,\r\n    marginRight: 5,\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  replyginMsgBody: {\r\n    padding: 10,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  replyginContactMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  replyginSelfMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n  messageQuickAnswersWrapper: {\r\n    margin: 0,\r\n    position: \"absolute\",\r\n    bottom: \"50px\",\r\n    background: \"#ffffff\",\r\n    padding: \"2px\",\r\n    border: \"1px solid #CCC\",\r\n    left: 0,\r\n    width: \"100%\",\r\n    \"& li\": {\r\n      listStyle: \"none\",\r\n      \"& a\": {\r\n        display: \"block\",\r\n        padding: \"8px\",\r\n        textOverflow: \"ellipsis\",\r\n        overflow: \"hidden\",\r\n        maxHeight: \"32px\",\r\n        \"&:hover\": {\r\n          background: \"#F1F1F1\",\r\n          cursor: \"pointer\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nconst MessageInput = ({ ticketStatus }) => {\r\n  const classes = useStyles();\r\n  const { ticketId } = useParams();\r\n\r\n  const [medias, setMedias] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [recording, setRecording] = useState(false);\r\n  const [quickAnswers, setQuickAnswer] = useState([]);\r\n  const [typeBar, setTypeBar] = useState(false);\r\n  const inputRef = useRef();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const { setReplyingMessage, replyingMessage } =\r\n    useContext(ReplyMessageContext);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [signMessage, setSignMessage] = useLocalStorage(\"signOption\", true);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, [replyingMessage]);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    return () => {\r\n      setInputMessage(\"\");\r\n      setShowEmoji(false);\r\n      setMedias([]);\r\n      setReplyingMessage(null);\r\n    };\r\n  }, [ticketId, setReplyingMessage]);\r\n\r\n  const handleChangeInput = (e) => {\r\n    setInputMessage(e.target.value);\r\n    handleLoadQuickAnswer(e.target.value);\r\n  };\r\n\r\n  const handleQuickAnswersClick = (value) => {\r\n    setInputMessage(value);\r\n    setTypeBar(false);\r\n  };\r\n\r\n  const handleAddEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInputMessage((prevState) => prevState + emoji);\r\n  };\r\n\r\n  const handleChangeMedias = (e) => {\r\n    if (!e.target.files) {\r\n      return;\r\n    }\r\n\r\n    const selectedMedias = Array.from(e.target.files);\r\n    setMedias(selectedMedias);\r\n  };\r\n\r\n  const handleInputPaste = (e) => {\r\n    if (e.clipboardData.files[0]) {\r\n      setMedias([e.clipboardData.files[0]]);\r\n    }\r\n  };\r\n\r\n  const handleUploadMedia = async (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"fromMe\", true);\r\n    medias.forEach((media) => {\r\n      formData.append(\"medias\", media);\r\n      formData.append(\"body\", media.name);\r\n    });\r\n\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setLoading(false);\r\n    setMedias([]);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (inputMessage.trim() === \"\") return;\r\n    setLoading(true);\r\n\r\n    const message = {\r\n      read: 1,\r\n      fromMe: true,\r\n      mediaUrl: \"\",\r\n      body: signMessage\r\n        ? `*${user?.name}:*\\n${inputMessage.trim()}`\r\n        : inputMessage.trim(),\r\n      quotedMsg: replyingMessage,\r\n    };\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, message);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setShowEmoji(false);\r\n    setLoading(false);\r\n    setReplyingMessage(null);\r\n  };\r\n\r\n  const handleStartRecording = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      await Mp3Recorder.start();\r\n      setRecording(true);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLoadQuickAnswer = async (value) => {\r\n    if (value && value.indexOf(\"/\") === 0) {\r\n      try {\r\n        const { data } = await api.get(\"/quickAnswers/\", {\r\n          params: { searchParam: inputMessage.substring(1) },\r\n        });\r\n        setQuickAnswer(data.quickAnswers);\r\n        if (data.quickAnswers.length > 0) {\r\n          setTypeBar(true);\r\n        } else {\r\n          setTypeBar(false);\r\n        }\r\n      } catch (err) {\r\n        setTypeBar(false);\r\n      }\r\n    } else {\r\n      setTypeBar(false);\r\n    }\r\n  };\r\n\r\n  const handleUploadAudio = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [, blob] = await Mp3Recorder.stop().getMp3();\r\n      if (blob.size < 10000) {\r\n        setLoading(false);\r\n        setRecording(false);\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      const filename = `${new Date().getTime()}.mp3`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", filename);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setRecording(false);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleCancelAudio = async () => {\r\n    try {\r\n      await Mp3Recorder.stop().getMp3();\r\n      setRecording(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenMenuClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuItemClick = (event) => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const renderReplyingMessage = (message) => {\r\n    return (\r\n      <div className={classes.replyginMsgWrapper}>\r\n        <div className={classes.replyginMsgContainer}>\r\n          <span\r\n            className={clsx(classes.replyginContactMsgSideColor, {\r\n              [classes.replyginSelfMsgSideColor]: !message.fromMe,\r\n            })}\r\n          ></span>\r\n          <div className={classes.replyginMsgBody}>\r\n            {!message.fromMe && (\r\n              <span className={classes.messageContactName}>\r\n                {message.contact?.name}\r\n              </span>\r\n            )}\r\n            {message.body}\r\n          </div>\r\n        </div>\r\n        <IconButton\r\n          aria-label=\"showRecorder\"\r\n          component=\"span\"\r\n          disabled={loading || ticketStatus !== \"open\"}\r\n          onClick={() => setReplyingMessage(null)}\r\n        >\r\n          <ClearIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (medias.length > 0)\r\n    return (\r\n      <Paper elevation={0} square className={classes.viewMediaInputWrapper}>\r\n        <IconButton\r\n          aria-label=\"cancel-upload\"\r\n          component=\"span\"\r\n          onClick={(e) => setMedias([])}\r\n        >\r\n          <CancelIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n\r\n        {loading ? (\r\n          <div>\r\n            <CircularProgress className={classes.circleLoading} />\r\n          </div>\r\n        ) : (\r\n          <span>\r\n            {medias[0]?.name}\r\n            {/* <img src={media.preview} alt=\"\"></img> */}\r\n          </span>\r\n        )}\r\n        <IconButton\r\n          aria-label=\"send-upload\"\r\n          component=\"span\"\r\n          onClick={handleUploadMedia}\r\n          disabled={loading}\r\n        >\r\n          <SendIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </Paper>\r\n    );\r\n  else {\r\n    return (\r\n      <Paper square elevation={0} className={classes.mainWrapper}>\r\n        {replyingMessage && renderReplyingMessage(replyingMessage)}\r\n        <div className={classes.newMessageBox}>\r\n          <Hidden only={[\"sm\", \"xs\"]}>\r\n            <IconButton\r\n              aria-label=\"emojiPicker\"\r\n              component=\"span\"\r\n              disabled={loading || recording || ticketStatus !== \"open\"}\r\n              onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n            >\r\n              <MoodIcon className={classes.sendMessageIcons} />\r\n            </IconButton>\r\n            {showEmoji ? (\r\n              <div className={classes.emojiBox}>\r\n                <ClickAwayListener onClickAway={(e) => setShowEmoji(false)}>\r\n                  <Picker\r\n                    perLine={16}\r\n                    showPreview={false}\r\n                    showSkinTones={false}\r\n                    onSelect={handleAddEmoji}\r\n                  />\r\n                </ClickAwayListener>\r\n              </div>\r\n            ) : null}\r\n\r\n            <input\r\n              multiple\r\n              type=\"file\"\r\n              id=\"upload-button\"\r\n              disabled={loading || recording || ticketStatus !== \"open\"}\r\n              className={classes.uploadInput}\r\n              onChange={handleChangeMedias}\r\n            />\r\n            <label htmlFor=\"upload-button\">\r\n              <IconButton\r\n                aria-label=\"upload\"\r\n                component=\"span\"\r\n                disabled={loading || recording || ticketStatus !== \"open\"}\r\n              >\r\n                <AttachFileIcon className={classes.sendMessageIcons} />\r\n              </IconButton>\r\n            </label>\r\n            <FormControlLabel\r\n              style={{ marginRight: 7, color: \"gray\" }}\r\n              label={i18n.t(\"messagesInput.signMessage\")}\r\n              labelPlacement=\"start\"\r\n              control={\r\n                <Switch\r\n                  size=\"small\"\r\n                  checked={signMessage}\r\n                  onChange={(e) => {\r\n                    setSignMessage(e.target.checked);\r\n                  }}\r\n                  name=\"showAllTickets\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n            />\r\n          </Hidden>\r\n          <Hidden only={[\"md\", \"lg\", \"xl\"]}>\r\n            <IconButton\r\n              aria-controls=\"simple-menu\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleOpenMenuClick}\r\n            >\r\n              <MoreVert></MoreVert>\r\n            </IconButton>\r\n            <Menu\r\n              id=\"simple-menu\"\r\n              keepMounted\r\n              anchorEl={anchorEl}\r\n              open={Boolean(anchorEl)}\r\n              onClose={handleMenuItemClick}\r\n            >\r\n              <MenuItem onClick={handleMenuItemClick}>\r\n                <IconButton\r\n                  aria-label=\"emojiPicker\"\r\n                  component=\"span\"\r\n                  disabled={loading || recording || ticketStatus !== \"open\"}\r\n                  onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n                >\r\n                  <MoodIcon className={classes.sendMessageIcons} />\r\n                </IconButton>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleMenuItemClick}>\r\n                <input\r\n                  multiple\r\n                  type=\"file\"\r\n                  id=\"upload-button\"\r\n                  disabled={loading || recording || ticketStatus !== \"open\"}\r\n                  className={classes.uploadInput}\r\n                  onChange={handleChangeMedias}\r\n                />\r\n                <label htmlFor=\"upload-button\">\r\n                  <IconButton\r\n                    aria-label=\"upload\"\r\n                    component=\"span\"\r\n                    disabled={loading || recording || ticketStatus !== \"open\"}\r\n                  >\r\n                    <AttachFileIcon className={classes.sendMessageIcons} />\r\n                  </IconButton>\r\n                </label>\r\n              </MenuItem>\r\n              <MenuItem onClick={handleMenuItemClick}>\r\n                <FormControlLabel\r\n                  style={{ marginRight: 7, color: \"gray\" }}\r\n                  label={i18n.t(\"messagesInput.signMessage\")}\r\n                  labelPlacement=\"start\"\r\n                  control={\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={signMessage}\r\n                      onChange={(e) => {\r\n                        setSignMessage(e.target.checked);\r\n                      }}\r\n                      name=\"showAllTickets\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                />\r\n              </MenuItem>\r\n            </Menu>\r\n          </Hidden>\r\n          <div className={classes.messageInputWrapper}>\r\n            <InputBase\r\n              inputRef={(input) => {\r\n                input && input.focus();\r\n                input && (inputRef.current = input);\r\n              }}\r\n              className={classes.messageInput}\r\n              placeholder={\r\n                ticketStatus === \"open\"\r\n                  ? i18n.t(\"messagesInput.placeholderOpen\")\r\n                  : i18n.t(\"messagesInput.placeholderClosed\")\r\n              }\r\n              multiline\r\n              maxRows={5}\r\n              value={inputMessage}\r\n              onChange={handleChangeInput}\r\n              disabled={recording || loading || ticketStatus !== \"open\"}\r\n              onPaste={(e) => {\r\n                ticketStatus === \"open\" && handleInputPaste(e);\r\n              }}\r\n              onKeyPress={(e) => {\r\n                if (loading || e.shiftKey) return;\r\n                else if (e.key === \"Enter\") {\r\n                  handleSendMessage();\r\n                }\r\n              }}\r\n            />\r\n            {typeBar ? (\r\n              <ul className={classes.messageQuickAnswersWrapper}>\r\n                {quickAnswers.map((value, index) => {\r\n                  return (\r\n                    <li\r\n                      className={classes.messageQuickAnswersWrapperItem}\r\n                      key={index}\r\n                    >\r\n                      {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\r\n                      <a onClick={() => handleQuickAnswersClick(value.message)}>\r\n                        {`${value.shortcut} - ${value.message}`}\r\n                      </a>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            ) : (\r\n              <div></div>\r\n            )}\r\n          </div>\r\n          {inputMessage ? (\r\n            <IconButton\r\n              aria-label=\"sendMessage\"\r\n              component=\"span\"\r\n              onClick={handleSendMessage}\r\n              disabled={loading}\r\n            >\r\n              <SendIcon className={classes.sendMessageIcons} />\r\n            </IconButton>\r\n          ) : recording ? (\r\n            <div className={classes.recorderWrapper}>\r\n              <IconButton\r\n                aria-label=\"cancelRecording\"\r\n                component=\"span\"\r\n                fontSize=\"large\"\r\n                disabled={loading}\r\n                onClick={handleCancelAudio}\r\n              >\r\n                <HighlightOffIcon className={classes.cancelAudioIcon} />\r\n              </IconButton>\r\n              {loading ? (\r\n                <div>\r\n                  <CircularProgress className={classes.audioLoading} />\r\n                </div>\r\n              ) : (\r\n                <RecordingTimer />\r\n              )}\r\n\r\n              <IconButton\r\n                aria-label=\"sendRecordedAudio\"\r\n                component=\"span\"\r\n                onClick={handleUploadAudio}\r\n                disabled={loading}\r\n              >\r\n                <CheckCircleOutlineIcon className={classes.sendAudioIcon} />\r\n              </IconButton>\r\n            </div>\r\n          ) : (\r\n            <IconButton\r\n              aria-label=\"showRecorder\"\r\n              component=\"span\"\r\n              disabled={loading || ticketStatus !== \"open\"}\r\n              onClick={handleStartRecording}\r\n            >\r\n              <MicIcon className={classes.sendMessageIcons} />\r\n            </IconButton>\r\n          )}\r\n        </div>\r\n      </Paper>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MessageInput;\r\n","import { useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nexport function useLocalStorage(key, initialValue) {\r\n\tconst [storedValue, setStoredValue] = useState(() => {\r\n\t\ttry {\r\n\t\t\tconst item = localStorage.getItem(key);\r\n\t\t\treturn item ? JSON.parse(item) : initialValue;\r\n\t\t} catch (error) {\r\n\t\t\ttoastError(error);\r\n\t\t\treturn initialValue;\r\n\t\t}\r\n\t});\r\n\r\n\tconst setValue = value => {\r\n\t\ttry {\r\n\t\t\tconst valueToStore =\r\n\t\t\t\tvalue instanceof Function ? value(storedValue) : value;\r\n\r\n\t\t\tsetStoredValue(valueToStore);\r\n\r\n\t\t\tlocalStorage.setItem(key, JSON.stringify(valueToStore));\r\n\t\t} catch (error) {\r\n\t\t\ttoastError(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn [storedValue, setValue];\r\n}\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Avatar, Card, CardHeader } from \"@material-ui/core\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: \"#eee\",\r\n\t\tflex: \"none\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t},\r\n}));\r\n\r\nconst TicketHeaderSkeleton = () => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Card square className={classes.ticketHeader}>\r\n\t\t\t<CardHeader\r\n\t\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\t\tavatar={\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\">\r\n\t\t\t\t\t\t<Avatar alt=\"contact_image\" />\r\n\t\t\t\t\t</Skeleton>\r\n\t\t\t\t}\r\n\t\t\t\ttitle={<Skeleton animation=\"wave\" width={80} />}\r\n\t\t\t\tsubheader={<Skeleton animation=\"wave\" width={140} />}\r\n\t\t\t/>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default TicketHeaderSkeleton;\r\n","import React from \"react\";\r\n\r\nimport { Card, Button } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TicketHeaderSkeleton from \"../TicketHeaderSkeleton\";\r\nimport ArrowBackIos from \"@material-ui/icons/ArrowBackIos\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticketHeader: {\r\n    display: \"flex\",\r\n    backgroundColor: \"#eee\",\r\n    flex: \"none\",\r\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      flexWrap: \"wrap\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst TicketHeader = ({ loading, children }) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const handleBack = () => {\r\n    history.push(\"/tickets\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <TicketHeaderSkeleton />\r\n      ) : (\r\n        <Card square className={classes.ticketHeader}>\r\n          <Button color=\"primary\" onClick={handleBack}>\r\n            <ArrowBackIos />\r\n          </Button>\r\n          {children}\r\n        </Card>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TicketHeader;\r\n","import React from \"react\";\r\n\r\nimport { Avatar, CardHeader } from \"@material-ui/core\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst TicketInfo = ({ contact, ticket, onClick }) => {\r\n\treturn (\r\n\t\t<CardHeader\r\n\t\t\tonClick={onClick}\r\n\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\tavatar={<Avatar src={contact.profilePicUrl} alt=\"contact_image\" />}\r\n\t\t\ttitle={`${contact.name} #${ticket.id}`}\r\n\t\t\tsubheader={\r\n\t\t\t\tticket.user &&\r\n\t\t\t\t`${i18n.t(\"messagesList.header.assignedTo\")} ${ticket.user.name}`\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default TicketInfo;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst ConfirmationModal = ({ title, children, open, onClose, onConfirm }) => {\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\topen={open}\r\n\t\t\tonClose={() => onClose(false)}\r\n\t\t\taria-labelledby=\"confirm-dialog\"\r\n\t\t>\r\n\t\t\t<DialogTitle id=\"confirm-dialog\">{title}</DialogTitle>\r\n\t\t\t<DialogContent dividers>\r\n\t\t\t\t<Typography>{children}</Typography>\r\n\t\t\t</DialogContent>\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => onClose(false)}\r\n\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.cancel\")}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonClose(false);\r\n\t\t\t\t\t\tonConfirm();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.confirm\")}\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default ConfirmationModal;\r\n","import api from \"../../services/api\";\r\n\r\nconst useQueues = () => {\r\n\tconst findAll = async () => {\r\n        const { data } = await api.get(\"/queue\");\r\n        return data;\r\n    }\r\n\r\n\treturn { findAll };\r\n};\r\n\r\nexport default useQueues;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Autocomplete, {\r\n\tcreateFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport useQueues from \"../../hooks/useQueues\";\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  maxWidth: {\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nconst filterOptions = createFilterOptions({\r\n\ttrim: true,\r\n});\r\n\r\nconst TransferTicketModal = ({ modalOpen, onClose, ticketid, ticketWhatsappId }) => {\r\n\tconst history = useHistory();\r\n\tconst [options, setOptions] = useState([]);\r\n\tconst [queues, setQueues] = useState([]);\r\n\tconst [allQueues, setAllQueues] = useState([]);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [searchParam, setSearchParam] = useState(\"\");\r\n\tconst [selectedUser, setSelectedUser] = useState(null);\r\n\tconst [selectedQueue, setSelectedQueue] = useState('');\r\n\tconst [selectedWhatsapp, setSelectedWhatsapp] = useState(ticketWhatsappId);\r\n\tconst classes = useStyles();\r\n\tconst { findAll: findAllQueues } = useQueues();\r\n\tconst { loadingWhatsapps, whatsApps } = useWhatsApps();\r\n\r\n\tconst { user: loggedInUser } = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst loadQueues = async () => {\r\n\t\t\tconst list = await findAllQueues();\r\n\t\t\tsetAllQueues(list);\r\n\t\t\tsetQueues(list);\r\n\t\t}\r\n\t\tloadQueues();\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!modalOpen || searchParam.length < 3) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetLoading(true);\r\n\t\tconst delayDebounceFn = setTimeout(() => {\r\n\t\t\tconst fetchUsers = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { data } = await api.get(\"/users/\", {\r\n\t\t\t\t\t\tparams: { searchParam },\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetOptions(data.users);\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\ttoastError(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfetchUsers();\r\n\t\t}, 500);\r\n\t\treturn () => clearTimeout(delayDebounceFn);\r\n\t}, [searchParam, modalOpen]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetSearchParam(\"\");\r\n\t\tsetSelectedUser(null);\r\n\t};\r\n\r\n\tconst handleSaveTicket = async e => {\r\n\t\te.preventDefault();\r\n\t\tif (!ticketid) return;\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tlet data = {};\r\n\r\n\t\t\tif (selectedUser) {\r\n\t\t\t\tdata.userId = selectedUser.id\r\n\t\t\t}\r\n\r\n\t\t\tif (selectedQueue && selectedQueue !== null) {\r\n\t\t\t\tdata.queueId = selectedQueue\r\n\r\n\t\t\t\tif (!selectedUser) {\r\n\t\t\t\t\tdata.status = 'pending';\r\n\t\t\t\t\tdata.userId = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(selectedWhatsapp) {\r\n\t\t\t\tdata.whatsappId = selectedWhatsapp;\r\n\t\t\t}\r\n\r\n\t\t\tawait api.put(`/tickets/${ticketid}`, data);\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t\thistory.push(`/tickets`);\r\n\t\t} catch (err) {\r\n\t\t\tsetLoading(false);\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Dialog open={modalOpen} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n\t\t\t<form onSubmit={handleSaveTicket}>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{i18n.t(\"transferTicketModal.title\")}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\tstyle={{ width: 300, marginBottom: 20 }}\r\n\t\t\t\t\t\tgetOptionLabel={option => `${option.name}`}\r\n\t\t\t\t\t\tonChange={(e, newValue) => {\r\n\t\t\t\t\t\t\tsetSelectedUser(newValue);\r\n\t\t\t\t\t\t\tif (newValue != null && Array.isArray(newValue.queues)) {\r\n\t\t\t\t\t\t\t\tsetQueues(newValue.queues);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetQueues(allQueues);\r\n\t\t\t\t\t\t\t\tsetSelectedQueue('');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\t\tfreeSolo\r\n\t\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\tnoOptionsText={i18n.t(\"transferTicketModal.noOptions\")}\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\trenderInput={params => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t{...params}\r\n\t\t\t\t\t\t\t\tlabel={i18n.t(\"transferTicketModal.fieldLabel\")}\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\tonChange={e => setSearchParam(e.target.value)}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t...params.InputProps,\r\n\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CircularProgress color=\"inherit\" size={20} />\r\n\t\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t\t\t{params.InputProps.endAdornment}\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.maxWidth}>\r\n\t\t\t\t\t\t<InputLabel>{i18n.t(\"transferTicketModal.fieldQueueLabel\")}</InputLabel>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tvalue={selectedQueue}\r\n\t\t\t\t\t\t\tonChange={(e) => setSelectedQueue(e.target.value)}\r\n\t\t\t\t\t\t\tlabel={i18n.t(\"transferTicketModal.fieldQueuePlaceholder\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MenuItem value={''}>&nbsp;</MenuItem>\r\n\t\t\t\t\t\t\t{queues.map((queue) => (\r\n\t\t\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>{queue.name}</MenuItem>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t<Can\r\n\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\tperform=\"ticket-options:transferWhatsapp\"\r\n\t\t\t\t\t\tyes={() => (!loadingWhatsapps && \r\n\t\t\t\t\t\t\t<FormControl variant=\"outlined\" className={classes.maxWidth} style={{ marginTop: 20 }}>\r\n\t\t\t\t\t\t\t\t<InputLabel>{i18n.t(\"transferTicketModal.fieldConnectionLabel\")}</InputLabel>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tvalue={selectedWhatsapp}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setSelectedWhatsapp(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"transferTicketModal.fieldConnectionPlaceholder\")}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{whatsApps.map((whasapp) => (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={whasapp.id} value={whasapp.id}>{whasapp.name}</MenuItem>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"transferTicketModal.buttons.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"transferTicketModal.buttons.ok\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</form>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default TransferTicketModal;\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport TransferTicketModal from \"../TransferTicketModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Can } from \"../Can\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst TicketOptionsMenu = ({ ticket, menuOpen, handleClose, anchorEl }) => {\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\tconst [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\r\n\tconst isMounted = useRef(true);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst handleDeleteTicket = async () => {\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/tickets/${ticket.id}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = e => {\r\n\t\tsetConfirmationOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleOpenTransferModal = e => {\r\n\t\tsetTransferTicketModalOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleCloseTransferTicketModal = () => {\r\n\t\tif (isMounted.current) {\r\n\t\t\tsetTransferTicketModalOpen(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Menu\r\n\t\t\t\tid=\"menu-appbar\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tgetContentAnchorEl={null}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\topen={menuOpen}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={handleOpenTransferModal}>\r\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.transfer\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<Can\r\n\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\tperform=\"ticket-options:deleteTicket\"\r\n\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\r\n\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.delete\")}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={`${i18n.t(\"ticketOptionsMenu.confirmationModal.title\")}${\r\n\t\t\t\t\tticket.id\r\n\t\t\t\t} ${i18n.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${\r\n\t\t\t\t\tticket.contact.name\r\n\t\t\t\t}?`}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={setConfirmationOpen}\r\n\t\t\t\tonConfirm={handleDeleteTicket}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<TransferTicketModal\r\n\t\t\t\tmodalOpen={transferTicketModalOpen}\r\n\t\t\t\tonClose={handleCloseTransferTicketModal}\r\n\t\t\t\tticketid={ticket.id}\r\n\t\t\t\tticketWhatsappId={ticket.whatsappId}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketOptionsMenu;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { MoreVert, Replay } from \"@material-ui/icons\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport TicketOptionsMenu from \"../TicketOptionsMenu\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tactionButtons: {\r\n\t\tmarginRight: 6,\r\n\t\tflex: \"none\",\r\n\t\talignSelf: \"center\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst TicketActionButtons = ({ ticket }) => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst ticketOptionsMenuOpen = Boolean(anchorEl);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tconst handleOpenTicketOptionsMenu = e => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleCloseTicketOptionsMenu = e => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst handleUpdateTicketStatus = async (e, status, userId) => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait api.put(`/tickets/${ticket.id}`, {\r\n\t\t\t\tstatus: status,\r\n\t\t\t\tuserId: userId || null,\r\n\t\t\t});\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t\tif (status === \"open\") {\r\n\t\t\t\thistory.push(`/tickets/${ticket.id}`);\r\n\t\t\t} else {\r\n\t\t\t\thistory.push(\"/tickets\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tsetLoading(false);\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.actionButtons}>\r\n\t\t\t{ticket.status === \"closed\" && (\r\n\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tstartIcon={<Replay />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.reopen\")}\r\n\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t)}\r\n\t\t\t{ticket.status === \"open\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tstartIcon={<Replay />}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"pending\", null)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.return\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"closed\", user?.id)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.resolve\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t\t<IconButton onClick={handleOpenTicketOptionsMenu}>\r\n\t\t\t\t\t\t<MoreVert />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<TicketOptionsMenu\r\n\t\t\t\t\t\tticket={ticket}\r\n\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\tmenuOpen={ticketOptionsMenuOpen}\r\n\t\t\t\t\t\thandleClose={handleCloseTicketOptionsMenu}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t\t{ticket.status === \"pending\" && (\r\n\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.accept\")}\r\n\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketActionButtons;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport { Button, Divider, } from \"@material-ui/core\";\r\n\r\nconst VcardPreview = ({ contact, numbers }) => {\r\n    const history = useHistory();\r\n    const { user } = useContext(AuthContext);\r\n\r\n    const [selectedContact, setContact] = useState({\r\n        name: \"\",\r\n        number: 0,\r\n        profilePicUrl: \"\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        const delayDebounceFn = setTimeout(() => {\r\n            const fetchContacts = async () => {\r\n                try {\r\n                    let contactObj = {\r\n                        name: contact,\r\n                        // number: numbers.replace(/\\D/g, \"\"),\r\n                        number: numbers !== undefined && numbers.replace(/\\D/g, \"\"),\r\n                        email: \"\"\r\n                    }\r\n                    const { data } = await api.post(\"/contact\", contactObj);\r\n                    setContact(data)\r\n\r\n                } catch (err) {\r\n                    console.log(err)\r\n                    toastError(err);\r\n                }\r\n            };\r\n            fetchContacts();\r\n        }, 500);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [contact, numbers]);\r\n\r\n    const handleNewChat = async () => {\r\n        try {\r\n            const { data: ticket } = await api.post(\"/tickets\", {\r\n                contactId: selectedContact.id,\r\n                userId: user.id,\r\n                status: \"open\",\r\n            });\r\n            history.push(`/tickets/${ticket.id}`);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                minWidth: \"250px\",\r\n            }}>\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={2}>\r\n                        <Avatar src={selectedContact.profilePicUrl} />\r\n                    </Grid>\r\n                    <Grid item xs={9}>\r\n                        <Typography style={{ marginTop: \"12px\", marginLeft: \"10px\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\r\n                            {selectedContact.name}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Divider />\r\n                        <Button\r\n                            fullWidth\r\n                            color=\"primary\"\r\n                            onClick={handleNewChat}\r\n                            disabled={!selectedContact.number}\r\n                        >Conversar</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n        </>\r\n    );\r\n\r\n};\r\n\r\nexport default VcardPreview;","import React, { useEffect } from 'react';\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport { Button, Divider, } from \"@material-ui/core\";\r\n\r\nconst LocationPreview = ({ image, link, description }) => {\r\n    useEffect(() => {}, [image, link, description]);\r\n\r\n    const handleLocation = async() => {\r\n        try {\r\n            window.open(link);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<div style={{\r\n\t\t\t\tminWidth: \"250px\",\r\n\t\t\t}}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={{ float: \"left\" }}>\r\n\t\t\t\t\t\t<img src={image} onClick={handleLocation} style={{ width: \"100px\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{ description && (\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n\t\t\t\t\t\t<Typography style={{ marginTop: \"12px\", marginLeft: \"15px\", marginRight: \"15px\", float: \"left\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: description.replace('\\\\n', '<br />') }}></div>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div style={{ display: \"block\", content: \"\", clear: \"both\" }}></div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={handleLocation}\r\n\t\t\t\t\t\t\tdisabled={!link}\r\n\t\t\t\t\t\t>Visualizar</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n\r\n};\r\n\r\nexport default LocationPreview;","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport ModalImage from \"react-modal-image\";\r\nimport api from \"../../services/api\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmessageMedia: {\r\n\t\tobjectFit: \"cover\",\r\n\t\twidth: 250,\r\n\t\theight: 200,\r\n\t\tborderTopLeftRadius: 8,\r\n\t\tborderTopRightRadius: 8,\r\n\t\tborderBottomLeftRadius: 8,\r\n\t\tborderBottomRightRadius: 8,\r\n\t},\r\n}));\r\n\r\nconst ModalImageCors = ({ imageUrl }) => {\r\n\tconst classes = useStyles();\r\n\tconst [fetching, setFetching] = useState(true);\r\n\tconst [blobUrl, setBlobUrl] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!imageUrl) return;\r\n\t\tconst fetchImage = async () => {\r\n\t\t\tconst { data, headers } = await api.get(imageUrl, {\r\n\t\t\t\tresponseType: \"blob\",\r\n\t\t\t});\r\n\t\t\tconst url = window.URL.createObjectURL(\r\n\t\t\t\tnew Blob([data], { type: headers[\"content-type\"] })\r\n\t\t\t);\r\n\t\t\tsetBlobUrl(url);\r\n\t\t\tsetFetching(false);\r\n\t\t};\r\n\t\tfetchImage();\r\n\t}, [imageUrl]);\r\n\r\n\treturn (\r\n\t\t<ModalImage\r\n\t\t\tclassName={classes.messageMedia}\r\n\t\t\tsmallSrcSet={fetching ? imageUrl : blobUrl}\r\n\t\t\tmedium={fetching ? imageUrl : blobUrl}\r\n\t\t\tlarge={fetching ? imageUrl : blobUrl}\r\n\t\t\talt=\"image\"\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ModalImageCors;\r\n","import React, { useState, useContext } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport { Menu } from \"@material-ui/core\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst MessageOptionsMenu = ({ message, menuOpen, handleClose, anchorEl }) => {\r\n  const { setReplyingMessage } = useContext(ReplyMessageContext);\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\r\n  const handleDeleteMessage = async () => {\r\n    try {\r\n      await api.delete(`/messages/${message.id}`);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const hanldeReplyMessage = () => {\r\n    setReplyingMessage(message);\r\n    handleClose();\r\n  };\r\n\r\n  const handleOpenConfirmationModal = (e) => {\r\n    setConfirmationOpen(true);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"messageOptionsMenu.confirmationModal.title\")}\r\n        open={confirmationOpen}\r\n        onClose={setConfirmationOpen}\r\n        onConfirm={handleDeleteMessage}\r\n      >\r\n        {i18n.t(\"messageOptionsMenu.confirmationModal.message\")}\r\n      </ConfirmationModal>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"right\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"right\",\r\n        }}\r\n        open={menuOpen}\r\n        onClose={handleClose}\r\n      >\r\n        {message.fromMe && (\r\n          <MenuItem onClick={handleOpenConfirmationModal}>\r\n            {i18n.t(\"messageOptionsMenu.delete\")}\r\n          </MenuItem>\r\n        )}\r\n        <MenuItem onClick={hanldeReplyMessage}>\r\n          {i18n.t(\"messageOptionsMenu.reply\")}\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MessageOptionsMenu;\r\n","import { Button } from \"@material-ui/core\";\r\nimport React, { useRef } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst LS_NAME = 'audioMessageRate';\r\n\r\nexport default function({url}) {\r\n    const audioRef = useRef(null);\r\n    const [audioRate, setAudioRate] = useState( parseFloat(localStorage.getItem(LS_NAME) || \"1\") );\r\n    const [showButtonRate, setShowButtonRate] = useState(false);\r\n\r\n    useEffect(() => {\r\n        audioRef.current.playbackRate = audioRate;\r\n        localStorage.setItem(LS_NAME, audioRate);\r\n    }, [audioRate]);\r\n\r\n    useEffect(() => {\r\n        audioRef.current.onplaying = () => {\r\n            setShowButtonRate(true);\r\n        };\r\n        audioRef.current.onpause = () => {\r\n            setShowButtonRate(false);\r\n        };\r\n        audioRef.current.onended = () => {\r\n            setShowButtonRate(false);\r\n        };\r\n    }, []);\r\n\r\n    const toogleRate = () => {\r\n        let newRate = null;\r\n\r\n        switch(audioRate) {\r\n            case 0.5:\r\n                newRate = 1;\r\n                break;\r\n            case 1:\r\n                newRate = 1.5;\r\n                break;\r\n            case 1.5:\r\n                newRate = 2;\r\n                break;\r\n            case 2:\r\n                newRate = 0.5;\r\n                break;\r\n            default:\r\n                newRate = 1;\r\n                break;\r\n        }\r\n        \r\n        setAudioRate(newRate);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <audio ref={audioRef} controls>\r\n                <source src={url} type=\"audio/ogg\"></source>\r\n            </audio>\r\n            {showButtonRate && <Button style={{marginLeft: \"5px\", marginTop: \"-45px\"}} onClick={toogleRate}>{audioRate}x</Button>}\r\n        </>\r\n    );\r\n}","import React, { useState, useEffect, useReducer, useRef } from \"react\";\r\n\r\nimport { isSameDay, parseISO, format } from \"date-fns\";\r\nimport openSocket from \"../../services/socket-io\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Divider,\r\n  IconButton,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  AccessTime,\r\n  Block,\r\n  Done,\r\n  DoneAll,\r\n  ExpandMore,\r\n  GetApp,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport VcardPreview from \"../VcardPreview\";\r\nimport LocationPreview from \"../LocationPreview\";\r\nimport ModalImageCors from \"../ModalImageCors\";\r\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\r\nimport whatsBackground from \"../../assets/wa-background.png\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport Audio from \"../Audio\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  messagesListWrapper: {\r\n    overflow: \"hidden\",\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n  },\r\n\r\n  messagesList: {\r\n    backgroundImage: `url(${whatsBackground})`,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n    padding: \"20px 20px 20px 20px\",\r\n    overflowY: \"scroll\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      paddingBottom: \"90px\",\r\n    },\r\n    ...theme.scrollbarStyles,\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    opacity: \"70%\",\r\n    top: 0,\r\n    left: \"50%\",\r\n    marginTop: 12,\r\n  },\r\n\r\n  messageLeft: {\r\n    marginRight: 20,\r\n    marginTop: 2,\r\n    minWidth: 100,\r\n    maxWidth: 600,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    \"&:hover #messageActionsButton\": {\r\n      display: \"flex\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      right: 0,\r\n    },\r\n\r\n    whiteSpace: \"pre-wrap\",\r\n    backgroundColor: \"#ffffff\",\r\n    color: \"#303030\",\r\n    alignSelf: \"flex-start\",\r\n    borderTopLeftRadius: 0,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 8,\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    paddingTop: 5,\r\n    paddingBottom: 0,\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  quotedContainerLeft: {\r\n    margin: \"-3px -80px 6px -6px\",\r\n    overflow: \"hidden\",\r\n    backgroundColor: \"#f0f0f0\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  quotedMsg: {\r\n    padding: 10,\r\n    maxWidth: 300,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  quotedSideColorLeft: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageRight: {\r\n    marginLeft: 20,\r\n    marginTop: 2,\r\n    minWidth: 100,\r\n    maxWidth: 600,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    \"&:hover #messageActionsButton\": {\r\n      display: \"flex\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      right: 0,\r\n    },\r\n\r\n    whiteSpace: \"pre-wrap\",\r\n    backgroundColor: \"#dcf8c6\",\r\n    color: \"#303030\",\r\n    alignSelf: \"flex-end\",\r\n    borderTopLeftRadius: 8,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 0,\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    paddingTop: 5,\r\n    paddingBottom: 0,\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  quotedContainerRight: {\r\n    margin: \"-3px -80px 6px -6px\",\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"#cfe9ba\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  quotedMsgRight: {\r\n    padding: 10,\r\n    maxWidth: 300,\r\n    height: \"auto\",\r\n    whiteSpace: \"pre-wrap\",\r\n  },\r\n\r\n  quotedSideColorRight: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  messageActionsButton: {\r\n    display: \"none\",\r\n    position: \"relative\",\r\n    color: \"#999\",\r\n    zIndex: 1,\r\n    backgroundColor: \"inherit\",\r\n    opacity: \"90%\",\r\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n\r\n  textContentItem: {\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 80px 6px 6px\",\r\n  },\r\n\r\n  textContentItemDeleted: {\r\n    fontStyle: \"italic\",\r\n    color: \"rgba(0, 0, 0, 0.36)\",\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 80px 6px 6px\",\r\n  },\r\n\r\n  messageMedia: {\r\n    objectFit: \"cover\",\r\n    width: 250,\r\n    height: 200,\r\n    borderTopLeftRadius: 8,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 8,\r\n  },\r\n\r\n  timestamp: {\r\n    fontSize: 11,\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 5,\r\n    color: \"#999\",\r\n  },\r\n\r\n  dailyTimestamp: {\r\n    alignItems: \"center\",\r\n    textAlign: \"center\",\r\n    alignSelf: \"center\",\r\n    width: \"110px\",\r\n    backgroundColor: \"#e1f3fb\",\r\n    margin: \"10px\",\r\n    borderRadius: \"10px\",\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  dailyTimestampText: {\r\n    color: \"#808888\",\r\n    padding: 8,\r\n    alignSelf: \"center\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  ackIcons: {\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginLeft: 4,\r\n  },\r\n\r\n  deletedIcon: {\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginRight: 4,\r\n  },\r\n\r\n  ackDoneAllIcon: {\r\n    color: green[500],\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginLeft: 4,\r\n  },\r\n\r\n  downloadMedia: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"inherit\",\r\n    padding: 10,\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_MESSAGES\") {\r\n    const messages = action.payload;\r\n    const newMessages = [];\r\n\r\n    messages.forEach((message) => {\r\n      const messageIndex = state.findIndex((m) => m.id === message.id);\r\n      if (messageIndex !== -1) {\r\n        state[messageIndex] = message;\r\n      } else {\r\n        newMessages.push(message);\r\n      }\r\n    });\r\n\r\n    return [...newMessages, ...state];\r\n  }\r\n\r\n  if (action.type === \"ADD_MESSAGE\") {\r\n    const newMessage = action.payload;\r\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\r\n\r\n    if (messageIndex !== -1) {\r\n      state[messageIndex] = newMessage;\r\n    } else {\r\n      state.push(newMessage);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_MESSAGE\") {\r\n    const messageToUpdate = action.payload;\r\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\r\n\r\n    if (messageIndex !== -1) {\r\n      state[messageIndex] = messageToUpdate;\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst MessagesList = ({ ticketId, isGroup }) => {\r\n  const classes = useStyles();\r\n\r\n  const [messagesList, dispatch] = useReducer(reducer, []);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const lastMessageRef = useRef();\r\n\r\n  const [selectedMessage, setSelectedMessage] = useState({});\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const messageOptionsMenuOpen = Boolean(anchorEl);\r\n  const currentTicketId = useRef(ticketId);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n\r\n    currentTicketId.current = ticketId;\r\n  }, [ticketId]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchMessages = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/messages/\" + ticketId, {\r\n            params: { pageNumber },\r\n          });\r\n\r\n          if (currentTicketId.current === ticketId) {\r\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\r\n            setHasMore(data.hasMore);\r\n            setLoading(false);\r\n          }\r\n\r\n          if (pageNumber === 1 && data.messages.length > 1) {\r\n            scrollToBottom();\r\n          }\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchMessages();\r\n    }, 500);\r\n    return () => {\r\n      clearTimeout(delayDebounceFn);\r\n    };\r\n  }, [pageNumber, ticketId]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket();\r\n\r\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", ticketId));\r\n\r\n    socket.on(\"appMessage\", (data) => {\r\n      if (data.action === \"create\") {\r\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\r\n        scrollToBottom();\r\n      }\r\n\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId]);\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (lastMessageRef.current) {\r\n      lastMessageRef.current.scrollIntoView({});\r\n    }\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore) return;\r\n    const { scrollTop } = e.currentTarget;\r\n\r\n    if (scrollTop === 0) {\r\n      document.getElementById(\"messagesList\").scrollTop = 1;\r\n    }\r\n\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    if (scrollTop < 50) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleOpenMessageOptionsMenu = (e, message) => {\r\n    setAnchorEl(e.currentTarget);\r\n    setSelectedMessage(message);\r\n  };\r\n\r\n  const handleCloseMessageOptionsMenu = (e) => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const checkMessageMedia = (message) => {\r\n    if (message.mediaType === \"location\" && message.body.split('|').length >= 2) {\r\n      let locationParts = message.body.split('|')\r\n      let imageLocation = locationParts[0]\r\n      let linkLocation = locationParts[1]\r\n\r\n      let descriptionLocation = null\r\n\r\n      if (locationParts.length > 2)\r\n        descriptionLocation = message.body.split('|')[2]\r\n\r\n      return <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\r\n    }\r\n    else if (message.mediaType === \"vcard\") {\r\n      //console.log(\"vcard\")\r\n      //console.log(message)\r\n      let array = message.body.split(\"\\n\");\r\n      let obj = [];\r\n      let contact = \"\";\r\n      for (let index = 0; index < array.length; index++) {\r\n        const v = array[index];\r\n        let values = v.split(\":\");\r\n        for (let ind = 0; ind < values.length; ind++) {\r\n          if (values[ind].indexOf(\"+\") !== -1) {\r\n            obj.push({ number: values[ind] });\r\n          }\r\n          if (values[ind].indexOf(\"FN\") !== -1) {\r\n            contact = values[ind + 1];\r\n          }\r\n        }\r\n      }\r\n      return <VcardPreview contact={contact} numbers={obj[0]?.number} />\r\n    }\r\n    /*else if (message.mediaType === \"multi_vcard\") {\r\n      console.log(\"multi_vcard\")\r\n      console.log(message)\r\n    \t\r\n      if(message.body !== null && message.body !== \"\") {\r\n        let newBody = JSON.parse(message.body)\r\n        return (\r\n          <>\r\n            {\r\n            newBody.map(v => (\r\n              <VcardPreview contact={v.name} numbers={v.number} />\r\n            ))\r\n            }\r\n          </>\r\n        )\r\n      } else return (<></>)\r\n    }*/\r\n    else if (message.mediaType === \"image\") {\r\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\r\n    } else if (message.mediaType === \"audio\") {\r\n      return <Audio url={message.mediaUrl} />\r\n    } else if (message.mediaType === \"video\") {\r\n      return (\r\n        <video\r\n          className={classes.messageMedia}\r\n          src={message.mediaUrl}\r\n          controls\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          <div className={classes.downloadMedia}>\r\n            <Button\r\n              startIcon={<GetApp />}\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              target=\"_blank\"\r\n              href={message.mediaUrl}\r\n            >\r\n              Download\r\n            </Button>\r\n          </div>\r\n          <Divider />\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessageAck = (message) => {\r\n    if (message.ack === 0) {\r\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 1) {\r\n      return <Done fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 2) {\r\n      return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 3 || message.ack === 4) {\r\n      return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\r\n    }\r\n  };\r\n\r\n  const renderDailyTimestamps = (message, index) => {\r\n    if (index === 0) {\r\n      return (\r\n        <span\r\n          className={classes.dailyTimestamp}\r\n          key={`timestamp-${message.id}`}\r\n        >\r\n          <div className={classes.dailyTimestampText}>\r\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\r\n          </div>\r\n        </span>\r\n      );\r\n    }\r\n    if (index < messagesList.length - 1) {\r\n      let messageDay = parseISO(messagesList[index].createdAt);\r\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\r\n\r\n      if (!isSameDay(messageDay, previousMessageDay)) {\r\n        return (\r\n          <span\r\n            className={classes.dailyTimestamp}\r\n            key={`timestamp-${message.id}`}\r\n          >\r\n            <div className={classes.dailyTimestampText}>\r\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\r\n            </div>\r\n          </span>\r\n        );\r\n      }\r\n    }\r\n    if (index === messagesList.length - 1) {\r\n      return (\r\n        <div\r\n          key={`ref-${message.createdAt}`}\r\n          ref={lastMessageRef}\r\n          style={{ float: \"left\", clear: \"both\" }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessageDivider = (message, index) => {\r\n    if (index < messagesList.length && index > 0) {\r\n      let messageUser = messagesList[index].fromMe;\r\n      let previousMessageUser = messagesList[index - 1].fromMe;\r\n\r\n      if (messageUser !== previousMessageUser) {\r\n        return (\r\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderQuotedMessage = (message) => {\r\n    return (\r\n      <div\r\n        className={clsx(classes.quotedContainerLeft, {\r\n          [classes.quotedContainerRight]: message.fromMe,\r\n        })}\r\n      >\r\n        <span\r\n          className={clsx(classes.quotedSideColorLeft, {\r\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\r\n          })}\r\n        ></span>\r\n        <div className={classes.quotedMsg}>\r\n          {!message.quotedMsg?.fromMe && (\r\n            <span className={classes.messageContactName}>\r\n              {message.quotedMsg?.contact?.name}\r\n            </span>\r\n          )}\r\n          {message.quotedMsg?.body}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderMessages = () => {\r\n    if (messagesList.length > 0) {\r\n      const viewMessagesList = messagesList.map((message, index) => {\r\n        if (!message.fromMe) {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageLeft}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {isGroup && (\r\n                  <span className={classes.messageContactName}>\r\n                    {message.contact?.name}\r\n                  </span>\r\n                )}\r\n                {(message.mediaUrl || message.mediaType === \"location\" || message.mediaType === \"vcard\"\r\n                  //|| message.mediaType === \"multi_vcard\" \r\n                ) && checkMessageMedia(message)}\r\n                <div className={classes.textContentItem}>\r\n                  {message.quotedMsg && renderQuotedMessage(message)}\r\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\r\n                  <span className={classes.timestamp}>\r\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        } else {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageRight}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {(message.mediaUrl || message.mediaType === \"location\" || message.mediaType === \"vcard\"\r\n                  //|| message.mediaType === \"multi_vcard\" \r\n                ) && checkMessageMedia(message)}\r\n                <div\r\n                  className={clsx(classes.textContentItem, {\r\n                    [classes.textContentItemDeleted]: message.isDeleted,\r\n                  })}\r\n                >\r\n                  {message.isDeleted && (\r\n                    <Block\r\n                      color=\"disabled\"\r\n                      fontSize=\"small\"\r\n                      className={classes.deletedIcon}\r\n                    />\r\n                  )}\r\n                  {message.quotedMsg && renderQuotedMessage(message)}\r\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\r\n                  <span className={classes.timestamp}>\r\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\r\n                    {renderMessageAck(message)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        }\r\n      });\r\n      return viewMessagesList;\r\n    } else {\r\n      return <div>Say hello to your new contact!</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.messagesListWrapper}>\r\n      <MessageOptionsMenu\r\n        message={selectedMessage}\r\n        anchorEl={anchorEl}\r\n        menuOpen={messageOptionsMenuOpen}\r\n        handleClose={handleCloseMessageOptionsMenu}\r\n      />\r\n      <div\r\n        id=\"messagesList\"\r\n        className={classes.messagesList}\r\n        onScroll={handleScroll}\r\n      >\r\n        {messagesList.length > 0 ? renderMessages() : []}\r\n      </div>\r\n      {loading && (\r\n        <div>\r\n          <CircularProgress className={classes.circleLoading} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessagesList;","import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport openSocket from \"../../services/socket-io\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { Paper, makeStyles } from \"@material-ui/core\";\r\n\r\nimport ContactDrawer from \"../ContactDrawer\";\r\nimport MessageInput from \"../MessageInput/\";\r\nimport TicketHeader from \"../TicketHeader\";\r\nimport TicketInfo from \"../TicketInfo\";\r\nimport TicketActionButtons from \"../TicketActionButtons\";\r\nimport MessagesList from \"../MessagesList\";\r\nimport api from \"../../services/api\";\r\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  ticketInfo: {\r\n    maxWidth: \"50%\",\r\n    flexBasis: \"50%\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxWidth: \"80%\",\r\n      flexBasis: \"80%\",\r\n    },\r\n  },\r\n  ticketActionButtons: {\r\n    maxWidth: \"50%\",\r\n    flexBasis: \"50%\",\r\n    display: \"flex\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxWidth: \"100%\",\r\n      flexBasis: \"100%\",\r\n      marginBottom: \"5px\",\r\n    },\r\n  },\r\n\r\n  mainWrapper: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    borderLeft: \"0\",\r\n    marginRight: -drawerWidth,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n\r\n  mainWrapperShift: {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nconst Ticket = () => {\r\n  const { ticketId } = useParams();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState({});\r\n  const [ticket, setTicket] = useState({});\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchTicket = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/tickets/\" + ticketId);\r\n\r\n          setContact(data.contact);\r\n          setTicket(data);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchTicket();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [ticketId, history]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket();\r\n\r\n    socket.on(\"connect\", () => socket.emit(\"joinChatBox\", ticketId));\r\n\r\n    socket.on(\"ticket\", (data) => {\r\n      if (data.action === \"update\") {\r\n        setTicket(data.ticket);\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        toast.success(\"Ticket deleted sucessfully.\");\r\n        history.push(\"/tickets\");\r\n      }\r\n    });\r\n\r\n    socket.on(\"contact\", (data) => {\r\n      if (data.action === \"update\") {\r\n        setContact((prevState) => {\r\n          if (prevState.id === data.contact?.id) {\r\n            return { ...prevState, ...data.contact };\r\n          }\r\n          return prevState;\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId, history]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root} id=\"drawer-container\">\r\n      <Paper\r\n        variant=\"outlined\"\r\n        elevation={0}\r\n        className={clsx(classes.mainWrapper, {\r\n          [classes.mainWrapperShift]: drawerOpen,\r\n        })}\r\n      >\r\n        <TicketHeader loading={loading}>\r\n          <div className={classes.ticketInfo}>\r\n            <TicketInfo\r\n              contact={contact}\r\n              ticket={ticket}\r\n              onClick={handleDrawerOpen}\r\n            />\r\n          </div>\r\n          <div className={classes.ticketActionButtons}>\r\n            <TicketActionButtons ticket={ticket} />\r\n          </div>\r\n        </TicketHeader>\r\n        <ReplyMessageProvider>\r\n          <MessagesList\r\n            ticketId={ticketId}\r\n            isGroup={ticket.isGroup}\r\n          ></MessagesList>\r\n          <MessageInput ticketStatus={ticket.status} />\r\n        </ReplyMessageProvider>\r\n      </Paper>\r\n      <ContactDrawer\r\n        open={drawerOpen}\r\n        handleDrawerClose={handleDrawerClose}\r\n        contact={contact}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ticket;\r\n","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport TicketsManager from \"../../components/TicketsManager/\";\r\nimport Ticket from \"../../components/Ticket/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  chatContainer: {\r\n    flex: 1,\r\n    // // backgroundColor: \"#eee\",\r\n    // padding: theme.spacing(4),\r\n    height: `calc(100% - 48px)`,\r\n    overflowY: \"hidden\",\r\n  },\r\n\r\n  chatPapper: {\r\n    // backgroundColor: \"red\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n  },\r\n\r\n  contactsWrapper: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflowY: \"hidden\",\r\n  },\r\n  contactsWrapperSmall: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflowY: \"hidden\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  messagessWrapper: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n  },\r\n  welcomeMsg: {\r\n    backgroundColor: \"#eee\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    height: \"100%\",\r\n    textAlign: \"center\",\r\n    borderRadius: 0,\r\n  },\r\n  ticketsManager: {},\r\n  ticketsManagerClosed: {\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Chat = () => {\r\n  const classes = useStyles();\r\n  const { ticketId } = useParams();\r\n\r\n  return (\r\n    <div className={classes.chatContainer}>\r\n      <div className={classes.chatPapper}>\r\n        <Grid container spacing={0}>\r\n          {/* <Grid item xs={4} className={classes.contactsWrapper}> */}\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={4}\r\n            className={\r\n              ticketId ? classes.contactsWrapperSmall : classes.contactsWrapper\r\n            }\r\n          >\r\n            <TicketsManager />\r\n          </Grid>\r\n          <Grid item xs={12} md={8} className={classes.messagessWrapper}>\r\n            {/* <Grid item xs={8} className={classes.messagessWrapper}> */}\r\n            {ticketId ? (\r\n              <>\r\n                <Ticket />\r\n              </>\r\n            ) : (\r\n              <Hidden only={[\"sm\", \"xs\"]}>\r\n                <Paper className={classes.welcomeMsg}>\r\n                  {/* <Paper square variant=\"outlined\" className={classes.welcomeMsg}> */}\r\n                  <span>{i18n.t(\"chat.noTicketMessage\")}</span>\r\n                </Paper>\r\n              </Hidden>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useState } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form, Field } from \"formik\";\r\n\r\nimport {\r\n\tAvatar,\r\n\tButton,\r\n\tCssBaseline,\r\n\tTextField,\r\n\tGrid,\r\n\tBox,\r\n\tTypography,\r\n\tContainer,\r\n\tInputAdornment,\r\n\tIconButton,\r\n\tLink\r\n} from '@material-ui/core';\r\n\r\nimport { LockOutlined, Visibility, VisibilityOff } from '@material-ui/icons';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\n// const Copyright = () => {\r\n// \treturn (\r\n// \t\t<Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n// \t\t\t{\"Copyleft \"}\r\n// \t\t\t<Link color=\"inherit\" href=\"https://github.com/canove\">\r\n// \t\t\t\tCanove\r\n// \t\t\t</Link>{\" \"}\r\n// \t\t\t{new Date().getFullYear()}\r\n// \t\t\t{\".\"}\r\n// \t\t</Typography>\r\n// \t);\r\n// };\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: theme.spacing(8),\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\tavatar: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t},\r\n\tform: {\r\n\t\twidth: \"100%\",\r\n\t\tmarginTop: theme.spacing(3),\r\n\t},\r\n\tsubmit: {\r\n\t\tmargin: theme.spacing(3, 0, 2),\r\n\t},\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst SignUp = () => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\r\n\tconst initialState = { name: \"\", email: \"\", password: \"\" };\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\tconst [user] = useState(initialState);\r\n\r\n\tconst handleSignUp = async values => {\r\n\t\ttry {\r\n\t\t\tawait api.post(\"/auth/signup\", values);\r\n\t\t\ttoast.success(i18n.t(\"signup.toasts.success\"));\r\n\t\t\thistory.push(\"/login\");\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container component=\"main\" maxWidth=\"xs\">\r\n\t\t\t<CssBaseline />\r\n\t\t\t<div className={classes.paper}>\r\n\t\t\t\t<Avatar className={classes.avatar}>\r\n\t\t\t\t\t<LockOutlined />\r\n\t\t\t\t</Avatar>\r\n\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\r\n\t\t\t\t\t{i18n.t(\"signup.title\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{/* <form className={classes.form} noValidate onSubmit={handleSignUp}> */}\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={user}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={UserSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSignUp(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form className={classes.form}>\r\n\t\t\t\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"signup.form.password\")}\r\n\t\t\t\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowPassword((e) => !e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <VisibilityOff /> : <Visibility />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tclassName={classes.submit}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"signup.buttons.submit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Grid container justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"signup.buttons.login\")}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</div>\r\n\t\t\t<Box mt={5}>{/* <Copyright /> */}</Box>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CssBaseline,\r\n  TextField,\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Container,\r\n  InputAdornment,\r\n  IconButton,\r\n  Link\r\n} from '@material-ui/core';\r\n\r\nimport { LockOutlined, Visibility, VisibilityOff } from '@material-ui/icons';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\n// const Copyright = () => {\r\n// \treturn (\r\n// \t\t<Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n// \t\t\t{\"Copyleft \"}\r\n// \t\t\t<Link color=\"inherit\" href=\"https://github.com/canove\">\r\n// \t\t\t\tCanove\r\n// \t\t\t</Link>{\" \"}\r\n// \t\t\t{new Date().getFullYear()}\r\n// \t\t\t{\".\"}\r\n// \t\t</Typography>\r\n// \t);\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst Login = () => {\r\n  const classes = useStyles();\r\n\r\n  const [user, setUser] = useState({ email: \"\", password: \"\" });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const { handleLogin } = useContext(AuthContext);\r\n\r\n  const handleChangeInput = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handlSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleLogin(user);\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlined />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          {i18n.t(\"login.title\")}\r\n        </Typography>\r\n        <form className={classes.form} noValidate onSubmit={handlSubmit}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label={i18n.t(\"login.form.email\")}\r\n            name=\"email\"\r\n            value={user.email}\r\n            onChange={handleChangeInput}\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label={i18n.t(\"login.form.password\")}\r\n            id=\"password\"\r\n            value={user.password}\r\n            onChange={handleChangeInput}\r\n            autoComplete=\"current-password\"\r\n            type={showPassword ? 'text' : 'password'}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={() => setShowPassword((e) => !e)}\r\n                  >\r\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            {i18n.t(\"login.buttons.submit\")}\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item>\r\n              <Link\r\n                href=\"#\"\r\n                variant=\"body2\"\r\n                component={RouterLink}\r\n                to=\"/signup\"\r\n              >\r\n                {i18n.t(\"login.buttons.register\")}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>{/* <Copyright /> */}</Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    flex: 1,\r\n    // padding: theme.spacing(2),\r\n    // height: `calc(100% - 48px)`,\r\n    padding: 0,\r\n    height: \"100%\",\r\n  },\r\n\r\n  contentWrapper: {\r\n    height: \"100%\",\r\n    overflowY: \"hidden\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n}));\r\n\r\nconst MainContainer = ({ children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container className={classes.mainContainer} maxWidth={false}>\r\n      <div className={classes.contentWrapper}>{children}</div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default MainContainer;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontactsHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: \"0px 6px 6px 6px\",\r\n\t},\r\n}));\r\n\r\nconst MainHeader = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn <div className={classes.contactsHeader}>{children}</div>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tMainHeaderButtonsWrapper: {\r\n\t\tflex: \"none\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst MainHeaderButtonsWrapper = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn <div className={classes.MainHeaderButtonsWrapper}>{children}</div>;\r\n};\r\n\r\nexport default MainHeaderButtonsWrapper;\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport default function Title(props) {\r\n\treturn (\r\n\t\t<Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n\t\t\t{props.children}\r\n\t\t</Typography>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n}));\r\n\r\nconst TableRowSkeleton = ({ avatar, columns }) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{avatar && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableCell style={{ paddingRight: 0 }}>\r\n\t\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\t\tvariant=\"circle\"\r\n\t\t\t\t\t\t\t\twidth={40}\r\n\t\t\t\t\t\t\t\theight={40}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t<Skeleton animation=\"wave\" height={30} width={80} />\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{Array.from({ length: columns }, (_, index) => (\r\n\t\t\t\t\t<TableCell align=\"center\" key={index}>\r\n\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\t\theight={30}\r\n\t\t\t\t\t\t\t\twidth={80}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TableRowSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport {\r\n\tDialog,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tButton,\r\n\tDialogActions,\r\n\tCircularProgress,\r\n\tTextField,\r\n\tSwitch,\r\n\tFormControlLabel,\r\n} from \"@material-ui/core\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst SessionSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n});\r\n\r\nconst WhatsAppModal = ({ open, onClose, whatsAppId }) => {\r\n\tconst classes = useStyles();\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tgreetingMessage: \"\",\r\n\t\tfarewellMessage: \"\",\r\n\t\tisDefault: false,\r\n\t};\r\n\tconst [whatsApp, setWhatsApp] = useState(initialState);\r\n\tconst [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSession = async () => {\r\n\t\t\tif (!whatsAppId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`whatsapp/${whatsAppId}`);\r\n\t\t\t\tsetWhatsApp(data);\r\n\r\n\t\t\t\tconst whatsQueueIds = data.queues?.map(queue => queue.id);\r\n\t\t\t\tsetSelectedQueueIds(whatsQueueIds);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchSession();\r\n\t}, [whatsAppId]);\r\n\r\n\tconst handleSaveWhatsApp = async values => {\r\n\t\tconst whatsappData = { ...values, queueIds: selectedQueueIds };\r\n\r\n\t\ttry {\r\n\t\t\tif (whatsAppId) {\r\n\t\t\t\tawait api.put(`/whatsapp/${whatsAppId}`, whatsappData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/whatsapp\", whatsappData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"whatsappModal.success\"));\r\n\t\t\thandleClose();\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetWhatsApp(initialState);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{whatsAppId\r\n\t\t\t\t\t\t? i18n.t(\"whatsappModal.title.edit\")\r\n\t\t\t\t\t\t: i18n.t(\"whatsappModal.title.add\")}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={whatsApp}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={SessionSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveWhatsApp(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ values, touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"whatsappModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tas={Switch}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"isDefault\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={values.isDefault}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"whatsappModal.form.default\")}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.greetingMessage\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"greetingMessage\"\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"greetingMessage\"\r\n\t\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && Boolean(errors.greetingMessage)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && errors.greetingMessage\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"whatsappModal.form.farewellMessage\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"farewellMessage\"\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"farewellMessage\"\r\n\t\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.farewellMessage && Boolean(errors.farewellMessage)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.farewellMessage && errors.farewellMessage\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<QueueSelect\r\n\t\t\t\t\t\t\t\t\tselectedQueueIds={selectedQueueIds}\r\n\t\t\t\t\t\t\t\t\tonChange={selectedIds => setSelectedQueueIds(selectedIds)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"whatsappModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{whatsAppId\r\n\t\t\t\t\t\t\t\t\t\t? i18n.t(\"whatsappModal.buttons.okEdit\")\r\n\t\t\t\t\t\t\t\t\t\t: i18n.t(\"whatsappModal.buttons.okAdd\")}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default React.memo(WhatsAppModal);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport QRCode from \"qrcode.react\";\r\nimport openSocket from \"../../services/socket-io\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { Dialog, DialogContent, Paper, Typography } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\n\r\nconst QrcodeModal = ({ open, onClose, whatsAppId }) => {\r\n\tconst [qrCode, setQrCode] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSession = async () => {\r\n\t\t\tif (!whatsAppId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/whatsapp/${whatsAppId}`);\r\n\t\t\t\tsetQrCode(data.qrcode);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchSession();\r\n\t}, [whatsAppId]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!whatsAppId) return;\r\n\t\tconst socket = openSocket();\r\n\r\n\t\tsocket.on(\"whatsappSession\", data => {\r\n\t\t\tif (data.action === \"update\" && data.session.id === whatsAppId) {\r\n\t\t\t\tsetQrCode(data.session.qrcode);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.action === \"update\" && data.session.qrcode === \"\") {\r\n\t\t\t\tonClose();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [whatsAppId, onClose]);\r\n\r\n\treturn (\r\n\t\t<Dialog open={open} onClose={onClose} maxWidth=\"lg\" scroll=\"paper\">\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<Paper elevation={0}>\r\n\t\t\t\t\t<Typography color=\"primary\" gutterBottom>\r\n\t\t\t\t\t\t{i18n.t(\"qrCode.message\")}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{qrCode ? (\r\n\t\t\t\t\t\t<QRCode value={qrCode} size={256} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span>Waiting for QR Code</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Paper>\r\n\t\t\t</DialogContent>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default React.memo(QrcodeModal);\r\n","import React, { useState, useCallback, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { format, parseISO } from \"date-fns\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n\tButton,\r\n\tTableBody,\r\n\tTableRow,\r\n\tTableCell,\r\n\tIconButton,\r\n\tTable,\r\n\tTableHead,\r\n\tPaper,\r\n\tTooltip,\r\n\tTypography,\r\n\tCircularProgress,\r\n} from \"@material-ui/core\";\r\nimport {\r\n\tEdit,\r\n\tCheckCircle,\r\n\tSignalCellularConnectedNoInternet2Bar,\r\n\tSignalCellularConnectedNoInternet0Bar,\r\n\tSignalCellular4Bar,\r\n\tCropFree,\r\n\tDeleteOutline,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\n\r\nimport api from \"../../services/api\";\r\nimport WhatsAppModal from \"../../components/WhatsAppModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport QrcodeModal from \"../../components/QrcodeModal\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../../context/WhatsApp/WhatsAppsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmainPaper: {\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(1),\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\ttooltip: {\r\n\t\tbackgroundColor: \"#f5f5f9\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.87)\",\r\n\t\tfontSize: theme.typography.pxToRem(14),\r\n\t\tborder: \"1px solid #dadde9\",\r\n\t\tmaxWidth: 450,\r\n\t},\r\n\ttooltipPopper: {\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t},\r\n}));\r\n\r\nconst CustomToolTip = ({ title, content, children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tarrow\r\n\t\t\tclasses={{\r\n\t\t\t\ttooltip: classes.tooltip,\r\n\t\t\t\tpopper: classes.tooltipPopper,\r\n\t\t\t}}\r\n\t\t\ttitle={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Typography gutterBottom color=\"inherit\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{content && <Typography>{content}</Typography>}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Tooltip>\r\n\t);\r\n};\r\n\r\nconst Connections = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst { whatsApps, loading } = useContext(WhatsAppsContext);\r\n\tconst [whatsAppModalOpen, setWhatsAppModalOpen] = useState(false);\r\n\tconst [qrModalOpen, setQrModalOpen] = useState(false);\r\n\tconst [selectedWhatsApp, setSelectedWhatsApp] = useState(null);\r\n\tconst [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\tconst confirmationModalInitialState = {\r\n\t\taction: \"\",\r\n\t\ttitle: \"\",\r\n\t\tmessage: \"\",\r\n\t\twhatsAppId: \"\",\r\n\t\topen: false,\r\n\t};\r\n\tconst [confirmModalInfo, setConfirmModalInfo] = useState(\r\n\t\tconfirmationModalInitialState\r\n\t);\r\n\r\n\tconst handleStartWhatsAppSession = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.post(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleRequestNewQrCode = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.put(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenWhatsAppModal = () => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseWhatsAppModal = useCallback(() => {\r\n\t\tsetWhatsAppModalOpen(false);\r\n\t\tsetSelectedWhatsApp(null);\r\n\t}, [setSelectedWhatsApp, setWhatsAppModalOpen]);\r\n\r\n\tconst handleOpenQrModal = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetQrModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseQrModal = useCallback(() => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetQrModalOpen(false);\r\n\t}, [setQrModalOpen, setSelectedWhatsApp]);\r\n\r\n\tconst handleEditWhatsApp = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = (action, whatsAppId) => {\r\n\t\tif (action === \"disconnect\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.disconnectTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.disconnectMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (action === \"delete\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.deleteTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.deleteMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetConfirmModalOpen(true);\r\n\t};\r\n\r\n\tconst handleSubmitConfirmationModal = async () => {\r\n\t\tif (confirmModalInfo.action === \"disconnect\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsappsession/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (confirmModalInfo.action === \"delete\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsapp/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t\ttoast.success(i18n.t(\"connections.toasts.deleted\"));\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetConfirmModalInfo(confirmationModalInitialState);\r\n\t};\r\n\r\n\tconst renderActionButtons = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={() => handleOpenQrModal(whatsApp)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.qrcode\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => handleStartWhatsAppSession(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.tryAgain\")}\r\n\t\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonClick={() => handleRequestNewQrCode(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.newQr\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"CONNECTED\" ||\r\n\t\t\t\t\twhatsApp.status === \"PAIRING\" ||\r\n\t\t\t\t\twhatsApp.status === \"TIMEOUT\") && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\thandleOpenConfirmationModal(\"disconnect\", whatsApp.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.disconnect\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" disabled color=\"default\">\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.connecting\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderStatusToolTips = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.disconnected.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.disconnected.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.qrcode.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.qrcode.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CropFree />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"CONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\r\n\t\t\t\t\t\t<SignalCellular4Bar style={{ color: green[500] }} />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.timeout.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.timeout.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MainContainer>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={confirmModalInfo.title}\r\n\t\t\t\topen={confirmModalOpen}\r\n\t\t\t\tonClose={setConfirmModalOpen}\r\n\t\t\t\tonConfirm={handleSubmitConfirmationModal}\r\n\t\t\t>\r\n\t\t\t\t{confirmModalInfo.message}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<QrcodeModal\r\n\t\t\t\topen={qrModalOpen}\r\n\t\t\t\tonClose={handleCloseQrModal}\r\n\t\t\t\twhatsAppId={!whatsAppModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<WhatsAppModal\r\n\t\t\t\topen={whatsAppModalOpen}\r\n\t\t\t\tonClose={handleCloseWhatsAppModal}\r\n\t\t\t\twhatsAppId={!qrModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<MainHeader>\r\n\t\t\t\t<Title>{i18n.t(\"connections.title\")}</Title>\r\n\t\t\t\t<MainHeaderButtonsWrapper>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={handleOpenWhatsAppModal}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.add\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</MainHeaderButtonsWrapper>\r\n\t\t\t</MainHeader>\r\n\t\t\t<Paper className={classes.mainPaper} variant=\"outlined\">\r\n\t\t\t\t<Table size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.name\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.status\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.session\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.lastUpdate\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.default\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.actions\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<TableRowSkeleton />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{whatsApps?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\twhatsApps.map(whatsApp => (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow key={whatsApp.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{whatsApp.name}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderStatusToolTips(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderActionButtons(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{format(parseISO(whatsApp.updatedAt), \"dd/MM/yy HH:mm\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApp.isDefault && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle style={{ color: green[500] }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditWhatsApp(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenConfirmationModal(\"delete\", whatsApp.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutline />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</Paper>\r\n\t\t</MainContainer>\r\n\t);\r\n};\r\n\r\nexport default Connections;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport openSocket from \"../../services/socket-io\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n.js\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: theme.spacing(8, 8, 3),\r\n\t},\r\n\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginBottom: 12,\r\n\r\n\t},\r\n\r\n\tsettingOption: {\r\n\t\tmarginLeft: \"auto\",\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t},\r\n\r\n}));\r\n\r\nconst Settings = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [settings, setSettings] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSession = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(\"/settings\");\r\n\t\t\t\tsetSettings(data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetchSession();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = openSocket();\r\n\r\n\t\tsocket.on(\"settings\", data => {\r\n\t\t\tif (data.action === \"update\") {\r\n\t\t\t\tsetSettings(prevState => {\r\n\t\t\t\t\tconst aux = [...prevState];\r\n\t\t\t\t\tconst settingIndex = aux.findIndex(s => s.key === data.setting.key);\r\n\t\t\t\t\taux[settingIndex].value = data.setting.value;\r\n\t\t\t\t\treturn aux;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst handleChangeSetting = async e => {\r\n\t\tconst selectedValue = e.target.value;\r\n\t\tconst settingKey = e.target.name;\r\n\r\n\t\ttry {\r\n\t\t\tawait api.put(`/settings/${settingKey}`, {\r\n\t\t\t\tvalue: selectedValue,\r\n\t\t\t});\r\n\t\t\ttoast.success(i18n.t(\"settings.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getSettingValue = key => {\r\n\t\tconst { value } = settings.find(s => s.key === key);\r\n\t\treturn value;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Container className={classes.container} maxWidth=\"sm\">\r\n\t\t\t\t<Typography variant=\"body2\" gutterBottom>\r\n\t\t\t\t\t{i18n.t(\"settings.title\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t{i18n.t(\"settings.settings.userCreation.name\")}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tnative\r\n\t\t\t\t\t\tid=\"userCreation-setting\"\r\n\t\t\t\t\t\tname=\"userCreation\"\r\n\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\tsettings && settings.length > 0 && getSettingValue(\"userCreation\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclassName={classes.settingOption}\r\n\t\t\t\t\t\tonChange={handleChangeSetting}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"enabled\">\r\n\t\t\t\t\t\t\t{i18n.t(\"settings.settings.userCreation.options.enabled\")}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value=\"disabled\">\r\n\t\t\t\t\t\t\t{i18n.t(\"settings.settings.userCreation.options.disabled\")}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t</Select>\r\n\r\n\t\t\t\t</Paper>\r\n\r\n\t\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tid=\"api-token-setting\"\r\n\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\tlabel=\"Token Api\"\r\n\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tvalue={settings && settings.length > 0 && getSettingValue(\"userApiToken\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Paper>\r\n\r\n\t\t\t</Container>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Settings;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport openSocket from \"../../services/socket-io\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport UserModal from \"../../components/UserModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_USERS\") {\r\n    const users = action.payload;\r\n    const newUsers = [];\r\n\r\n    users.forEach((user) => {\r\n      const userIndex = state.findIndex((u) => u.id === user.id);\r\n      if (userIndex !== -1) {\r\n        state[userIndex] = user;\r\n      } else {\r\n        newUsers.push(user);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newUsers];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_USERS\") {\r\n    const user = action.payload;\r\n    const userIndex = state.findIndex((u) => u.id === user.id);\r\n\r\n    if (userIndex !== -1) {\r\n      state[userIndex] = user;\r\n      return [...state];\r\n    } else {\r\n      return [user, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_USER\") {\r\n    const userId = action.payload;\r\n\r\n    const userIndex = state.findIndex((u) => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      state.splice(userIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Users = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [deletingUser, setDeletingUser] = useState(null);\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [users, dispatch] = useReducer(reducer, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchUsers = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/users/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_USERS\", payload: data.users });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchUsers();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket();\r\n\r\n    socket.on(\"user\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_USERS\", payload: data.user });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_USER\", payload: +data.userId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenUserModal = () => {\r\n    setSelectedUser(null);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleCloseUserModal = () => {\r\n    setSelectedUser(null);\r\n    setUserModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditUser = (user) => {\r\n    setSelectedUser(user);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    try {\r\n      await api.delete(`/users/${userId}`);\r\n      toast.success(i18n.t(\"users.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingUser(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingUser &&\r\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${\r\n            deletingUser.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\r\n      >\r\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={handleCloseUserModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        userId={selectedUser && selectedUser.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"users.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenUserModal}\r\n          >\r\n            {i18n.t(\"users.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">{i18n.t(\"users.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.profile\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.whatsapp\")}\r\n              </TableCell>              \r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {users.map((user) => (\r\n                <TableRow key={user.id}>\r\n                  <TableCell align=\"center\">{user.name}</TableCell>\r\n                  <TableCell align=\"center\">{user.email}</TableCell>\r\n                  <TableCell align=\"center\">{user.profile}</TableCell>\r\n                  <TableCell align=\"center\">{user.whatsapp?.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditUser(user)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingUser(user);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport openSocket from \"../../services/socket-io\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactModal from \"../../components/ContactModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTS\") {\r\n    const contacts = action.payload;\r\n    const newContacts = [];\r\n\r\n    contacts.forEach((contact) => {\r\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n      if (contactIndex !== -1) {\r\n        state[contactIndex] = contact;\r\n      } else {\r\n        newContacts.push(contact);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContacts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTS\") {\r\n    const contact = action.payload;\r\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n\r\n    if (contactIndex !== -1) {\r\n      state[contactIndex] = contact;\r\n      return [...state];\r\n    } else {\r\n      return [contact, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACT\") {\r\n    const contactId = action.payload;\r\n\r\n    const contactIndex = state.findIndex((c) => c.id === contactId);\r\n    if (contactIndex !== -1) {\r\n      state.splice(contactIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Contacts = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contacts, dispatch] = useReducer(reducer, []);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const [deletingContact, setDeletingContact] = useState(null);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/contacts/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket();\r\n\r\n    socket.on(\"contact\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.contact });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.contactId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n\r\n  const handleSaveTicket = async (contactId) => {\r\n    if (!contactId) return;\r\n    setLoading(true);\r\n    try {\r\n      const { data: ticket } = await api.post(\"/tickets\", {\r\n        contactId: contactId,\r\n        userId: user?.id,\r\n        status: \"open\",\r\n      });\r\n      history.push(`/tickets/${ticket.id}`);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const hadleEditContact = (contactId) => {\r\n    setSelectedContactId(contactId);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContact = async (contactId) => {\r\n    try {\r\n      await api.delete(`/contacts/${contactId}`);\r\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContact(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const handleimportContact = async () => {\r\n    try {\r\n      await api.post(\"/contacts/import\");\r\n      history.go(0);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <ContactModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></ContactModal>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContact\r\n            ? `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${\r\n                deletingContact.name\r\n              }?`\r\n            : `${i18n.t(\"contacts.confirmationModal.importTitlte\")}`\r\n        }\r\n        open={confirmOpen}\r\n        onClose={setConfirmOpen}\r\n        onConfirm={(e) =>\r\n          deletingContact\r\n            ? handleDeleteContact(deletingContact.id)\r\n            : handleimportContact()\r\n        }\r\n      >\r\n        {deletingContact\r\n          ? `${i18n.t(\"contacts.confirmationModal.deleteMessage\")}`\r\n          : `${i18n.t(\"contacts.confirmationModal.importMessage\")}`}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"contacts.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={(e) => setConfirmOpen(true)}\r\n          >\r\n            {i18n.t(\"contacts.buttons.import\")}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenContactModal}\r\n          >\r\n            {i18n.t(\"contacts.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\" />\r\n              <TableCell>{i18n.t(\"contacts.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.whatsapp\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contacts.map((contact) => (\r\n                <TableRow key={contact.id}>\r\n                  <TableCell style={{ paddingRight: 0 }}>\r\n                    {<Avatar src={contact.profilePicUrl} />}\r\n                  </TableCell>\r\n                  <TableCell>{contact.name}</TableCell>\r\n                  <TableCell align=\"center\">{contact.number}</TableCell>\r\n                  <TableCell align=\"center\">{contact.email}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleSaveTicket(contact.id)}\r\n                    >\r\n                      <WhatsAppIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => hadleEditContact(contact.id)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <Can\r\n                      role={user.profile}\r\n                      perform=\"contacts-page:deleteContact\"\r\n                      yes={() => (\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={(e) => {\r\n                            setConfirmOpen(true);\r\n                            setDeletingContact(contact);\r\n                          }}\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton avatar columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Contacts;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n  makeStyles,\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    width: \"100%\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  textQuickAnswerContainer: {\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nconst QuickAnswerSchema = Yup.object().shape({\r\n  shortcut: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(15, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  message: Yup.string()\r\n    .min(8, \"Too Short!\")\r\n    .max(30000, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst QuickAnswersModal = ({\r\n  open,\r\n  onClose,\r\n  quickAnswerId,\r\n  initialValues,\r\n  onSave,\r\n}) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n\r\n  const initialState = {\r\n    shortcut: \"\",\r\n    message: \"\",\r\n  };\r\n\r\n  const [quickAnswer, setQuickAnswer] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchQuickAnswer = async () => {\r\n      if (initialValues) {\r\n        setQuickAnswer((prevState) => {\r\n          return { ...prevState, ...initialValues };\r\n        });\r\n      }\r\n\r\n      if (!quickAnswerId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`/quickAnswers/${quickAnswerId}`);\r\n        if (isMounted.current) {\r\n          setQuickAnswer(data);\r\n        }\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n\r\n    fetchQuickAnswer();\r\n  }, [quickAnswerId, open, initialValues]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setQuickAnswer(initialState);\r\n  };\r\n\r\n  const handleSaveQuickAnswer = async (values) => {\r\n    try {\r\n      if (quickAnswerId) {\r\n        await api.put(`/quickAnswers/${quickAnswerId}`, values);\r\n        handleClose();\r\n      } else {\r\n        const { data } = await api.post(\"/quickAnswers\", values);\r\n        if (onSave) {\r\n          onSave(data);\r\n        }\r\n        handleClose();\r\n      }\r\n      toast.success(i18n.t(\"quickAnswersModal.success\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {quickAnswerId\r\n            ? `${i18n.t(\"quickAnswersModal.title.edit\")}`\r\n            : `${i18n.t(\"quickAnswersModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={quickAnswer}\r\n          enableReinitialize={true}\r\n          validationSchema={QuickAnswerSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveQuickAnswer(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, errors, touched, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.textQuickAnswerContainer}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"quickAnswersModal.form.shortcut\")}\r\n                    name=\"shortcut\"\r\n                    autoFocus\r\n                    error={touched.shortcut && Boolean(errors.shortcut)}\r\n                    helperText={touched.shortcut && errors.shortcut}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    className={classes.textField}\r\n                    fullWidth\r\n                  />\r\n                </div>\r\n                <div className={classes.textQuickAnswerContainer}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"quickAnswersModal.form.message\")}\r\n                    name=\"message\"\r\n                    error={touched.message && Boolean(errors.message)}\r\n                    helperText={touched.message && errors.message}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    className={classes.textField}\r\n                    multiline\r\n                    rows={5}\r\n                    fullWidth\r\n                  />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"quickAnswersModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {quickAnswerId\r\n                    ? `${i18n.t(\"quickAnswersModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"quickAnswersModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuickAnswersModal;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport openSocket from \"../../services/socket-io\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  makeStyles,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  InputAdornment,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Edit, DeleteOutline } from \"@material-ui/icons\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport QuickAnswersModal from \"../../components/QuickAnswersModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_QUICK_ANSWERS\") {\r\n    const quickAnswers = action.payload;\r\n    const newQuickAnswers = [];\r\n\r\n    quickAnswers.forEach((quickAnswer) => {\r\n      const quickAnswerIndex = state.findIndex((q) => q.id === quickAnswer.id);\r\n      if (quickAnswerIndex !== -1) {\r\n        state[quickAnswerIndex] = quickAnswer;\r\n      } else {\r\n        newQuickAnswers.push(quickAnswer);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newQuickAnswers];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_QUICK_ANSWERS\") {\r\n    const quickAnswer = action.payload;\r\n    const quickAnswerIndex = state.findIndex((q) => q.id === quickAnswer.id);\r\n\r\n    if (quickAnswerIndex !== -1) {\r\n      state[quickAnswerIndex] = quickAnswer;\r\n      return [...state];\r\n    } else {\r\n      return [quickAnswer, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_QUICK_ANSWERS\") {\r\n    const quickAnswerId = action.payload;\r\n\r\n    const quickAnswerIndex = state.findIndex((q) => q.id === quickAnswerId);\r\n    if (quickAnswerIndex !== -1) {\r\n      state.splice(quickAnswerIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst QuickAnswers = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [quickAnswers, dispatch] = useReducer(reducer, []);\r\n  const [selectedQuickAnswers, setSelectedQuickAnswers] = useState(null);\r\n  const [quickAnswersModalOpen, setQuickAnswersModalOpen] = useState(false);\r\n  const [deletingQuickAnswers, setDeletingQuickAnswers] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchQuickAnswers = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/quickAnswers/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_QUICK_ANSWERS\", payload: data.quickAnswers });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchQuickAnswers();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket();\r\n\r\n    socket.on(\"quickAnswer\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_QUICK_ANSWERS\", payload: data.quickAnswer });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({\r\n          type: \"DELETE_QUICK_ANSWERS\",\r\n          payload: +data.quickAnswerId,\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenQuickAnswersModal = () => {\r\n    setSelectedQuickAnswers(null);\r\n    setQuickAnswersModalOpen(true);\r\n  };\r\n\r\n  const handleCloseQuickAnswersModal = () => {\r\n    setSelectedQuickAnswers(null);\r\n    setQuickAnswersModalOpen(false);\r\n  };\r\n\r\n  const handleEditQuickAnswers = (quickAnswer) => {\r\n    setSelectedQuickAnswers(quickAnswer);\r\n    setQuickAnswersModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteQuickAnswers = async (quickAnswerId) => {\r\n    try {\r\n      await api.delete(`/quickAnswers/${quickAnswerId}`);\r\n      toast.success(i18n.t(\"quickAnswers.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingQuickAnswers(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingQuickAnswers &&\r\n          `${i18n.t(\"quickAnswers.confirmationModal.deleteTitle\")} ${\r\n            deletingQuickAnswers.shortcut\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteQuickAnswers(deletingQuickAnswers.id)}\r\n      >\r\n        {i18n.t(\"quickAnswers.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <QuickAnswersModal\r\n        open={quickAnswersModalOpen}\r\n        onClose={handleCloseQuickAnswersModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        quickAnswerId={selectedQuickAnswers && selectedQuickAnswers.id}\r\n      ></QuickAnswersModal>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"quickAnswers.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"quickAnswers.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenQuickAnswersModal}\r\n          >\r\n            {i18n.t(\"quickAnswers.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickAnswers.table.shortcut\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickAnswers.table.message\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickAnswers.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {quickAnswers.map((quickAnswer) => (\r\n                <TableRow key={quickAnswer.id}>\r\n                  <TableCell align=\"center\">{quickAnswer.shortcut}</TableCell>\r\n                  <TableCell align=\"center\">{quickAnswer.message}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditQuickAnswers(quickAnswer)}\r\n                    >\r\n                      <Edit />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingQuickAnswers(quickAnswer);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default QuickAnswers;\r\n","import { Dialog } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\n\r\nimport { GithubPicker } from \"react-color\";\r\n\r\nconst ColorPicker = ({ onChange, currentColor, handleClose, open }) => {\r\n  const [selectedColor, setSelectedColor] = useState(currentColor);\r\n  const colors = [\r\n    \"#B80000\",\r\n    \"#DB3E00\",\r\n    \"#FCCB00\",\r\n    \"#008B02\",\r\n    \"#006B76\",\r\n    \"#1273DE\",\r\n    \"#004DCF\",\r\n    \"#5300EB\",\r\n    \"#EB9694\",\r\n    \"#FAD0C3\",\r\n    \"#FEF3BD\",\r\n    \"#C1E1C5\",\r\n    \"#BEDADC\",\r\n    \"#C4DEF6\",\r\n    \"#BED3F3\",\r\n    \"#D4C4FB\",\r\n    \"#4D4D4D\",\r\n    \"#999999\",\r\n    \"#FFFFFF\",\r\n    \"#F44E3B\",\r\n    \"#FE9200\",\r\n    \"#FCDC00\",\r\n    \"#DBDF00\",\r\n    \"#A4DD00\",\r\n    \"#68CCCA\",\r\n    \"#73D8FF\",\r\n    \"#AEA1FF\",\r\n    \"#FDA1FF\",\r\n    \"#333333\",\r\n    \"#808080\",\r\n    \"#cccccc\",\r\n    \"#D33115\",\r\n    \"#E27300\",\r\n    \"#FCC400\",\r\n    \"#B0BC00\",\r\n    \"#68BC00\",\r\n    \"#16A5A5\",\r\n    \"#009CE0\",\r\n    \"#7B64FF\",\r\n    \"#FA28FF\",\r\n    \"#666666\",\r\n    \"#B3B3B3\",\r\n    \"#9F0500\",\r\n    \"#C45100\",\r\n    \"#FB9E00\",\r\n    \"#808900\",\r\n    \"#194D33\",\r\n    \"#0C797D\",\r\n    \"#0062B1\",\r\n    \"#653294\",\r\n    \"#AB149E\",\r\n  ];\r\n\r\n  const handleChange = (color) => {\r\n    setSelectedColor(color.hex);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      onClose={handleClose}\r\n      aria-labelledby=\"simple-dialog-title\"\r\n      open={open}\r\n      maxWidth=\"xs\"\r\n      paperFullWidth\r\n    >\r\n      <GithubPicker\r\n        width={\"100%\"}\r\n        triangle=\"hide\"\r\n        color={selectedColor}\r\n        colors={colors}\r\n        onChange={handleChange}\r\n        onChangeComplete={(color) => onChange(color.hex)}\r\n      />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ColorPicker;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport ColorPicker from \"../ColorPicker\";\r\nimport { IconButton, InputAdornment } from \"@material-ui/core\";\r\nimport { Colorize } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n\tcolorAdorment: {\r\n\t\twidth: 20,\r\n\t\theight: 20,\r\n\t},\r\n}));\r\n\r\nconst QueueSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tcolor: Yup.string().min(3, \"Too Short!\").max(9, \"Too Long!\").required(),\r\n\tgreetingMessage: Yup.string(),\r\n});\r\n\r\nconst QueueModal = ({ open, onClose, queueId }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tcolor: \"\",\r\n\t\tgreetingMessage: \"\",\r\n\t};\r\n\r\n\tconst [colorPickerModalOpen, setColorPickerModalOpen] = useState(false);\r\n\tconst [queue, setQueue] = useState(initialState);\r\n\tconst greetingRef = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tif (!queueId) return;\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/queue/${queueId}`);\r\n\t\t\t\tsetQueue(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...data };\r\n\t\t\t\t});\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t})();\r\n\r\n\t\treturn () => {\r\n\t\t\tsetQueue({\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tcolor: \"\",\r\n\t\t\t\tgreetingMessage: \"\",\r\n\t\t\t});\r\n\t\t};\r\n\t}, [queueId, open]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetQueue(initialState);\r\n\t};\r\n\r\n\tconst handleSaveQueue = async values => {\r\n\t\ttry {\r\n\t\t\tif (queueId) {\r\n\t\t\t\tawait api.put(`/queue/${queueId}`, values);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/queue\", values);\r\n\t\t\t}\r\n\t\t\ttoast.success(\"Queue saved successfully\");\r\n\t\t\thandleClose();\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog open={open} onClose={handleClose} scroll=\"paper\">\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{queueId\r\n\t\t\t\t\t\t? `${i18n.t(\"queueModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"queueModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={queue}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={QueueSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveQueue(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting, values }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.color\")}\r\n\t\t\t\t\t\t\t\t\tname=\"color\"\r\n\t\t\t\t\t\t\t\t\tid=\"color\"\r\n\t\t\t\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetColorPickerModalOpen(true);\r\n\t\t\t\t\t\t\t\t\t\tgreetingRef.current.focus();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\terror={touched.color && Boolean(errors.color)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.color && errors.color}\r\n\t\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t\tstartAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: values.color }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.colorAdorment}\r\n\t\t\t\t\t\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setColorPickerModalOpen(true)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Colorize />\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\t\t\t\topen={colorPickerModalOpen}\r\n\t\t\t\t\t\t\t\t\thandleClose={() => setColorPickerModalOpen(false)}\r\n\t\t\t\t\t\t\t\t\tonChange={color => {\r\n\t\t\t\t\t\t\t\t\t\tvalues.color = color;\r\n\t\t\t\t\t\t\t\t\t\tsetQueue(() => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn { ...values, color };\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"queueModal.form.greetingMessage\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"greetingMessage\"\r\n\t\t\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\t\t\tinputRef={greetingRef}\r\n\t\t\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tname=\"greetingMessage\"\r\n\t\t\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && Boolean(errors.greetingMessage)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\thelperText={\r\n\t\t\t\t\t\t\t\t\t\t\ttouched.greetingMessage && errors.greetingMessage\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"queueModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{queueId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"queueModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"queueModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default QueueModal;\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\n\r\nimport openSocket from \"../../services/socket-io\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  makeStyles,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\r\nimport QueueModal from \"../../components/QueueModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_QUEUES\") {\r\n    const queues = action.payload;\r\n    const newQueues = [];\r\n\r\n    queues.forEach((queue) => {\r\n      const queueIndex = state.findIndex((q) => q.id === queue.id);\r\n      if (queueIndex !== -1) {\r\n        state[queueIndex] = queue;\r\n      } else {\r\n        newQueues.push(queue);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newQueues];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_QUEUES\") {\r\n    const queue = action.payload;\r\n    const queueIndex = state.findIndex((u) => u.id === queue.id);\r\n\r\n    if (queueIndex !== -1) {\r\n      state[queueIndex] = queue;\r\n      return [...state];\r\n    } else {\r\n      return [queue, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_QUEUE\") {\r\n    const queueId = action.payload;\r\n    const queueIndex = state.findIndex((q) => q.id === queueId);\r\n    if (queueIndex !== -1) {\r\n      state.splice(queueIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst Queues = () => {\r\n  const classes = useStyles();\r\n\r\n  const [queues, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [queueModalOpen, setQueueModalOpen] = useState(false);\r\n  const [selectedQueue, setSelectedQueue] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const { data } = await api.get(\"/queue\");\r\n        dispatch({ type: \"LOAD_QUEUES\", payload: data });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        toastError(err);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const socket = openSocket();\r\n\r\n    socket.on(\"queue\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_QUEUES\", payload: data.queue });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_QUEUE\", payload: data.queueId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  const handleOpenQueueModal = () => {\r\n    setQueueModalOpen(true);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleCloseQueueModal = () => {\r\n    setQueueModalOpen(false);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleEditQueue = (queue) => {\r\n    setSelectedQueue(queue);\r\n    setQueueModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setConfirmModalOpen(false);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleDeleteQueue = async (queueId) => {\r\n    try {\r\n      await api.delete(`/queue/${queueId}`);\r\n      toast.success(i18n.t(\"Queue deleted successfully!\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          selectedQueue &&\r\n          `${i18n.t(\"queues.confirmationModal.deleteTitle\")} ${\r\n            selectedQueue.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={handleCloseConfirmationModal}\r\n        onConfirm={() => handleDeleteQueue(selectedQueue.id)}\r\n      >\r\n        {i18n.t(\"queues.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <QueueModal\r\n        open={queueModalOpen}\r\n        onClose={handleCloseQueueModal}\r\n        queueId={selectedQueue?.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"queues.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenQueueModal}\r\n          >\r\n            {i18n.t(\"queues.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.color\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.greeting\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {queues.map((queue) => (\r\n                <TableRow key={queue.id}>\r\n                  <TableCell align=\"center\">{queue.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <span\r\n                        style={{\r\n                          backgroundColor: queue.color,\r\n                          width: 60,\r\n                          height: 20,\r\n                          alignSelf: \"center\",\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <Typography\r\n                        style={{ width: 300, align: \"center\" }}\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                      >\r\n                        {queue.greetingMessage}\r\n                      </Typography>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditQueue(queue)}\r\n                    >\r\n                      <Edit />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setSelectedQueue(queue);\r\n                        setConfirmModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Queues;\r\n","import React, { useContext } from \"react\";\r\nimport { Route as RouterRoute, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\n\r\nconst Route = ({ component: Component, isPrivate = false, ...rest }) => {\r\n  const { isAuth, loading } = useContext(AuthContext);\r\n\r\n  if (!isAuth && isPrivate) {\r\n    return (\r\n      <>\r\n        {loading && <BackdropLoading />}\r\n        <Redirect to={{ pathname: \"/login\", state: { from: rest.location } }} />\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (isAuth && !isPrivate) {\r\n    return (\r\n      <>\r\n        {loading && <BackdropLoading />}\r\n        <Redirect to={{ pathname: \"/\", state: { from: rest.location } }} />;\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading && <BackdropLoading />}\r\n      <RouterRoute {...rest} component={Component} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Route;\r\n","import React from \"react\";\r\nimport { BrowserRouter, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nimport LoggedInLayout from \"../layout\";\r\nimport Dashboard from \"../pages/Dashboard/\";\r\nimport Tickets from \"../pages/Tickets/\";\r\nimport Signup from \"../pages/Signup/\";\r\nimport Login from \"../pages/Login/\";\r\nimport Connections from \"../pages/Connections/\";\r\nimport Settings from \"../pages/Settings/\";\r\nimport Users from \"../pages/Users\";\r\nimport Contacts from \"../pages/Contacts/\";\r\nimport QuickAnswers from \"../pages/QuickAnswers/\";\r\nimport Queues from \"../pages/Queues/\";\r\nimport { AuthProvider } from \"../context/Auth/AuthContext\";\r\nimport { WhatsAppsProvider } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport Route from \"./Route\";\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <AuthProvider>\r\n        <Switch>\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/signup\" component={Signup} />\r\n          <WhatsAppsProvider>\r\n            <LoggedInLayout>\r\n              <Route exact path=\"/\" component={Dashboard} isPrivate />\r\n              <Route\r\n                exact\r\n                path=\"/tickets/:ticketId?\"\r\n                component={Tickets}\r\n                isPrivate\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/connections\"\r\n                component={Connections}\r\n                isPrivate\r\n              />\r\n              <Route exact path=\"/contacts\" component={Contacts} isPrivate />\r\n              <Route exact path=\"/users\" component={Users} isPrivate />\r\n              <Route\r\n                exact\r\n                path=\"/quickAnswers\"\r\n                component={QuickAnswers}\r\n                isPrivate\r\n              />\r\n              <Route exact path=\"/Settings\" component={Settings} isPrivate />\r\n              <Route exact path=\"/Queues\" component={Queues} isPrivate />\r\n            </LoggedInLayout>\r\n          </WhatsAppsProvider>\r\n        </Switch>\r\n        <ToastContainer autoClose={3000} />\r\n      </AuthProvider>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Routes from \"./routes\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport { createTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { ptBR } from \"@material-ui/core/locale\";\r\n\r\nconst App = () => {\r\n  const [locale, setLocale] = useState();\r\n\r\n  const theme = createTheme(\r\n    {\r\n      scrollbarStyles: {\r\n        \"&::-webkit-scrollbar\": {\r\n          width: \"8px\",\r\n          height: \"8px\",\r\n        },\r\n        \"&::-webkit-scrollbar-thumb\": {\r\n          boxShadow: \"inset 0 0 6px rgba(0, 0, 0, 0.3)\",\r\n          backgroundColor: \"#e8e8e8\",\r\n        },\r\n      },\r\n      palette: {\r\n        primary: { main: \"#2576d2\" },\r\n      },\r\n    },\r\n    locale\r\n  );\r\n\r\n  useEffect(() => {\r\n    const i18nlocale = localStorage.getItem(\"i18nextLng\");\r\n    const browserLocale =\r\n      i18nlocale.substring(0, 2) + i18nlocale.substring(3, 5);\r\n\r\n    if (browserLocale === \"ptBR\") {\r\n      setLocale(ptBR);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Routes />\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n\t<CssBaseline>\r\n\t\t<App />\r\n\t</CssBaseline>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// ReactDOM.render(\r\n// \t<React.StrictMode>\r\n// \t\t<CssBaseline>\r\n// \t\t\t<App />\r\n// \t\t</CssBaseline>,\r\n//   </React.StrictMode>\r\n\r\n// \tdocument.getElementById(\"root\")\r\n// );\r\n"],"sourceRoot":""}